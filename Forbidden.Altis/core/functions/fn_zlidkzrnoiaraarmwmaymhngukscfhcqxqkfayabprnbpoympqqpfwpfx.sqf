 #include<macro.h> private["_pdusbyuoxijdqiqetycmoxjnijoduucjruqngzpbtlgalqfawnefbmzbxcto","_gskvnfpevsmjhzwtcmwezjyzzcsjvcagqhvxghraqqallxnmwasydpjzarnsfpsx","_uacsrlkxeasaixuvghfrzgpqcyliqauoluorcsjcpoboxgilghewqaythrxrddpudwrp","_progress","_ylneiqwfjgrqgtggapzdwehunrgcwnebecunxurrssmmnfwvkklbeotdgmwsm","_jynvuajfshziprbhkikcrekjmfkpqwqcdctrmcwsrenxwswuvomgpgkkmesk","_dkyjzftifpkdyszrjqlxcjndndudcoqoujioiodeahckvwzekxwwjjboyjfxgk","_zttatbqslodizxlurzjalsvwlosklctdbteaihdrvdrtbritzuwmggupjxmrn","_lmykmovbflqgtccvqqenvibwoorzsgnqtwmxppnkuyuyxhclwgfpcgffswepgsskzdlzj","_jvhbylchwsfwzqbkdxhvxlanmkuizmrcfqfjlmiaxxixlxtcmdvggyeymgvoqbwo","_wmlngghnnnvcspydwmkrszwdqydeytbkiedgpnrzxjmlflknwjhozlupzoqtnxslc"];  if!(var_base getVariable ["oilBankIsLeaking",false]) exitWith {hint localize "STR_m_NoOilLeak";};  if((var_base getVariable ["oil_leak_needTools",false]) && ({_x == "Toolkit"} count items player) < 2) exitWith {hint localize "STR_m_YouNeedToolkit";}; _jvhbylchwsfwzqbkdxhvxlanmkuizmrcfqfjlmiaxxixlxtcmdvggyeymgvoqbwo = true; { 	if(ITEM_VALUE(_x select 0) < (_x select 1)) exitWith {_jvhbylchwsfwzqbkdxhvxlanmkuizmrcfqfjlmiaxxixlxtcmdvggyeymgvoqbwo = false;}; } foreach (var_base getVariable ["oil_leak_needVirt",[]]); if!(_jvhbylchwsfwzqbkdxhvxlanmkuizmrcfqfjlmiaxxixlxtcmdvggyeymgvoqbwo) exitWith {hint format[localize "STR_m_OilRepNeedItems",(var_base getVariable ["oil_neededItemsStr",""])];};   life_interrupted = false; if(life_action_inUse) exitWith {};  life_action_inUse = true; _gskvnfpevsmjhzwtcmwezjyzzcsjvcagqhvxghraqqallxnmwasydpjzarnsfpsx = "Lagar oljebanken";  disableSerialization; 5 cutRsc ["life_progress","PLAIN"]; _uacsrlkxeasaixuvghfrzgpqcyliqauoluorcsjcpoboxgilghewqaythrxrddpudwrp = uiNameSpace getVariable "life_progress"; _progress = _uacsrlkxeasaixuvghfrzgpqcyliqauoluorcsjcpoboxgilghewqaythrxrddpudwrp displayCtrl 38201; _ylneiqwfjgrqgtggapzdwehunrgcwnebecunxurrssmmnfwvkklbeotdgmwsm = _uacsrlkxeasaixuvghfrzgpqcyliqauoluorcsjcpoboxgilghewqaythrxrddpudwrp displayCtrl 38202; _ylneiqwfjgrqgtggapzdwehunrgcwnebecunxurrssmmnfwvkklbeotdgmwsm ctrlSetText format["%2 (1%1)...","%",_gskvnfpevsmjhzwtcmwezjyzzcsjvcagqhvxghraqqallxnmwasydpjzarnsfpsx]; _progress progressSetPosition 0.01; _jynvuajfshziprbhkikcrekjmfkpqwqcdctrmcwsrenxwswuvomgpgkkmesk = 0.01;  while{true} do { 	if(animationState player != "AinvPknlMstpSnonWnonDnon_medic_1") then { 		[[player,"AinvPknlMstpSnonWnonDnon_medic_1",true],"life_fnc_gbrisqbkirkdomhkildcgyttqicsflitrnbqgpixyslsyszkor",true,false] call life_fnc_MP; 		player switchMove "AinvPknlMstpSnonWnonDnon_medic_1"; 		player playMoveNow "AinvPknlMstpSnonWnonDnon_medic_1"; 	}; 	sleep 0.27; 	 	_jynvuajfshziprbhkikcrekjmfkpqwqcdctrmcwsrenxwswuvomgpgkkmesk = _jynvuajfshziprbhkikcrekjmfkpqwqcdctrmcwsrenxwswuvomgpgkkmesk + 0.01; 	 	_progress progressSetPosition _jynvuajfshziprbhkikcrekjmfkpqwqcdctrmcwsrenxwswuvomgpgkkmesk; 	_ylneiqwfjgrqgtggapzdwehunrgcwnebecunxurrssmmnfwvkklbeotdgmwsm ctrlSetText format["%3 (%1%2)...",round(_jynvuajfshziprbhkikcrekjmfkpqwqcdctrmcwsrenxwswuvomgpgkkmesk * 100),"%",_gskvnfpevsmjhzwtcmwezjyzzcsjvcagqhvxghraqqallxnmwasydpjzarnsfpsx]; 	if(_jynvuajfshziprbhkikcrekjmfkpqwqcdctrmcwsrenxwswuvomgpgkkmesk >= 1) exitWith {}; 	if(!alive player) exitWith {}; 	if(player != vehicle player) exitWith {}; 	if(life_interrupted) exitWith {}; };  life_action_inUse = false; 5 cutText ["","PLAIN"]; player playActionNow "stop"; if(life_interrupted OR player != vehicle player OR !life_isAlive) exitWith {life_interrupted = false; titleText[localize "STR_NOTF_ActionCancel","PLAIN"]; life_action_inUse = false;}; if!(var_base getVariable ["oilBankIsLeaking",false]) exitWith {};  if(var_base getVariable ["oil_leak_needTools",false]) then {player removeItem "Toolkit"; player removeItem "Toolkit";}; { 	[false,_x select 0,_x select 1] spawn life_fnc_obfjrnynfhghcglhujcjbgakxemxpjvrqczgxoeickhzvgovmtdbvr; } foreach (var_base getVariable ["oil_leak_needVirt",[]]);  [2,[15287.8,15787.9,5],256] remoteExec ["life_fnc_lootBoxSpawn",2]; _wmlngghnnnvcspydwmkrszwdqydeytbkiedgpnrzxjmlflknwjhozlupzoqtnxslc = (100000 + round (random (400000))); life_cash = life_cash + _wmlngghnnnvcspydwmkrszwdqydeytbkiedgpnrzxjmlflknwjhozlupzoqtnxslc; [2,format[localize "STR_m_RepairedOilBank",_wmlngghnnnvcspydwmkrszwdqydeytbkiedgpnrzxjmlflknwjhozlupzoqtnxslc]] spawn life_fnc_broadcast;  [5,format["<t size='1.2'><t color='#FF0000'>%1</t></t><br/><br/><t size='1'>%2</t>",localize "STR_m_OilLeak",format[localize "STR_m_OilLeakRepaired",profileName]]] remoteExec ["life_fnc_broadcast",-2];  var_base setVariable ["oilBankIsLeaking",false,true]; [] remoteExec ["life_fnc_cylcoklbmemomcaqesrqdstaesompwmgeoaiyuujdlphokfnsxl",-2]; 