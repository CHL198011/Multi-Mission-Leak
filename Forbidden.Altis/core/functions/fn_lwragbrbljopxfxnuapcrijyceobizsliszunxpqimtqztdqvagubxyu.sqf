
#include <macro.h>
 private["_lgwaebzyropfiynohuqyqdqfwfdixwptdecpjmmrmitfndhneknotsiofsnoic","_gearSet","_wimnlappdnsiwwbxfofvmxxkdrssytwnvstnjjlaqdhcavlzotwzzugbiqdqedbie","_admin","_topqargneqgiblhlmclirxzqnofeqqdqxyqbwpemyebojktjcpvnkcubqdbmtqixhv","_ecdpaquzzgxzgsluqebplpwugzsgjpfardywaqmcwyiaavzxahwegzzeaxmpxiosbpx","_xmtfoswdfziwhgzlgjzzznfvnbnaryzetmtemhnkplnbgtuggvqsmygprproihta","_bsytvcrjtxwzpycxudjcxvpgesgfhwoezakgliilhoaultzqawibfajvxtuoezluxo"];  safekeep_toDisable = [_this,0,false,[false]] call bis_fnc_param; safe_gearSet = [_this,1,"",[""]] call bis_fnc_param; _admin = [_this,2,objNull,[objNull]] call bis_fnc_param; _topqargneqgiblhlmclirxzqnofeqqdqxyqbwpemyebojktjcpvnkcubqdbmtqixhv = [_this,3,false,[false]] call bis_fnc_param; safekeeping_team = [_this,4,0,[0]] call bis_fnc_param; _ecdpaquzzgxzgsluqebplpwugzsgjpfardywaqmcwyiaavzxahwegzzeaxmpxiosbpx = [_this,5,false,[false]] call BIS_fnc_param;  safe_gearSet = toLower safe_gearSet;  if(isNil "inEventGame") then {inEventGame = false;}; if(isNil "safeKeep_leftEvent") then {safeKeep_leftEvent = false;};  if(safeKeep_leftEvent) exitWith {}; if(safe_isWaitingAlive) exitWith {}; safe_isWaitingAlive = true; if(!life_isAlive) then {waitUntil {life_isAlive};}; safe_isWaitingAlive = false;  if(safekeep_toDisable && !safekeeping_active) exitWith {}; if(safeKeep_leftEvent) exitWith {};  _xmtfoswdfziwhgzlgjzzznfvnbnaryzetmtemhnkplnbgtuggvqsmygprproihta = false; if(SafeKeeping_inProgress) then { 	if(_ecdpaquzzgxzgsluqebplpwugzsgjpfardywaqmcwyiaavzxahwegzzeaxmpxiosbpx) then { 		safeKeep_leftEvent = true; 		waitUntil {!SafeKeeping_inProgress}; 	} else { 		_xmtfoswdfziwhgzlgjzzznfvnbnaryzetmtemhnkplnbgtuggvqsmygprproihta = true; 		 		if(!isNull _admin) then { 			[0,format["Du/ni tryckte för fort! %1s safekeeping har inte %2",profileName,if(safekeep_toDisable) then {"deaktiverats"} else {"aktiverats"}]] remoteExec ["life_fnc_broadcast",_admin]; 			[1,format["Du/ni tryckte för fort! %1s safekeeping har inte %2",profileName,if(safekeep_toDisable) then {"deaktiverats"} else {"aktiverats"}]] remoteExec ["life_fnc_broadcast",_admin]; 		}; 	}; }; if(_xmtfoswdfziwhgzlgjzzznfvnbnaryzetmtemhnkplnbgtuggvqsmygprproihta) exitWith {}; SafeKeeping_inProgress = true; if(safeKeep_leftEvent) then {safeKeep_leftEvent = false; safekeep_toDisable = true;};  if!(isNull real_player) then {[""] spawn life_fnc_kilyjctvlzpammikwiowotymtfdfnxqkmjnkjjzbmvqelmsykhnnvcta;}; waitUntil {isNull real_player};  if(!_topqargneqgiblhlmclirxzqnofeqqdqxyqbwpemyebojktjcpvnkcubqdbmtqixhv) then { 	if(!isNull _admin) then { 		[0,format["Du har %1 %2s safekeeping",if(safekeep_toDisable) then {"avaktiverat"} else {"aktiverat"},profileName]] remoteExec ["life_fnc_broadcast",_admin]; 		[1,format["Du har %1 %2s safekeeping",if(safekeep_toDisable) then {"avaktiverat"} else {"aktiverat"},profileName]] remoteExec ["life_fnc_broadcast",_admin]; 	}; 	[2,format["Safekeeping %1!",if(safekeep_toDisable) then {"avaktiverat"} else {"aktiverat"}]] spawn life_fnc_broadcast; 	 };  if(safekeep_toDisable) then { 	Safekeeping_dead = false; 	 	if!(isnull ( uinamespace getvariable "RSCDisplayArsenal" )) then { 		(uinamespace getvariable "RSCDisplayArsenal") closeDisplay 0; 		allowedInArsenal = false; 	}; 	 	if(life_markers) then { 		[] spawn ADP_fnc_mryrhitqjscpuwarpwrvxkjucemygyjvzglajewdlhjdmtkjjw; 	}; 	 	_wimnlappdnsiwwbxfofvmxxkdrssytwnvstnjjlaqdhcavlzotwzzugbiqdqedbie = []; 	{ 		_wimnlappdnsiwwbxfofvmxxkdrssytwnvstnjjlaqdhcavlzotwzzugbiqdqedbie pushBack (configName _x); 	} foreach ("true" configClasses (missionConfigFile >> "VirtualItems")); 	 	{ 		[false,_x,ITEM_VALUE(_x)] call life_fnc_obfjrnynfhghcglhujcjbgakxemxpjvrqczgxoeickhzvgovmtdbvr; 	} foreach _wimnlappdnsiwwbxfofvmxxkdrssytwnvstnjjlaqdhcavlzotwzzugbiqdqedbie; 	 	player setAnimSpeedCoef 1; 	[] spawn life_fnc_turbo; 	 	life_carryWeight = 0; 	 	life_atmBank = life_atmBank - safeKeep_cash; 	life_cash = safeKeep_cash; 	[6] call SOCK_fnc_ddjmbrftntgdwpptfaoymlxkcjyscjwhklmcfylqhrqrxtxznnh; 	 	life_gear = safe_gear; 	_handle = [] spawn life_fnc_ypufifqvwhywsfipllcqkxzffdjzwmpvtocvlcfdwdfqdemvdmllaqjmu; 	waitUntil {scriptDone _handle}; 	[] call life_fnc_msadidgvqhtvsjjccqkjeswflihnsjavasrpksejeulvkmtbgj; 	[[],true] spawn life_fnc_rowhjumsjgsncucggciahhfhgmxuheiscxpmznzokspmwulycajsgd; 	life_respawn_timer = switch (playerSide) do { 		case independent: {0.5}; 		default {2}; 	}; 	 	if(playerSide == civilian) then { 		{ 			if(_x isKindOf "House_F") then { 				_x setVariable ["house_owner_online",true,true]; 			}; 		} foreach life_vehicles; 	}; 	 	[] call life_fnc_initGang; 	[1] spawn life_fnc_cffqieiafhbofhqthjbvastsiczvnuzljhbtedyjhqjvdhluzsbbgyiv; 	 	player setVariable ["safeKeeping_gearSet","",true]; 	 	 	[] spawn { 		if(!allowedDamage) exitWith {}; 		player addRating (-(rating player)); 		player addRating -1000000; 		sleep 1; 		if(!allowedDamage) exitWith {}; 		player addRating (-(rating player)); 		player addRating 1000000; 	}; 	 	 	safekeeping_active = false; 	 } else { 	[true] call life_fnc_wrkibhoprwgzzqikpvkmdebpbfywrjtnwqxfwowjwwgksrgsjlgjuyxnvxe; 	 	if(!safekeeping_active) then { 		safe_gear = life_gear; 		[getPlayerUID player,playerSide,safe_gear,3,(call life_rebactive)] remoteExec ["DB_fnc_ddjmbrftntgdwpptfaoymlxkcjyscjwhklmcfylqhrqrxtxznnh",2]; 		 		safeKeep_cash = life_cash; 		life_atmBank = life_atmBank + life_cash; 		life_cash = 0; 		[6] call SOCK_fnc_ddjmbrftntgdwpptfaoymlxkcjyscjwhklmcfylqhrqrxtxznnh; 	}; 	 	{ 		[false,(_x select 0),(_x select 1)] call life_fnc_obfjrnynfhghcglhujcjbgakxemxpjvrqczgxoeickhzvgovmtdbvr; 	} foreach (life_gear select 16); 	 	if(playerSide == civilian) then { 		{ 			if(_x isKindOf "House_F") then { 				_x setVariable ["house_owner_online",false,true]; 			}; 		} foreach life_vehicles; 	}; 	 	 	 	if(count (var_base getVariable ["turbo_boost",[]]) > 0) then { 		(var_base getVariable ["turbo_boost",[]]) spawn life_fnc_turbo; 	}; 	 	if(var_base getVariable ["SafeKeeping_1stPerson",false]) then { 		[true] spawn life_fnc_kwaqfjcxmqdmlcgwcrkhaxaiztrhnjyvafvypyjwnbhjlfvmxjma; 	}; 	 	if(var_base getVariable ["safekeep_godmode",false]) then { 		[true] spawn life_fnc_oobsuifauqwwzregrfpnnchanuszqbdrivawblrvvhztsidiaysdhycqlq; 	}; 	 	if(var_base getVariable ["safeKeepingAmmo",false]) then { 		[true] spawn life_fnc_zbdabodawlhsgohqpbbrgwbjmselbmbileuhahjwnkzsfcadqxycokbye; 	}; 	 	if((var_base getVariable ["safekeep_maxHeight",0]) != 0) then { 		[(var_base getVariable ["safekeep_maxHeight",0])] spawn life_fnc_cljdbacpreczrnvgccrudbhshlubyjvfgigcxbaoutxueyobwi; 	}; 	 	if((safe_gearSet == "admin") && ((call life_adminlevel) == 0)) then {safe_gearSet = "default"}; 	 	switch (true) do { 		case (safe_gearSet in ["admin","event"]): {player setAnimSpeedCoef 2;}; 		case (safe_gearSet in ["blixten"]): {player setAnimSpeedCoef 5;}; 		default {player setAnimSpeedCoef 1;}; 	}; 	 	 	life_gear = getArray(missionConfigFile >> "SafekeepingLoadouts" >> safe_gearSet >> "loadout"); 	if(count life_gear == 0) then {life_gear = getArray(missionConfigFile >> "SafekeepingLoadouts" >> "default" >> "loadout")}; 	 	 	if((life_gear select 0) == "defaultLoadout") then { 		_bsytvcrjtxwzpycxudjcxvpgesgfhwoezakgliilhoaultzqawibfajvxtuoezluxo = var_base getVariable [format["safekeeping_custom_%1",safe_gearSet],[]]; 		if(count _bsytvcrjtxwzpycxudjcxvpgesgfhwoezakgliilhoaultzqawibfajvxtuoezluxo > 0) then { 			life_gear = _bsytvcrjtxwzpycxudjcxvpgesgfhwoezakgliilhoaultzqawibfajvxtuoezluxo; 		} else { 			safe_gearSet = "default"; 			life_gear SET [0,selectRandom ["U_C_Poloshirt_blue","U_C_Poloshirt_burgundy","U_C_Poloshirt_redwhite","U_C_Poloshirt_salmon","U_C_Poloshirt_stripped","U_C_Poloshirt_tricolour","U_Competitor"]]; 		}; 	}; 	 	_handle = [] spawn life_fnc_ypufifqvwhywsfipllcqkxzffdjzwmpvtocvlcfdwdfqdemvdmllaqjmu; 	waitUntil {scriptDone _handle}; 	 	 	 	 	switch (safe_gearSet) do { 		case "admin" : { 			if(getPlayerUID player != "76561198171869739") then { 				switch (call life_adminlevel) do { 					case 1: {[[0,"textures\clothes\support.paa"]] spawn life_fnc_rowhjumsjgsncucggciahhfhgmxuheiscxpmznzokspmwulycajsgd;}; 					case 2: {[[0,"textures\clothes\trial_mod.paa"]] spawn life_fnc_rowhjumsjgsncucggciahhfhgmxuheiscxpmznzokspmwulycajsgd;}; 					case 3: {[[0,"textures\clothes\moderator.paa"]] spawn life_fnc_rowhjumsjgsncucggciahhfhgmxuheiscxpmznzokspmwulycajsgd;}; 					default {[[0,"textures\clothes\admin.paa"]] spawn life_fnc_rowhjumsjgsncucggciahhfhgmxuheiscxpmznzokspmwulycajsgd;}; 				}; 			} else { 				[[0,"textures\clothes\admin_bonde.paa"]] spawn life_fnc_rowhjumsjgsncucggciahhfhgmxuheiscxpmznzokspmwulycajsgd; 			}; 		}; 		case "event" : {[[0,"textures\clothes\eventplanerare.paa"]] spawn life_fnc_rowhjumsjgsncucggciahhfhgmxuheiscxpmznzokspmwulycajsgd;}; 		case "blixten" : {[[0,"textures\clothes\blixten.paa"]] spawn life_fnc_rowhjumsjgsncucggciahhfhgmxuheiscxpmznzokspmwulycajsgd;}; 		case "blixten_NV" : {[[0,"textures\clothes\blixten.paa"]] spawn life_fnc_rowhjumsjgsncucggciahhfhgmxuheiscxpmznzokspmwulycajsgd;}; 		case "insats" : {[[0,"textures\clothes\cop\insatsstyrkan.paa"]] spawn life_fnc_rowhjumsjgsncucggciahhfhgmxuheiscxpmznzokspmwulycajsgd;}; 		case "insats_mar" : {[[0,"textures\clothes\cop\insatsstyrkan.paa"]] spawn life_fnc_rowhjumsjgsncucggciahhfhgmxuheiscxpmznzokspmwulycajsgd;}; 		case "neo_polis" : {[[0,"textures\clothes\cop\police_blue.paa"]] spawn life_fnc_rowhjumsjgsncucggciahhfhgmxuheiscxpmznzokspmwulycajsgd; (unitBackpack player) setObjectTextureGlobal [0,"textures\clothes\cop\kitbag_blue.paa"];}; 		case "polis" : {[[0,"textures\clothes\cop\police_cadet.paa"]] spawn life_fnc_rowhjumsjgsncucggciahhfhgmxuheiscxpmznzokspmwulycajsgd; (unitBackpack player) setObjectTextureGlobal [0,"textures\clothes\cop\kitbag_blue.paa"];}; 		case "polis_blue" : {[[0,"textures\clothes\cop\police_blue.paa"]] spawn life_fnc_rowhjumsjgsncucggciahhfhgmxuheiscxpmznzokspmwulycajsgd; (unitBackpack player) setObjectTextureGlobal [0,"textures\clothes\cop\kitbag_blue.paa"];}; 		case "polis_black" : {[[0,"textures\clothes\cop\police_black.paa"]] spawn life_fnc_rowhjumsjgsncucggciahhfhgmxuheiscxpmznzokspmwulycajsgd; (unitBackpack player) setObjectTextureGlobal [0,"textures\clothes\cop\kitbag.paa"];}; 		case "polis_camo" : {[[0,"textures\clothes\cop\insatsstyrkan.paa"]] spawn life_fnc_rowhjumsjgsncucggciahhfhgmxuheiscxpmznzokspmwulycajsgd; (unitBackpack player) setObjectTextureGlobal [0,"textures\clothes\cop\kitbag_camo.paa"];}; 		 		case "rpg" : { 			player addweapon "launch_RPG32_F"; 			reload player; 			player addItem "RPG32_F"; 		}; 		case "mxc_rpg" : { 			player addweapon "launch_RPG7_F"; 			reload player; 			player addItem "RPG7_F"; 		}; 		case "taliban" : { 			player addweapon "launch_RPG7_F"; 			reload player; 			player addItem "RPG7_F"; 		}; 	}; 	 	if(count (var_base getVariable ["areaSafe_spawn",[]]) > 0) then { 		[0] spawn life_fnc_cffqieiafhbofhqthjbvastsiczvnuzljhbtedyjhqjvdhluzsbbgyiv; 	}; 	 	if(count (var_base getVariable ["blueSafe_spawn",[]]) > 0) then { 		[2] spawn life_fnc_cffqieiafhbofhqthjbvastsiczvnuzljhbtedyjhqjvdhluzsbbgyiv; 	}; 	 	if(count (var_base getVariable ["redSafe_spawn",[]]) > 0) then { 		[3] spawn life_fnc_cffqieiafhbofhqthjbvastsiczvnuzljhbtedyjhqjvdhluzsbbgyiv; 	}; 	 	if(count (var_base getVariable ["generalSafe_spawn",[]]) > 0) then { 		[4] spawn life_fnc_cffqieiafhbofhqthjbvastsiczvnuzljhbtedyjhqjvdhluzsbbgyiv; 	}; 	 	if(count (var_base getVariable ["greenSafe_spawn",[]]) > 0) then { 		[5] spawn life_fnc_cffqieiafhbofhqthjbvastsiczvnuzljhbtedyjhqjvdhluzsbbgyiv; 	}; 	 	life_hunger = 100; 	life_thirst = 100; 	 	player setDamage 0; 	 	player setVariable ["safekeeping_team",safekeeping_team,true]; 	if(safekeeping_team == 0) then { 		[0,true] call life_fnc_initGang; 	} else { 		[safekeeping_team] call life_fnc_initGang; 	}; 	 	life_respawn_timer = 0.1; 	player setVariable ["safeKeeping_gearSet",safe_gearSet,true]; 	safekeeping_active = true; };   player setVariable ["SafeKeeping",safekeeping_active,true]; SafeKeeping_inProgress = false; [true] spawn life_fnc_bpvcqyvhockaakifrvtmeudjvpvoxhypsmekufkfsrsgjmvhgyuzmrf; [] spawn life_fnc_cylcoklbmemomcaqesrqdstaesompwmgeoaiyuujdlphokfnsxl; [10] spawn life_fnc_cffqieiafhbofhqthjbvastsiczvnuzljhbtedyjhqjvdhluzsbbgyiv;  if(!_topqargneqgiblhlmclirxzqnofeqqdqxyqbwpemyebojktjcpvnkcubqdbmtqixhv && !(isNull _admin)) then { 	[4,(getPlayerUID _admin),getPlayerUID player,"Safe keeping",format["%1: %2",if(safekeeping_active) then {"Aktiverat"} else {"Avaktiverat"},if(safekeeping_active) then {safe_gearSet} else {""}],name _admin,profileName,str (getPos _admin)] remoteExec ["TON_fnc_cqbslmzhelexdchvshruhtirwniyhyywbybxhiltsdxdujmnhjuhnal",2]; };  