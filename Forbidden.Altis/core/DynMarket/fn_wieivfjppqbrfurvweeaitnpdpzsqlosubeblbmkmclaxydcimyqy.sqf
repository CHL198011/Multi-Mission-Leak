
#include <macro.h>
  private["_bvnrbqaexubjmotuawjtleuatgwzazbqkevryaivysedcyiueqduyfuvcwxe","_pspdnnunglbwennwvmxmcdzumoxscyibgyvennpppvzsytxmuyskgfbstymqf","_ghpciriuvxnsgcthvxeggcthbinnpymsqzjxxnwieiittmwnepsgacljrjriyyftf","_gaenolayjxkckndfzrvqbgpgwschhmefqhrpwomwubkzrzgfeowjfhnhsryfpqw"];  disableSerialization; _dialog = findDisplay 7100;  _listbox = _dialog  displayCtrl 7055; _cashdisplay = _dialog displayCtrl 7056; _amountsolddisplay = _dialog displayCtrl 7057; _cashdisplayold = _dialog displayCtrl 7058; _ghpciriuvxnsgcthvxeggcthbinnpymsqzjxxnwieiittmwnepsgacljrjriyyftf = _dialog displayCtrl 7098; _gaenolayjxkckndfzrvqbgpgwschhmefqhrpwomwubkzrzgfeowjfhnhsryfpqw = _dialog displayCtrl 7099;   _index = lbCurSel _listbox;  _costOld = 0; _itemArrayOld = [];  if (!isNil "DYNMARKET_pricesOld") then {_itemArrayOld = DYNMARKET_pricesOld select _index;} else {_itemArrayOld=["",0];};  _itemArray = DYNMARKET_prices select _index;  _cost = _itemArray select 1; _costOld = _itemArrayOld select 1; _itemname = _itemArray select 0;  _amountsold = 0; { 	_name = _x select 0; 	_sold = _x select 1; 	if (_itemname==_name) then { 		_amountsold = _amountsold + _sold; 	}; } forEach DYNAMICMARKET_boughtItems;    if(_itemname == "oil_processed") then { 	_amountsolddisplay ctrlSetText format ["%1%2 fylld",(var_base getVariable ["fuelbank_percentage",50]),"%"]; 	_ghpciriuvxnsgcthvxeggcthbinnpymsqzjxxnwieiittmwnepsgacljrjriyyftf ctrlSetText (localize "STR_m_FuelBankStatus"); 	_gaenolayjxkckndfzrvqbgpgwschhmefqhrpwomwubkzrzgfeowjfhnhsryfpqw ctrlShow true; 	_gaenolayjxkckndfzrvqbgpgwschhmefqhrpwomwubkzrzgfeowjfhnhsryfpqw progressSetPosition ((var_base getVariable ["fuelbank_percentage",50])/100); 	_cost = (var_base getVariable ["fuelbank_priceSell",12000]); } else { 	_amountsolddisplay ctrlSetText format ["%1",_amountsold]; 	_gaenolayjxkckndfzrvqbgpgwschhmefqhrpwomwubkzrzgfeowjfhnhsryfpqw ctrlShow false; 	_ghpciriuvxnsgcthvxeggcthbinnpymsqzjxxnwieiittmwnepsgacljrjriyyftf ctrlSetText (localize "STR_m_AmountSoldByYou"); };  _pspdnnunglbwennwvmxmcdzumoxscyibgyvennpppvzsytxmuyskgfbstymqf = switch (_itemname) do { 	case "oil_processed" : {"oil_unprocessed"}; 	case "diamond_cut" : {"diamond_uncut"}; 	case "heroin_processed" : {"heroin_unprocessed"}; 	case "copper_refined" : {"copper_unrefined"}; 	case "kanelbulle" : {"kanel"}; 	case "horor_avlusade" : {"horor"}; 	case "iron_refined" : {"iron_unrefined"}; 	case "glass" : {"sand"}; 	case "salt_refined" : {"salt_unrefined"}; 	case "cocaine_processed" : {"cocaine_unprocessed"}; 	case "marijuana" : {"cannabis"}; 	case "cement" : {"rock"}; 	default {_itemname}; };  _bvnrbqaexubjmotuawjtleuatgwzazbqkevryaivysedcyiueqduyfuvcwxe = [_pspdnnunglbwennwvmxmcdzumoxscyibgyvennpppvzsytxmuyskgfbstymqf] call life_fnc_ixqubeuqyvvlxqyldjgxzumawmrijapytyxfcsaswdetlfqsdciynug; _cashdisplay ctrlSetText format["%1$ ($%2 per kg)",round _cost,round (_cost / _bvnrbqaexubjmotuawjtleuatgwzazbqkevryaivysedcyiueqduyfuvcwxe)]; _arrowText = ""; if (_cost<_costOld) then { 	_percent = (100-((_cost/_costOld)*100)); 	_arrowText = format ["<t color='#FF0000'>? %1%2",_percent,"%"]; } else { 	if (_costOld<_cost) then { 		_percent = (100-((_costOld/_cost)*100)); 		_arrowText = format ["<t color='#04B404'>? %1%2",_percent,"%"]; 	} else { 		_percent = (100-((_costOld/_cost)*100)); 		_arrowText = format [""]; 	}; }; _cashdisplayold ctrlSetStructuredText parseText format ["%1$ %2",round _costOld,_arrowText]; _cashdisplayold ctrlShow !(_itemname == "oil_processed"); 