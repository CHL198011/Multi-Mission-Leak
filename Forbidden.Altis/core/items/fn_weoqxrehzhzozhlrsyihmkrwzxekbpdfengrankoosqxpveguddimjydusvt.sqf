 private["_mtxjcbfotkxdiheyoojfknjjxboioxczmvflbpjrgqkkggucxnvopxoxmjmcftgrhs","_dkxugkfjmxukbsafsbuhhgeezqvnatpcnucsdmyqlqzsegckrzrolkbjwtewemblqyt","_xuhmsrmvyanoewptatjdiictkdhdtzswfvnzecunjjofndicdchmtxljmqbm","_jehmksskdlbgpxqeeslvduioxaevryrpvtyyputfabqrohmoynamyjgmyqsv","_xskfugqvzdhxqkpbubjsiongrllabmnzagjbibnjkcinfsupkxdwdlbzbjuksexfyqu","_tfhdadfjwoxnfjhsbjgjdlukitlhzhqiugsoggigyadzxtqvqfaopyqhapqpletunksnh","_jehmksskdlbgpxqeeslvduioxaevryrpvtyyputfabqrohmoynamyjgmyqsvText","_oczcoxdvsswjcsfrrhwuhfrlmrcpvdrrciujrkeesxlorglksliogphohnfkrqjimkf","_aryubuyuicwngimsvrblucsvtjrbzjmwhpnjrtqqoztffajrlldpwoqizuwmjrsjn","_tyluaahpaotpjirvxhsdkhluzjcoihxrrhbvsyemffbdjdtiusnmtorwenxmxpeutcs","_rcywnpydffjrtqfntlwqhfjfakthbeefryccaopptsnciebzgeqkoawchctsrexxn"]; _mtxjcbfotkxdiheyoojfknjjxboioxczmvflbpjrgqkkggucxnvopxoxmjmcftgrhs = cursorTarget; life_interrupted = false; if(life_action_inUse) exitWith {}; if(isNull _mtxjcbfotkxdiheyoojfknjjxboioxczmvflbpjrgqkkggucxnvopxoxmjmcftgrhs) exitWith {};  _dkxugkfjmxukbsafsbuhhgeezqvnatpcnucsdmyqlqzsegckrzrolkbjwtewemblqyt = ((boundingBox _mtxjcbfotkxdiheyoojfknjjxboioxczmvflbpjrgqkkggucxnvopxoxmjmcftgrhs select 1) select 0) + 2; if(player distance _mtxjcbfotkxdiheyoojfknjjxboioxczmvflbpjrgqkkggucxnvopxoxmjmcftgrhs > _dkxugkfjmxukbsafsbuhhgeezqvnatpcnucsdmyqlqzsegckrzrolkbjwtewemblqyt) exitWith {};  _xuhmsrmvyanoewptatjdiictkdhdtzswfvnzecunjjofndicdchmtxljmqbm = if((_mtxjcbfotkxdiheyoojfknjjxboioxczmvflbpjrgqkkggucxnvopxoxmjmcftgrhs isKindOf "LandVehicle") OR (_mtxjcbfotkxdiheyoojfknjjxboioxczmvflbpjrgqkkggucxnvopxoxmjmcftgrhs isKindOf "Ship") OR (_mtxjcbfotkxdiheyoojfknjjxboioxczmvflbpjrgqkkggucxnvopxoxmjmcftgrhs isKindOf "Air")) then {true} else {false}; if(_xuhmsrmvyanoewptatjdiictkdhdtzswfvnzecunjjofndicdchmtxljmqbm && _mtxjcbfotkxdiheyoojfknjjxboioxczmvflbpjrgqkkggucxnvopxoxmjmcftgrhs in life_vehicles) exitWith {hint localize "STR_ISTR_Lock_AlreadyHave"}; if(_mtxjcbfotkxdiheyoojfknjjxboioxczmvflbpjrgqkkggucxnvopxoxmjmcftgrhs getVariable ["ADP_spawned",false]) exitWith {hint "Fordonet spawnat av admin!";};   if(!_xuhmsrmvyanoewptatjdiictkdhdtzswfvnzecunjjofndicdchmtxljmqbm && !isPlayer _mtxjcbfotkxdiheyoojfknjjxboioxczmvflbpjrgqkkggucxnvopxoxmjmcftgrhs) exitWith {}; if(!_xuhmsrmvyanoewptatjdiictkdhdtzswfvnzecunjjofndicdchmtxljmqbm && !(_mtxjcbfotkxdiheyoojfknjjxboioxczmvflbpjrgqkkggucxnvopxoxmjmcftgrhs getVariable["restrained",false])) exitWith {}; _tyluaahpaotpjirvxhsdkhluzjcoihxrrhbvsyemffbdjdtiusnmtorwenxmxpeutcs = (getPos player) inArea "kavala_safezone"; if(_xuhmsrmvyanoewptatjdiictkdhdtzswfvnzecunjjofndicdchmtxljmqbm && _tyluaahpaotpjirvxhsdkhluzjcoihxrrhbvsyemffbdjdtiusnmtorwenxmxpeutcs) exitWith {hint "Inte i Kavala!";};  _jehmksskdlbgpxqeeslvduioxaevryrpvtyyputfabqrohmoynamyjgmyqsv = format[localize "STR_ISTR_Lock_Process",if(!_xuhmsrmvyanoewptatjdiictkdhdtzswfvnzecunjjofndicdchmtxljmqbm) then {"Handcuffs"} else {getText(configFile >> "CfgVehicles" >> (typeOf _mtxjcbfotkxdiheyoojfknjjxboioxczmvflbpjrgqkkggucxnvopxoxmjmcftgrhs) >> "displayName")}]; life_action_inUse = true;    disableSerialization; 5 cutRsc ["life_progress","PLAIN"]; _ui = uiNamespace getVariable "life_progress"; _xskfugqvzdhxqkpbubjsiongrllabmnzagjbibnjkcinfsupkxdwdlbzbjuksexfyqu = _ui displayCtrl 38201; _jehmksskdlbgpxqeeslvduioxaevryrpvtyyputfabqrohmoynamyjgmyqsvText = _ui displayCtrl 38202; _jehmksskdlbgpxqeeslvduioxaevryrpvtyyputfabqrohmoynamyjgmyqsvText ctrlSetText format["%2 (1%1)...","%",_jehmksskdlbgpxqeeslvduioxaevryrpvtyyputfabqrohmoynamyjgmyqsv]; _xskfugqvzdhxqkpbubjsiongrllabmnzagjbibnjkcinfsupkxdwdlbzbjuksexfyqu progressSetPosition 0.01; _tfhdadfjwoxnfjhsbjgjdlukitlhzhqiugsoggigyadzxtqvqfaopyqhapqpletunksnh = 0.01;   _lightStatus = !(isLightOn _mtxjcbfotkxdiheyoojfknjjxboioxczmvflbpjrgqkkggucxnvopxoxmjmcftgrhs); _beforeStatus = isLightOn _mtxjcbfotkxdiheyoojfknjjxboioxczmvflbpjrgqkkggucxnvopxoxmjmcftgrhs;  _rcywnpydffjrtqfntlwqhfjfakthbeefryccaopptsnciebzgeqkoawchctsrexxn = 0.01; if(perk_21 >= 3) then {_rcywnpydffjrtqfntlwqhfjfakthbeefryccaopptsnciebzgeqkoawchctsrexxn = _rcywnpydffjrtqfntlwqhfjfakthbeefryccaopptsnciebzgeqkoawchctsrexxn * 1.30};  while {true} do { 	if(animationState player != "AinvPknlMstpSnonWnonDnon_medic_1") then { 		[[player,"AinvPknlMstpSnonWnonDnon_medic_1",true],"life_fnc_gbrisqbkirkdomhkildcgyttqicsflitrnbqgpixyslsyszkor",true,false] call life_fnc_MP; 		player switchMove "AinvPknlMstpSnonWnonDnon_medic_1"; 		player playMoveNow "AinvPknlMstpSnonWnonDnon_medic_1"; 	}; 	sleep 0.26; 	if(isNull _ui) then { 		5 cutRsc ["life_progress","PLAIN"]; 		_ui = uiNamespace getVariable "life_progress"; 		_xskfugqvzdhxqkpbubjsiongrllabmnzagjbibnjkcinfsupkxdwdlbzbjuksexfyqu = _ui displayCtrl 38201; 		_jehmksskdlbgpxqeeslvduioxaevryrpvtyyputfabqrohmoynamyjgmyqsvText = _ui displayCtrl 38202; 	}; 	_tfhdadfjwoxnfjhsbjgjdlukitlhzhqiugsoggigyadzxtqvqfaopyqhapqpletunksnh = _tfhdadfjwoxnfjhsbjgjdlukitlhzhqiugsoggigyadzxtqvqfaopyqhapqpletunksnh + _rcywnpydffjrtqfntlwqhfjfakthbeefryccaopptsnciebzgeqkoawchctsrexxn; 	_xskfugqvzdhxqkpbubjsiongrllabmnzagjbibnjkcinfsupkxdwdlbzbjuksexfyqu progressSetPosition _tfhdadfjwoxnfjhsbjgjdlukitlhzhqiugsoggigyadzxtqvqfaopyqhapqpletunksnh; 	_jehmksskdlbgpxqeeslvduioxaevryrpvtyyputfabqrohmoynamyjgmyqsvText ctrlSetText format["%3 (%1%2)...",round(_tfhdadfjwoxnfjhsbjgjdlukitlhzhqiugsoggigyadzxtqvqfaopyqhapqpletunksnh * 100),"%",_jehmksskdlbgpxqeeslvduioxaevryrpvtyyputfabqrohmoynamyjgmyqsv]; 	if(_tfhdadfjwoxnfjhsbjgjdlukitlhzhqiugsoggigyadzxtqvqfaopyqhapqpletunksnh >= 1 OR !alive player) exitWith {}; 	if(life_istazed) exitWith {};  	if(life_interrupted) exitWith {}; 	if((player getVariable["restrained",false])) exitWith {}; 	if((player getVariable["adminRestrained",false])) exitWith {}; 	if(player distance _mtxjcbfotkxdiheyoojfknjjxboioxczmvflbpjrgqkkggucxnvopxoxmjmcftgrhs > _dkxugkfjmxukbsafsbuhhgeezqvnatpcnucsdmyqlqzsegckrzrolkbjwtewemblqyt) exitWith {_aryubuyuicwngimsvrblucsvtjrbzjmwhpnjrtqqoztffajrlldpwoqizuwmjrsjn = true;}; 	 	if(_xuhmsrmvyanoewptatjdiictkdhdtzswfvnzecunjjofndicdchmtxljmqbm && perk_21 < 12) then { 		_action = "lightOff"; 		if(_lightStatus) then {_lightStatus = false; _action = "lightOn";} else {_lightStatus = true;}; 		player action[_action,_mtxjcbfotkxdiheyoojfknjjxboioxczmvflbpjrgqkkggucxnvopxoxmjmcftgrhs]; 		[[_mtxjcbfotkxdiheyoojfknjjxboioxczmvflbpjrgqkkggucxnvopxoxmjmcftgrhs,"lockpick",if(perk_21 >= 9) then {75} else {150}],"life_fnc_trhseodhngmgvxncyytnwswxjnpawhscwsjplsavkvanngibxeptqc",true,false] spawn life_fnc_MP; 	}; };  _action = "lightOff"; if(_beforeStatus) then {_action = "lightOn";}; player action[_action,_mtxjcbfotkxdiheyoojfknjjxboioxczmvflbpjrgqkkggucxnvopxoxmjmcftgrhs];   5 cutText ["","PLAIN"]; player playActionNow "stop"; if(!alive player OR life_istazed) exitWith {life_action_inUse = false;}; if((player getVariable["restrained",false])) exitWith {life_action_inUse = false;}; if(!isNil "_aryubuyuicwngimsvrblucsvtjrbzjmwhpnjrtqqoztffajrlldpwoqizuwmjrsjn") exitWith {titleText[localize "STR_ISTR_Lock_TooFar","PLAIN"]; life_action_inUse = false;}; if(life_interrupted) exitWith {life_interrupted = false; titleText[localize "STR_NOTF_ActionCancel","PLAIN"]; life_action_inUse = false;}; if(!([false,"lockpick",1] call life_fnc_obfjrnynfhghcglhujcjbgakxemxpjvrqczgxoeickhzvgovmtdbvr)) exitWith {life_action_inUse = false;}; if(perk_21 >= 6 && random(100) < 60) then {[true,"lockpick",1] call life_fnc_obfjrnynfhghcglhujcjbgakxemxpjvrqczgxoeickhzvgovmtdbvr;};  life_action_inUse = false;  if(!_xuhmsrmvyanoewptatjdiictkdhdtzswfvnzecunjjofndicdchmtxljmqbm) then { 	_mtxjcbfotkxdiheyoojfknjjxboioxczmvflbpjrgqkkggucxnvopxoxmjmcftgrhs setVariable["restrained",false,true]; 	_mtxjcbfotkxdiheyoojfknjjxboioxczmvflbpjrgqkkggucxnvopxoxmjmcftgrhs setVariable["Escorting",false,true]; 	_mtxjcbfotkxdiheyoojfknjjxboioxczmvflbpjrgqkkggucxnvopxoxmjmcftgrhs setVariable["transporting",false,true]; } else { 	_oczcoxdvsswjcsfrrhwuhfrlmrcpvdrrciujrkeesxlorglksliogphohnfkrqjimkf = random(100); 	if(_oczcoxdvsswjcsfrrhwuhfrlmrcpvdrrciujrkeesxlorglksliogphohnfkrqjimkf < 30) then { 		titleText[localize "STR_ISTR_Lock_Success","PLAIN"]; 		_mtxjcbfotkxdiheyoojfknjjxboioxczmvflbpjrgqkkggucxnvopxoxmjmcftgrhs setVariable ["lockpicked",true,true]; 		life_vehicles pushBack _mtxjcbfotkxdiheyoojfknjjxboioxczmvflbpjrgqkkggucxnvopxoxmjmcftgrhs; 		[getPlayerUID player,profileName,"487",player] spawn life_fnc_emtvegxsjbicbxdyyizalaeqhulvbokspdnvrxanbasgedbaphvjbq; 	} else { 		[getPlayerUID player,profileName,"215",player] spawn life_fnc_emtvegxsjbicbxdyyizalaeqhulvbokspdnvrxanbasgedbaphvjbq; 		 		titleText[localize "STR_ISTR_Lock_Failed","PLAIN"]; 	}; 	 	 	_mtxjcbfotkxdiheyoojfknjjxboioxczmvflbpjrgqkkggucxnvopxoxmjmcftgrhs spawn { 		if(perk_21 >= 12) exitWith {}; 		_beforeStatus = isLightOn _this;  		for "_i" from 0 to 20 do { 			[[_this,"lockpick",150],"life_fnc_trhseodhngmgvxncyytnwswxjnpawhscwsjplsavkvanngibxeptqc",true,false] spawn life_fnc_MP; 			sleep 0.565; 			_action = "lightOff"; 			if(_i % 2 == 0) then {_action = "lightOn";}; 			player action[_action,_this]; 		};  		_action = "lightOff"; 		if(_beforeStatus) then {_action = "lightOn";}; 		player action[_action,_this]; 	}; }; 