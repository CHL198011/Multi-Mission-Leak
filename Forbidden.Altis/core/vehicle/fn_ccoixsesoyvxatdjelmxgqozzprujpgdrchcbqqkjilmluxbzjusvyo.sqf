
#include <macro.h>

#define ctrlSelData(ctrl) (lbData[##ctrl,(lbCurSel ##ctrl)])
 private["_kokqtpzpqfmhewlyfgcgvlhuqsjywyjytnthjgvtrvdtnjoddpkgvmknwbtktsvtczz","_eozwdffcpskhdkrebckmxgvfqbjgwamgtplsmsrxwrnoomitlouxaklfcwrw","_index","_myqvaghffswavjcjurbyndpzfhsnlldaiccrqzghusfktzypsatzrqvyhmulmyhdt","_pujybzcgmrglzfclykejalzxvtulddvlcxulcrzfkfxrrtyhkkkbzxafbtsqlka","_dblvegzvjzjgmdopufcxmnkoqkwpvkcuxkngmimnqxcqcgiidizdvdwrbpjtbknashbq","_emxmyjmwrnbxslhxrnduvgkbwepklmzucgyvsdnfklxxgmkkhpptassdtmacaledomelv","_maciiyhknstnsxiamyrzaiwhuprqeowsihfsexxgfjflgfykdfbwvdbwqgyvikosxyho","_kzhtzrzrjzayygvowpcqnkalmmwxeujcwzugkbeprfwhytjmyzlsljoxaezskfebb"]; disableSerialization; if(isNull life_trunk_vehicle OR !alive life_trunk_vehicle) exitWith {hint localize "STR_MISC_VehDoesntExist"}; if(!alive player) exitwith {closeDialog 0;}; if((lbCurSel 3502) == -1) exitWith {hint localize "STR_Global_NoSelection";}; _kokqtpzpqfmhewlyfgcgvlhuqsjywyjytnthjgvtrvdtnjoddpkgvmknwbtktsvtczz = ctrlSelData(3502); _eozwdffcpskhdkrebckmxgvfqbjgwamgtplsmsrxwrnoomitlouxaklfcwrw = ctrlText 3505; if(!([_eozwdffcpskhdkrebckmxgvfqbjgwamgtplsmsrxwrnoomitlouxaklfcwrw] call TON_fnc_isnumber)) exitWith {hint localize "STR_MISC_WrongNumFormat";}; _eozwdffcpskhdkrebckmxgvfqbjgwamgtplsmsrxwrnoomitlouxaklfcwrw = parseNumber(_eozwdffcpskhdkrebckmxgvfqbjgwamgtplsmsrxwrnoomitlouxaklfcwrw); if(_eozwdffcpskhdkrebckmxgvfqbjgwamgtplsmsrxwrnoomitlouxaklfcwrw < 1) exitWith {hint localize "STR_MISC_Under1";};  if([life_trunk_vehicle,_kokqtpzpqfmhewlyfgcgvlhuqsjywyjytnthjgvtrvdtnjoddpkgvmknwbtktsvtczz,true] call life_fnc_dmpcknnwasxueqonkodesvuillsrownlotusizdlwugirpflatrag) exitWith {closeDialog 0;};  _index = [_kokqtpzpqfmhewlyfgcgvlhuqsjywyjytnthjgvtrvdtnjoddpkgvmknwbtktsvtczz,((life_trunk_vehicle getVariable "Trunk") select 0)] call TON_fnc_index; _myqvaghffswavjcjurbyndpzfhsnlldaiccrqzghusfktzypsatzrqvyhmulmyhdt = (life_trunk_vehicle getVariable "Trunk") select 0; _pujybzcgmrglzfclykejalzxvtulddvlcxulcrzfkfxrrtyhkkkbzxafbtsqlka = life_trunk_vehicle getVariable "Trunk"; if(_index == -1) exitWith {}; _dblvegzvjzjgmdopufcxmnkoqkwpvkcuxkngmimnqxcqcgiidizdvdwrbpjtbknashbq = _myqvaghffswavjcjurbyndpzfhsnlldaiccrqzghusfktzypsatzrqvyhmulmyhdt select _index select 1; if(_eozwdffcpskhdkrebckmxgvfqbjgwamgtplsmsrxwrnoomitlouxaklfcwrw > _dblvegzvjzjgmdopufcxmnkoqkwpvkcuxkngmimnqxcqcgiidizdvdwrbpjtbknashbq) exitWith {hint localize "STR_MISC_NotEnough"}; _eozwdffcpskhdkrebckmxgvfqbjgwamgtplsmsrxwrnoomitlouxaklfcwrw = [_kokqtpzpqfmhewlyfgcgvlhuqsjywyjytnthjgvtrvdtnjoddpkgvmknwbtktsvtczz,_eozwdffcpskhdkrebckmxgvfqbjgwamgtplsmsrxwrnoomitlouxaklfcwrw,life_carryWeight,life_maxWeight] call life_fnc_wvdznvaqxsfdfvikfnyhkpoigxucyfqjhqtuchxgawxyvlxhru; if(_eozwdffcpskhdkrebckmxgvfqbjgwamgtplsmsrxwrnoomitlouxaklfcwrw == 0) exitWith {hint localize "STR_NOTF_InvFull"}; _emxmyjmwrnbxslhxrnduvgkbwepklmzucgyvsdnfklxxgmkkhpptassdtmacaledomelv = ([_kokqtpzpqfmhewlyfgcgvlhuqsjywyjytnthjgvtrvdtnjoddpkgvmknwbtktsvtczz] call life_fnc_ixqubeuqyvvlxqyldjgxzumawmrijapytyxfcsaswdetlfqsdciynug) * _eozwdffcpskhdkrebckmxgvfqbjgwamgtplsmsrxwrnoomitlouxaklfcwrw; if(_kokqtpzpqfmhewlyfgcgvlhuqsjywyjytnthjgvtrvdtnjoddpkgvmknwbtktsvtczz == "money") then { 	if(_eozwdffcpskhdkrebckmxgvfqbjgwamgtplsmsrxwrnoomitlouxaklfcwrw == _dblvegzvjzjgmdopufcxmnkoqkwpvkcuxkngmimnqxcqcgiidizdvdwrbpjtbknashbq) then 	{ 		_myqvaghffswavjcjurbyndpzfhsnlldaiccrqzghusfktzypsatzrqvyhmulmyhdt set[_index,-1]; 		_myqvaghffswavjcjurbyndpzfhsnlldaiccrqzghusfktzypsatzrqvyhmulmyhdt = _myqvaghffswavjcjurbyndpzfhsnlldaiccrqzghusfktzypsatzrqvyhmulmyhdt - [-1]; 	} 		else 	{ 		_myqvaghffswavjcjurbyndpzfhsnlldaiccrqzghusfktzypsatzrqvyhmulmyhdt set[_index,[_kokqtpzpqfmhewlyfgcgvlhuqsjywyjytnthjgvtrvdtnjoddpkgvmknwbtktsvtczz,(_dblvegzvjzjgmdopufcxmnkoqkwpvkcuxkngmimnqxcqcgiidizdvdwrbpjtbknashbq - _eozwdffcpskhdkrebckmxgvfqbjgwamgtplsmsrxwrnoomitlouxaklfcwrw)]]; 	}; 	 	CASH = CASH + _eozwdffcpskhdkrebckmxgvfqbjgwamgtplsmsrxwrnoomitlouxaklfcwrw; 	life_trunk_vehicle setVariable["Trunk",[_myqvaghffswavjcjurbyndpzfhsnlldaiccrqzghusfktzypsatzrqvyhmulmyhdt,(_pujybzcgmrglzfclykejalzxvtulddvlcxulcrzfkfxrrtyhkkkbzxafbtsqlka select 1) - _emxmyjmwrnbxslhxrnduvgkbwepklmzucgyvsdnfklxxgmkkhpptassdtmacaledomelv],true]; 	[life_trunk_vehicle] call life_fnc_wcvkmqfrkivnvtvuxgjcruscfabaxpsappuiqnbqmzbrrvrlwrsawkmwlt; } 	else { 	if([true,_kokqtpzpqfmhewlyfgcgvlhuqsjywyjytnthjgvtrvdtnjoddpkgvmknwbtktsvtczz,_eozwdffcpskhdkrebckmxgvfqbjgwamgtplsmsrxwrnoomitlouxaklfcwrw] call life_fnc_obfjrnynfhghcglhujcjbgakxemxpjvrqczgxoeickhzvgovmtdbvr) then 	{ 		if(_eozwdffcpskhdkrebckmxgvfqbjgwamgtplsmsrxwrnoomitlouxaklfcwrw == _dblvegzvjzjgmdopufcxmnkoqkwpvkcuxkngmimnqxcqcgiidizdvdwrbpjtbknashbq) then 		{ 			_myqvaghffswavjcjurbyndpzfhsnlldaiccrqzghusfktzypsatzrqvyhmulmyhdt set[_index,-1]; 			_myqvaghffswavjcjurbyndpzfhsnlldaiccrqzghusfktzypsatzrqvyhmulmyhdt = _myqvaghffswavjcjurbyndpzfhsnlldaiccrqzghusfktzypsatzrqvyhmulmyhdt - [-1]; 		} 			else 		{ 			_myqvaghffswavjcjurbyndpzfhsnlldaiccrqzghusfktzypsatzrqvyhmulmyhdt set[_index,[_kokqtpzpqfmhewlyfgcgvlhuqsjywyjytnthjgvtrvdtnjoddpkgvmknwbtktsvtczz,(_dblvegzvjzjgmdopufcxmnkoqkwpvkcuxkngmimnqxcqcgiidizdvdwrbpjtbknashbq - _eozwdffcpskhdkrebckmxgvfqbjgwamgtplsmsrxwrnoomitlouxaklfcwrw)]]; 		}; 		life_trunk_vehicle setVariable["Trunk",[_myqvaghffswavjcjurbyndpzfhsnlldaiccrqzghusfktzypsatzrqvyhmulmyhdt,(_pujybzcgmrglzfclykejalzxvtulddvlcxulcrzfkfxrrtyhkkkbzxafbtsqlka select 1) - _emxmyjmwrnbxslhxrnduvgkbwepklmzucgyvsdnfklxxgmkkhpptassdtmacaledomelv],true]; 		[life_trunk_vehicle] call life_fnc_wcvkmqfrkivnvtvuxgjcruscfabaxpsappuiqnbqmzbrrvrlwrsawkmwlt; 		 		 		switch (true) do { 			case ((life_trunk_vehicle isKindOf "House_F") && !(life_trunk_vehicle in life_vehicles) && count (life_trunk_vehicle getVariable ["house_owner",[]]) > 0): { 				[2,localize (ITEM_NAME(_kokqtpzpqfmhewlyfgcgvlhuqsjywyjytnthjgvtrvdtnjoddpkgvmknwbtktsvtczz)),(getPlayerUID player),true,(life_trunk_vehicle getVariable ["house_owner",[]]),(getPosATL life_trunk_vehicle),_eozwdffcpskhdkrebckmxgvfqbjgwamgtplsmsrxwrnoomitlouxaklfcwrw] remoteExec ["TON_fnc_biccwmelxtllyqsrgknditylbnatpufhkgtqkjtdchpuczoxztizsmr",2]; 			}; 			 			case ((life_trunk_vehicle isKindOf "House_F") && count (life_trunk_vehicle getVariable ["house_owner",[]]) > 0): { 				[3,localize (ITEM_NAME(_kokqtpzpqfmhewlyfgcgvlhuqsjywyjytnthjgvtrvdtnjoddpkgvmknwbtktsvtczz)),(getPlayerUID player),true,(life_trunk_vehicle getVariable ["house_owner",[]]),(getPosATL life_trunk_vehicle),_eozwdffcpskhdkrebckmxgvfqbjgwamgtplsmsrxwrnoomitlouxaklfcwrw] remoteExec ["TON_fnc_biccwmelxtllyqsrgknditylbnatpufhkgtqkjtdchpuczoxztizsmr",2]; 			}; 			 			case (life_trunk_vehicle isKindOf "Air" OR life_trunk_vehicle isKindOf "Car" OR life_trunk_vehicle isKindOf "Ship"): { 				[0,localize (ITEM_NAME(_kokqtpzpqfmhewlyfgcgvlhuqsjywyjytnthjgvtrvdtnjoddpkgvmknwbtktsvtczz)),(getPlayerUID player),true,life_trunk_vehicle getVariable ["vid",-1],[],_eozwdffcpskhdkrebckmxgvfqbjgwamgtplsmsrxwrnoomitlouxaklfcwrw] remoteExec ["TON_fnc_biccwmelxtllyqsrgknditylbnatpufhkgtqkjtdchpuczoxztizsmr",2]; 			}; 			 			case (life_trunk_vehicle getVariable ["customSpawnedBox",false]): { 				[6,localize (ITEM_NAME(_kokqtpzpqfmhewlyfgcgvlhuqsjywyjytnthjgvtrvdtnjoddpkgvmknwbtktsvtczz)),(getPlayerUID player),true,if!(isNil {life_trunk_vehicle getVariable "islandBox_looted"}) then {1} else {[]},[],_eozwdffcpskhdkrebckmxgvfqbjgwamgtplsmsrxwrnoomitlouxaklfcwrw] remoteExec ["TON_fnc_biccwmelxtllyqsrgknditylbnatpufhkgtqkjtdchpuczoxztizsmr",2]; 			}; 			 			default { 				[1,localize (ITEM_NAME(_kokqtpzpqfmhewlyfgcgvlhuqsjywyjytnthjgvtrvdtnjoddpkgvmknwbtktsvtczz)),(getPlayerUID player),true,[],[],_eozwdffcpskhdkrebckmxgvfqbjgwamgtplsmsrxwrnoomitlouxaklfcwrw] remoteExec ["TON_fnc_biccwmelxtllyqsrgknditylbnatpufhkgtqkjtdchpuczoxztizsmr",2]; 			}; 		}; 		 		if(invOpenedFarAway) then {			 			[6,(getPlayerUID player),"","Inv abuse",format["%4 x %1: (%2) is %3 meters away",localize (ITEM_NAME(_kokqtpzpqfmhewlyfgcgvlhuqsjywyjytnthjgvtrvdtnjoddpkgvmknwbtktsvtczz)),if!(isNil {life_trunk_vehicle getVariable "islandBox_looted"}) then {"Legosoldatladan"} else {str life_trunk_vehicle},round (life_trunk_vehicle distance player),_eozwdffcpskhdkrebckmxgvfqbjgwamgtplsmsrxwrnoomitlouxaklfcwrw],profileName,"",str (getPos player)] remoteExec ["TON_fnc_cqbslmzhelexdchvshruhtirwniyhyywbybxhiltsdxdujmnhjuhnal",2]; 		}; 	} 		else 	{ 		hint localize "STR_NOTF_InvFull"; 	}; }; 