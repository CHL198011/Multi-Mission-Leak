
#include <macro.h>
 private["_house","_ilvgkxlcgdfwxfttuzdrxaebejwydwbcydqrjnbgjkcgygmfwkrpkvawfrjgu","_ffrrjfodybpzrrssxvpxuvgnyrxppyjnlmzhqxjdjnqlnvycrukoknvxfoyztscl","_vhaybkyfdskowemlssqifcqfjyingxfckpjoyuupyalhchlymryjmknqvpkgze","_dmkrmdgpwgdpggxyueeytrpffkoaekpuyaoyelwdizvrfuwmcensrrwhrjkc","_dmkrmdgpwgdpggxyueeytrpffkoaekpuyaoyelwdizvrfuwmcensrrwhrjkcText","_ui","_rsssfhctesxjstxhwiyhfwofkglfvhwcikeadgocgbkaoqvixiovrchhztmawr","_rsssfhctesxjstxhwiyhfwofkglfvhwcikeadgocgbkaoqvixiovrchhztmawrData","_rsssfhctesxjstxhwiyhfwofkglfvhwcikeadgocgbkaoqvixiovrchhztmawrVal"]; _house = [_this,0,ObjNull,[ObjNull]] call BIS_fnc_param; if(isNull _house OR !(_house isKindOf "House_F")) exitWith {}; if(isNil {(_house GVAR "house_owner")}) exitWith {hint localize "STR_House_Raid_NoOwner"};  _ilvgkxlcgdfwxfttuzdrxaebejwydwbcydqrjnbgjkcgygmfwkrpkvawfrjgu = SEL((_house GVAR "house_owner"),0); if(!([_ilvgkxlcgdfwxfttuzdrxaebejwydwbcydqrjnbgjkcgygmfwkrpkvawfrjgu] call life_fnc_vnndfuwrvksurjesevqgzoozxmoimrreiofsswlylxxbopletubpkqrxfzw)) exitWith {hint localize "STR_House_Raid_OwnerOff"}; _rsssfhctesxjstxhwiyhfwofkglfvhwcikeadgocgbkaoqvixiovrchhztmawr = _house GVAR ["Trunk",[[],0]]; if(_rsssfhctesxjstxhwiyhfwofkglfvhwcikeadgocgbkaoqvixiovrchhztmawr isEqualTo [[],0]) exitWith {hint localize "STR_House_Raid_Nothing"}; life_action_inUse = true;   disableSerialization; _dmkrmdgpwgdpggxyueeytrpffkoaekpuyaoyelwdizvrfuwmcensrrwhrjkc = localize "STR_House_Raid_Searching"; 5 cutRsc ["life_progress","PLAIN"]; _ui = GVAR_UINS "life_progress"; _progressBar = _ui displayCtrl 38201; _dmkrmdgpwgdpggxyueeytrpffkoaekpuyaoyelwdizvrfuwmcensrrwhrjkcText = _ui displayCtrl 38202; _dmkrmdgpwgdpggxyueeytrpffkoaekpuyaoyelwdizvrfuwmcensrrwhrjkcText ctrlSetText format["%2 (1%1)...","%",_dmkrmdgpwgdpggxyueeytrpffkoaekpuyaoyelwdizvrfuwmcensrrwhrjkc]; _progressBar progressSetPosition 0.01; _vhaybkyfdskowemlssqifcqfjyingxfckpjoyuupyalhchlymryjmknqvpkgze = 0.01; _ffrrjfodybpzrrssxvpxuvgnyrxppyjnlmzhqxjdjnqlnvycrukoknvxfoyztscl = 0.0075;  while {true} do { 	sleep 0.26; 	if(isNull _ui) then { 		5 cutRsc ["life_progress","PLAIN"]; 		_ui = GVAR_UINS "life_progress"; 	}; 	_vhaybkyfdskowemlssqifcqfjyingxfckpjoyuupyalhchlymryjmknqvpkgze = _vhaybkyfdskowemlssqifcqfjyingxfckpjoyuupyalhchlymryjmknqvpkgze + _ffrrjfodybpzrrssxvpxuvgnyrxppyjnlmzhqxjdjnqlnvycrukoknvxfoyztscl; 	_progressBar progressSetPosition _vhaybkyfdskowemlssqifcqfjyingxfckpjoyuupyalhchlymryjmknqvpkgze; 	_dmkrmdgpwgdpggxyueeytrpffkoaekpuyaoyelwdizvrfuwmcensrrwhrjkcText ctrlSetText format["%3 (%1%2)...",round(_vhaybkyfdskowemlssqifcqfjyingxfckpjoyuupyalhchlymryjmknqvpkgze * 100),"%",_dmkrmdgpwgdpggxyueeytrpffkoaekpuyaoyelwdizvrfuwmcensrrwhrjkc]; 	if(_vhaybkyfdskowemlssqifcqfjyingxfckpjoyuupyalhchlymryjmknqvpkgze >= 1 OR !alive player) exitWith {}; 	if(player distance _house > 13) exitWith {}; };   5 cutText ["","PLAIN"]; if(player distance _house > 13) exitWith {life_action_inUse = false; titleText[localize "STR_House_Raid_TooFar","PLAIN"]}; if(!alive player) exitWith {life_action_inUse = false;}; life_action_inUse = false;  _rsssfhctesxjstxhwiyhfwofkglfvhwcikeadgocgbkaoqvixiovrchhztmawrData = SEL(_rsssfhctesxjstxhwiyhfwofkglfvhwcikeadgocgbkaoqvixiovrchhztmawr,0); _rsssfhctesxjstxhwiyhfwofkglfvhwcikeadgocgbkaoqvixiovrchhztmawrVal = SEL(_rsssfhctesxjstxhwiyhfwofkglfvhwcikeadgocgbkaoqvixiovrchhztmawr,1); _value = 0; { 	_var = SEL(_x,0); 	_val = SEL(_x,1); 	 	if(EQUAL(ITEM_ILLEGAL(_var),1)) then { 		if(!(EQUAL(ITEM_SELLPRICE(_var),-1))) then { 			_rsssfhctesxjstxhwiyhfwofkglfvhwcikeadgocgbkaoqvixiovrchhztmawrData set[_forEachIndex,-1]; 			SUB(_rsssfhctesxjstxhwiyhfwofkglfvhwcikeadgocgbkaoqvixiovrchhztmawrData,[-1]); 			SUB(_rsssfhctesxjstxhwiyhfwofkglfvhwcikeadgocgbkaoqvixiovrchhztmawrVal,(([_var] call life_fnc_ixqubeuqyvvlxqyldjgxzumawmrijapytyxfcsaswdetlfqsdciynug) * _val)); 			ADD(_value,(_val * ITEM_SELLPRICE(_var))); 		}; 	}; } foreach (SEL(_rsssfhctesxjstxhwiyhfwofkglfvhwcikeadgocgbkaoqvixiovrchhztmawr,0));  if(_value > 0) then { 	[[0,"STR_House_Raid_Successful",true,[[_value] call life_fnc_ccxpkhrsgzfibqpgmuxgqovtqnwczbibnrrxqvyckzrmhckzyugqq]],"life_fnc_broadcast",true,false] call life_fnc_MP; 	ADD(BANK,round(_value / 2)); 	_house SVAR ["Trunk",[_rsssfhctesxjstxhwiyhfwofkglfvhwcikeadgocgbkaoqvixiovrchhztmawrData,_rsssfhctesxjstxhwiyhfwofkglfvhwcikeadgocgbkaoqvixiovrchhztmawrVal],true]; 	[[_house],"TON_fnc_vgixugfuhwdrbudkhagtzhfxcphnfduettoqiqyyszvpvfcyfeolsswwa",false,false] call life_fnc_MP; } else { 	hint localize "STR_House_Raid_NoIllegal"; }; 