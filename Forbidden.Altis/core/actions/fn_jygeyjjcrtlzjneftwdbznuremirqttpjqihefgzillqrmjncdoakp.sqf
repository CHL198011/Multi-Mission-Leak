
#include <macro.h>
 private["_vehicle","_jzfimfhlfjrpksisgzyalwwmhuwhkankejylbchbxprenfyweayfpylpyadn","_jbbwbsawuowlnzljbwumnsqmekbotevwghqaoqkgrcufcaosbstvfcutcvecqiojgip","_dsdvnsubejthhviqvixqxbixukuuozmzgbbqvawbkdwsskpdibxglxgvdyhj","_qfyzdxlaowzldjtdfjcklbwgksrcdnetgomsevkpugsfzqgpebvavshhnloy","_rvranvaurvaqtetxmtizqzzbfgbzifozeayncoptqrkmfplpwajhtxfdpecakbhgkfhhb","_ui","_progress","_ojbsqqpngdufxkxegaklxvkvlcnxfnbofdtceqfmstpzowggxdqhmggbmfjirabalulepy","_bonkdeihlircdcezqjaueinwkajcjyzkyevaeghyrihrhoympiyrddkbqdpdniwhmq","_rrmnluncyadwcvrryhozkhfeqizsvpbyxjoyoblnyrsghifpjivmiujsvgketeyirujwjh"]; _vehicle = [_this,0,ObjNull,[ObjNull]] call BIS_fnc_param; _rrmnluncyadwcvrryhozkhfeqizsvpbyxjoyoblnyrsghifpjivmiujsvgketeyirujwjh = ["Car","Air","Ship"]; if(!((KINDOF_ARRAY(_vehicle,_rrmnluncyadwcvrryhozkhfeqizsvpbyxjoyoblnyrsghifpjivmiujsvgketeyirujwjh)))) exitWith {}; if(player distance cursorTarget > 10) exitWith {};  _qfyzdxlaowzldjtdfjcklbwgksrcdnetgomsevkpugsfzqgpebvavshhnloy = _vehicle GVAR ["vehicle_info_owners",[]];  if(count _qfyzdxlaowzldjtdfjcklbwgksrcdnetgomsevkpugsfzqgpebvavshhnloy == 0) exitWith {deleteVehicle _vehicle};  if(!alive _vehicle) exitWith {}; _vehicleName = FETCH_CONFIG2(getText,CONFIG_VEHICLES,(typeOf _vehicle),"displayName"); [[0,"STR_NOTF_BeingImpounded",true,[SEL(SEL(_qfyzdxlaowzldjtdfjcklbwgksrcdnetgomsevkpugsfzqgpebvavshhnloy,0),1),_vehicleName]],"life_fnc_broadcast",true,false] call life_fnc_MP; if(life_action_inUse) exitWith {hint "Action already in use!";}; life_action_inUse = true;  _rvranvaurvaqtetxmtizqzzbfgbzifozeayncoptqrkmfplpwajhtxfdpecakbhgkfhhb = localize "STR_NOTF_Impounding";  disableSerialization; 5 cutRsc ["life_progress","PLAIN"]; _ui = GVAR_UINS "life_progress"; _progress = _ui displayCtrl 38201; _ojbsqqpngdufxkxegaklxvkvlcnxfnbofdtceqfmstpzowggxdqhmggbmfjirabalulepy = _ui displayCtrl 38202; _ojbsqqpngdufxkxegaklxvkvlcnxfnbofdtceqfmstpzowggxdqhmggbmfjirabalulepy ctrlSetText format["%2 (1%1)...","%",_rvranvaurvaqtetxmtizqzzbfgbzifozeayncoptqrkmfplpwajhtxfdpecakbhgkfhhb]; _progress progressSetPosition 0.01; _bonkdeihlircdcezqjaueinwkajcjyzkyevaeghyrihrhoympiyrddkbqdpdniwhmq = 0.01; 	 while{true} do { 	sleep 0.09; 	_bonkdeihlircdcezqjaueinwkajcjyzkyevaeghyrihrhoympiyrddkbqdpdniwhmq = _bonkdeihlircdcezqjaueinwkajcjyzkyevaeghyrihrhoympiyrddkbqdpdniwhmq + 0.01; 	_progress progressSetPosition _bonkdeihlircdcezqjaueinwkajcjyzkyevaeghyrihrhoympiyrddkbqdpdniwhmq; 	_ojbsqqpngdufxkxegaklxvkvlcnxfnbofdtceqfmstpzowggxdqhmggbmfjirabalulepy ctrlSetText format["%3 (%1%2)...",round(_bonkdeihlircdcezqjaueinwkajcjyzkyevaeghyrihrhoympiyrddkbqdpdniwhmq * 100),"%",_rvranvaurvaqtetxmtizqzzbfgbzifozeayncoptqrkmfplpwajhtxfdpecakbhgkfhhb]; 	if(_bonkdeihlircdcezqjaueinwkajcjyzkyevaeghyrihrhoympiyrddkbqdpdniwhmq >= 1) exitWith {}; 	if(player distance _vehicle > 10) exitWith {}; 	if(!alive player) exitWith {}; 	if(!alive _vehicle) exitWith {}; };  5 cutText ["","PLAIN"]; 	 if(player distance _vehicle > 10) exitWith {hint localize "STR_NOTF_ImpoundingCancelled"; life_action_inUse = false;}; if(!alive player OR !(alive _vehicle)) exitWith {life_action_inUse = false;};  if(EQUAL(count crew _vehicle,0)) then { 	if(!(KINDOF_ARRAY(_vehicle,_rrmnluncyadwcvrryhozkhfeqizsvpbyxjoyoblnyrsghifpjivmiujsvgketeyirujwjh))) exitWith {life_action_inUse = false;}; 	_jzfimfhlfjrpksisgzyalwwmhuwhkankejylbchbxprenfyweayfpylpyadn = FETCH_CONFIG2(getText,CONFIG_VEHICLES,(typeOf _vehicle),"displayName"); 	switch (true) do { 		case (_vehicle isKindOf "Car"): {_dsdvnsubejthhviqvixqxbixukuuozmzgbbqvawbkdwsskpdibxglxgvdyhj = LIFE_SETTINGS(getNumber,"impound_car");}; 		case (_vehicle isKindOf "Ship"): {_dsdvnsubejthhviqvixqxbixukuuozmzgbbqvawbkdwsskpdibxglxgvdyhj = LIFE_SETTINGS(getNumber,"impound_boat");}; 		case (_vehicle isKindOf "Air"): {_dsdvnsubejthhviqvixqxbixukuuozmzgbbqvawbkdwsskpdibxglxgvdyhj = LIFE_SETTINGS(getNumber,"impound_air");}; 	}; 	 	life_impound_inuse = true; 	[[_vehicle,true,player],"TON_fnc_jkqulzhxpwctmccjkceoqunzrmkunafnuytehbygampmvffyppupkygzz",false,false] call life_fnc_MP; 	waitUntil {!life_impound_inuse}; 	hint format[localize "STR_NOTF_Impounded",_jzfimfhlfjrpksisgzyalwwmhuwhkankejylbchbxprenfyweayfpylpyadn,_dsdvnsubejthhviqvixqxbixukuuozmzgbbqvawbkdwsskpdibxglxgvdyhj]; 	[[0,"STR_NOTF_HasImpounded",true,[profileName,SEL(SEL(_qfyzdxlaowzldjtdfjcklbwgksrcdnetgomsevkpugsfzqgpebvavshhnloy,0),1),_vehicleName]],"life_fnc_broadcast",true,false] call life_fnc_MP; 	ADD(BANK,_dsdvnsubejthhviqvixqxbixukuuozmzgbbqvawbkdwsskpdibxglxgvdyhj); } else { 	hint localize "STR_NOTF_ImpoundingCancelled"; };  life_action_inUse = false; 