
#include <macro.h>
 private["_dp","_jebdwmhxlnzawuribmsjthgxwgcrnffqfrikhjmzawssyyqxgnbqdtssdxejw","_kmobokcsfonwmbvuuvaobgtttqpekwgwqmvbernhhtbpquftsgrslpxhzhzjoyc","_hrmsvrykjrrdjneohtxgzjeyneajqqdxafxdmnrlyfthkhhddtpxqitazmkgevncm"];  _jebdwmhxlnzawuribmsjthgxwgcrnffqfrikhjmzawssyyqxgnbqdtssdxejw = [_this,0,ObjNull,[ObjNull]] call BIS_fnc_param;   _hrmsvrykjrrdjneohtxgzjeyneajqqdxafxdmnrlyfthkhhddtpxqitazmkgevncm = [(str _jebdwmhxlnzawuribmsjthgxwgcrnffqfrikhjmzawssyyqxgnbqdtssdxejw),"_",2] call KRON_AddToString;  if(_hrmsvrykjrrdjneohtxgzjeyneajqqdxafxdmnrlyfthkhhddtpxqitazmkgevncm in LIFE_SETTINGS(getArray,"delivery_points")) then { 	private "_point"; 	_point = LIFE_SETTINGS(getArray,"delivery_points"); 	_point deleteAt (_point find _hrmsvrykjrrdjneohtxgzjeyneajqqdxafxdmnrlyfthkhhddtpxqitazmkgevncm); 	_dp = _point call BIS_fnc_selectRandom; } else { 	_dp = LIFE_SETTINGS(getArray,"delivery_points") call BIS_fnc_selectRandom; };  life_dp_start = _jebdwmhxlnzawuribmsjthgxwgcrnffqfrikhjmzawssyyqxgnbqdtssdxejw;  life_delivery_in_progress = true;  _kmobokcsfonwmbvuuvaobgtttqpekwgwqmvbernhhtbpquftsgrslpxhzhzjoyc = [_dp,"_",""] call KRON_Replace; life_dp_point = call compile format["%1",_kmobokcsfonwmbvuuvaobgtttqpekwgwqmvbernhhtbpquftsgrslpxhzhzjoyc];  _dp = [_dp,"_"," "] call KRON_Replace;  life_cur_task = player createSimpleTask [format["Delivery_%1",life_dp_point]]; life_cur_task setSimpleTaskDescription [format[localize "STR_NOTF_DPStart",toUpper _dp],"Delivery Job",""]; life_cur_task setTaskState "Assigned"; player setCurrentTask life_cur_task;  ["DeliveryAssigned",[format[localize "STR_NOTF_DPTask",toUpper  _dp]]] call bis_fnc_showNotification;  if(isNil "life_DPCounter") then {life_DPCounter = 0;}; life_DPCounter = life_DPCounter + 1; _marker = createMarkerLocal [format["DPcircle_%1",life_DPCounter],(getPos life_dp_point)]; _marker setMarkerShapeLocal "ELLIPSE"; _marker setMarkerColorLocal "ColorRed"; _marker setMarkerSizeLocal [500, 500];  _marker spawn { 	while {life_delivery_in_progress && life_isAlive} do { 		_this setMarkerColorLocal "ColorYellow"; 		sleep 0.5; 		_this setMarkerColorLocal "ColorRed"; 		sleep 0.5; 	}; 	 	deleteMarkerLocal _this; 	 	if(!life_isAlive) then { 		life_cur_task setTaskState "Failed"; 		player removeSimpleTask life_cur_task; 		["DeliveryFailed",[localize "STR_NOTF_DPFailed"]] call BIS_fnc_showNotification; 		life_delivery_in_progress = false; 		life_dp_point = nil; 	}; }; 