
#include <macro.h>
 private ["_data","_mphqhdgydhrunqrijgpmyfmnhqtyigybtocuhpytspfgqzemplopxdvsrtlyuapddjyfr","_tnwhsocbpzkezubfnjugeddzoqhgnljqihneyjitwgirtcczbkkjrnusmfetxmpbial","_sideInt","_ooylugdpbmjwjxnstquoxvknagrtzavuofxijejoprctejfmcgtrtzfokuykui","_mxwphbowvgrxbozmtmdjijfzwsajnpsjzvzqqtjimgonejjbpkyihvcxsagyhnrw","_side","_dexzhiovhejuzyzeciyvqjehpjckccdyzmcdkknofhmhucnjjgytluichmfcjcedlbhcmo","_quxgcgklmgnjrfqkriehgfnrdrrvianizvyqchrmamkjzhongqujuyeuwkojniy","_lrjyldcplerhazgzboxawktlfsxozjcvnpsegigjspzxhmgahcmjhsdddkxsomdot","_hrnewurdhvmlmwjieztnrxbkrmhlhpqubyeopedxamnemijpqubttgimicvn","_adpppnefihlccgeatbnuxufhkmijqrkwedezfxzmxszvhgoteikyfuhezicjixzc"]; _data = _this; _side = playerSide;  _tnwhsocbpzkezubfnjugeddzoqhgnljqihneyjitwgirtcczbkkjrnusmfetxmpbial = switch (_side) do {  	case west: {["playerid", "name", "cash", "bankacc", "adminlevel", "donatorlvl", "cop_licenses", "coplevel", "mediclevel", "cop_gear", "time", "misc_perms", "muted", "adminJail", "adminjail_reason", "exp", "perks", "settings", "survey", "perk_resets", "factory_objs", "dlcs", "blacklist", "cop_box", "cop_loadout", "insats_gear"]}; 	case civilian: {["playerid", "name", "cash", "bankacc", "adminlevel", "donatorlvl", "civ_licenses", "coplevel", "mediclevel", "arrested", "civ_gear", "time", "misc_perms", "muted", "adminJail", "adminjail_reason", "exp", "perks", "settings", "survey", "perk_resets", "factory_objs", "dlcs", "reblevel", "reb_gear", "civ_loadout", "TS_cash"]}; 	case independent: {["playerid", "name", "cash", "bankacc", "adminlevel", "donatorlvl", "med_licenses", "coplevel", "mediclevel", "med_gear", "time", "misc_perms", "muted", "adminJail", "adminjail_reason", "exp", "perks", "settings", "survey", "perk_resets", "factory_objs", "dlcs"]}; };  if(typeName (_data select 0) == "STRING") then { 	if(EQUAL((_data select 0),"admin")) then { 		CONST(life_adminOR,1); 		_data = [getPlayerUID player,profileName,"10000","1000000","5","4",[],"0",[],"0",[],"0","0","",0,[],[],"",0,[],0,[],[],"1"]; 		if(playerSide != civilian) exitWith { 			[] spawn { 				while {true} do { 					systemChat "AdminOR funkar endast som civil!!!"; 					sleep 1; 				}; 			}; 		}; 		 	} else { 		CONST(life_adminOR,0); 	}; } else { 	CONST(life_adminOR,0); };  _sideInt = switch (true) do { 	case (playerSide == civilian && !life_rebTag): {0}; 	case (playerSide == civilian && life_rebTag): {1}; 	case (playerSide == west && !life_insatsTag): {2}; 	case (playerSide == west && life_insatsTag): {3}; 	case (playerSide == independent): {4}; };  _quxgcgklmgnjrfqkriehgfnrdrrvianizvyqchrmamkjzhongqujuyeuwkojniy = [] call life_fnc_omevzewsadtgasfqtrkostirgdimheblsjxrkoyscfpzapxnnprtaibpr;  _ooylugdpbmjwjxnstquoxvknagrtzavuofxijejoprctejfmcgtrtzfokuykui = switch (playerSide) do {case civilian: {0}; case west: {1}; case independent: {2};};  _mphqhdgydhrunqrijgpmyfmnhqtyigybtocuhpytspfgqzemplopxdvsrtlyuapddjyfr = { 	private ["_index","_ludycfyhsshsiwdivzxlzbcmlzmswwtkbsdpnajweyynylnocgumdigcmxroin","_wfrlfagrtetkugebtsulndeceolvfthlgzdqfdwjftgbfdeshxzlizbrbwbnueapivsg","_vugvkrhtggecatuulwcmnkskeldgkmopkfqeielynpqwpfrhoqakbmexpkmzwpkgpceq"]; 	_ludycfyhsshsiwdivzxlzbcmlzmswwtkbsdpnajweyynylnocgumdigcmxroin = _this; 	 	_vugvkrhtggecatuulwcmnkskeldgkmopkfqeielynpqwpfrhoqakbmexpkmzwpkgpceq = switch (count _ludycfyhsshsiwdivzxlzbcmlzmswwtkbsdpnajweyynylnocgumdigcmxroin) do { 		case 5: {_ludycfyhsshsiwdivzxlzbcmlzmswwtkbsdpnajweyynylnocgumdigcmxroin select _sideInt}; 		case 3: {_ludycfyhsshsiwdivzxlzbcmlzmswwtkbsdpnajweyynylnocgumdigcmxroin select _ooylugdpbmjwjxnstquoxvknagrtzavuofxijejoprctejfmcgtrtzfokuykui}; 		case 1: {_ludycfyhsshsiwdivzxlzbcmlzmswwtkbsdpnajweyynylnocgumdigcmxroin select 0}; 	}; 	 	_wfrlfagrtetkugebtsulndeceolvfthlgzdqfdwjftgbfdeshxzlizbrbwbnueapivsg = [_vugvkrhtggecatuulwcmnkskeldgkmopkfqeielynpqwpfrhoqakbmexpkmzwpkgpceq,_tnwhsocbpzkezubfnjugeddzoqhgnljqihneyjitwgirtcczbkkjrnusmfetxmpbial] call TON_fnc_index2; 	_wfrlfagrtetkugebtsulndeceolvfthlgzdqfdwjftgbfdeshxzlizbrbwbnueapivsg; };   life_session_tries = life_session_tries + 1; if(life_session_completed) exitWith {};  if(life_session_tries > 3) exitWith {cutText[localize "STR_Session_Error","BLACK FADED"]; 0 cutFadeOut 999999999;};  0 cutText [localize "STR_Session_Received","BLACK FADED"]; 0 cutFadeOut 9999999;   if(isNil "_data") exitWith {[] call SOCK_fnc_mbyynbapcnrefpricccsvwqdlakxizjdfusjwydpjzynfawotanlvbgf;}; if(EQUAL(typeName _data,"STRING")) exitWith {[] call SOCK_fnc_mbyynbapcnrefpricccsvwqdlakxizjdfusjwydpjzynfawotanlvbgf;}; if(EQUAL(count _data,0)) exitWith {[] call SOCK_fnc_mbyynbapcnrefpricccsvwqdlakxizjdfusjwydpjzynfawotanlvbgf;}; if(EQUAL(SEL(_data,0),"Error")) exitWith {[] call SOCK_fnc_mbyynbapcnrefpricccsvwqdlakxizjdfusjwydpjzynfawotanlvbgf;}; if(!(EQUAL(steamid,SEL(_data,0)))) exitWith {[] call SOCK_fnc_safunuegrspezloxgbdmynhtnrdckltnugmpoekebsjnzavciysvq;};   if(!isServer && (!isNil "life_adminlevel" OR !isNil "life_coplevel" OR !isNil "life_donator")) exitWith { 	[[profileName,getPlayerUID player,"VariablesAlreadySet"],"SPY_fnc_cookieJar",false,false] call life_fnc_MP; 	[[profileName,format["Variables set before client initialization...\nlife_adminlevel: %1\nlife_coplevel: %2\nlife_donator: %3",life_adminlevel,life_coplevel,life_donator]],"SPY_fnc_notifyAdmins",true,false] call life_fnc_MP; 	sleep 0.9; 	failMission "SpyGlass"; };     life_customperms = _data select  (["misc_perms"] call _mphqhdgydhrunqrijgpmyfmnhqtyigybtocuhpytspfgqzemplopxdvsrtlyuapddjyfr);  if(1 in life_customperms) then { 	CONST(life_eventplanner,1); } else { 	CONST(life_eventplanner,0); };  if(2 in life_customperms) then { 	CONST(life_fractionmanager,1); } else { 	CONST(life_fractionmanager,0); };  if(55 in life_customperms) then { 	CONST(life_execcommands,1); } else { 	CONST(life_execcommands,0); };  if(70 in life_customperms) then {CONST(life_coprecruiter,1); player setVariable ["life_coprecruiter",true,true];} else {CONST(life_coprecruiter,0)}; if(71 in life_customperms) then {CONST(life_rebrecruiter,1); player setVariable ["life_rebrecruiter",true,true];} else {CONST(life_rebrecruiter,0)}; if(72 in life_customperms) then {CONST(life_medrecruiter,1); player setVariable ["life_medrecruiter",true,true];} else {CONST(life_medrecruiter,0)};  if((20 in life_customperms) OR (21 in life_customperms)) then { 	[(20 in life_customperms),(21 in life_customperms)] spawn life_fnc_wpqiuqlqmislzoqiwjypxavrdhetttauqctvquvcugzodszgawqnkcmxp; };   if(53 in life_customperms) then { 	player setVariable ["theTestVar1",true,true]; };  player setVariable ["daCustomSi",life_customperms,true];  muted_player = parseNumber (_data select (["muted"] call _mphqhdgydhrunqrijgpmyfmnhqtyigybtocuhpytspfgqzemplopxdvsrtlyuapddjyfr)); if(muted_player != 0) then { 	[muted_player,true] spawn life_fnc_muted; };  life_adminJail = parseNumber (_data select (["adminJail"] call _mphqhdgydhrunqrijgpmyfmnhqtyigybtocuhpytspfgqzemplopxdvsrtlyuapddjyfr)); adminJail_reason = _data select (["adminjail_reason"] call _mphqhdgydhrunqrijgpmyfmnhqtyigybtocuhpytspfgqzemplopxdvsrtlyuapddjyfr);   CASH = parseNumber (_data select (["cash"] call _mphqhdgydhrunqrijgpmyfmnhqtyigybtocuhpytspfgqzemplopxdvsrtlyuapddjyfr)); BANK = parseNumber (_data select (["bankacc"] call _mphqhdgydhrunqrijgpmyfmnhqtyigybtocuhpytspfgqzemplopxdvsrtlyuapddjyfr)); CONST(life_adminlevel, (_data select (["adminlevel"] call _mphqhdgydhrunqrijgpmyfmnhqtyigybtocuhpytspfgqzemplopxdvsrtlyuapddjyfr))); CONST(life_donator,0);  life_playedTime = parseNumber (_data select (["time"] call _mphqhdgydhrunqrijgpmyfmnhqtyigybtocuhpytspfgqzemplopxdvsrtlyuapddjyfr)); life_playedTime = (life_playedTime * 3600); player setVariable ["playedTime",life_playedTime,true]; player setVariable ["newPlayer",life_playedTime < (50 * 3600),true];  perks_resetCount = _data select (["perk_resets"] call _mphqhdgydhrunqrijgpmyfmnhqtyigybtocuhpytspfgqzemplopxdvsrtlyuapddjyfr);      leveling_xp = _data select (["exp"] call _mphqhdgydhrunqrijgpmyfmnhqtyigybtocuhpytspfgqzemplopxdvsrtlyuapddjyfr); [] call life_fnc_eyicyojacxwwdumavfrwcdfddzgjlwrvezbzrhabbifmftnndrrugrxj; _mxwphbowvgrxbozmtmdjijfzwsajnpsjzvzqqtjimgonejjbpkyihvcxsagyhnrw = _data select (["perks"] call _mphqhdgydhrunqrijgpmyfmnhqtyigybtocuhpytspfgqzemplopxdvsrtlyuapddjyfr); [0,_mxwphbowvgrxbozmtmdjijfzwsajnpsjzvzqqtjimgonejjbpkyihvcxsagyhnrw] call life_fnc_upibaduthlelhbvayfahnxwiqfgbmmqbfgbrkjooteqziqixwj;  settings_fromServer = _data select (["settings"] call _mphqhdgydhrunqrijgpmyfmnhqtyigybtocuhpytspfgqzemplopxdvsrtlyuapddjyfr);  survey_answer = _data select (["survey"] call _mphqhdgydhrunqrijgpmyfmnhqtyigybtocuhpytspfgqzemplopxdvsrtlyuapddjyfr);  _lrjyldcplerhazgzboxawktlfsxozjcvnpsegigjspzxhmgahcmjhsdddkxsomdot = _data select (["dlcs"] call _mphqhdgydhrunqrijgpmyfmnhqtyigybtocuhpytspfgqzemplopxdvsrtlyuapddjyfr); [_lrjyldcplerhazgzboxawktlfsxozjcvnpsegigjspzxhmgahcmjhsdddkxsomdot] spawn life_fnc_dgrbhbzhlfwcnqzivuyaqzylsjtrigxyqrrpyzzwcqgudgttxgjmsd;   if(count (_data select (['civ_licenses','cop_licenses','med_licenses'] call _mphqhdgydhrunqrijgpmyfmnhqtyigybtocuhpytspfgqzemplopxdvsrtlyuapddjyfr)) > 0) then { 	{SVAR_MNS [SEL(_x,0),SEL(_x,1)];} foreach (_data select (['civ_licenses','cop_licenses','med_licenses'] call _mphqhdgydhrunqrijgpmyfmnhqtyigybtocuhpytspfgqzemplopxdvsrtlyuapddjyfr)); };  if(playerSide in [west,civilian]) then { 	preSaved_loadout = _data select (['civ_loadout','cop_loadout',''] call _mphqhdgydhrunqrijgpmyfmnhqtyigybtocuhpytspfgqzemplopxdvsrtlyuapddjyfr); 	if(count preSaved_loadout == 3) then { 		preSaved_loadout pushBack []; 		preSaved_loadout pushBack []; 	}; };  CONST(life_donatorlvl, (_data select (['donatorlvl'] call _mphqhdgydhrunqrijgpmyfmnhqtyigybtocuhpytspfgqzemplopxdvsrtlyuapddjyfr)));  life_xpMultiplier = switch (call life_donatorlvl) do { 	case 2: {1.5}; 	case 3: {2}; 	case 4: {2}; 	case 5: {2}; 	default {1}; };  _dexzhiovhejuzyzeciyvqjehpjckccdyzmcdkknofhmhucnjjgytluichmfcjcedlbhcmo = (_data select (['factory_objs'] call _mphqhdgydhrunqrijgpmyfmnhqtyigybtocuhpytspfgqzemplopxdvsrtlyuapddjyfr)); [_dexzhiovhejuzyzeciyvqjehpjckccdyzmcdkknofhmhucnjjgytluichmfcjcedlbhcmo] call life_fnc_weveotnpzcduyxysxucftqnisrqfqxtohrodjxtweizqjzmcftivcduhkw;  CONST(life_copleveltotal, (_data select (['coplevel'] call _mphqhdgydhrunqrijgpmyfmnhqtyigybtocuhpytspfgqzemplopxdvsrtlyuapddjyfr))); CONST(life_medicLeveltotal, (_data select (['mediclevel'] call _mphqhdgydhrunqrijgpmyfmnhqtyigybtocuhpytspfgqzemplopxdvsrtlyuapddjyfr)));   switch(playerSide) do { 	case west: { 		CONST(life_coplevel, (_data select (['coplevel'] call _mphqhdgydhrunqrijgpmyfmnhqtyigybtocuhpytspfgqzemplopxdvsrtlyuapddjyfr))); 		CONST(life_medicLevel,0); 		life_blacklisted = _data select (['blacklist'] call _mphqhdgydhrunqrijgpmyfmnhqtyigybtocuhpytspfgqzemplopxdvsrtlyuapddjyfr); 		CONST(life_rebactive,0); 		CONST(life_reblevel,0); 		cop_items = _data select (['cop_box'] call _mphqhdgydhrunqrijgpmyfmnhqtyigybtocuhpytspfgqzemplopxdvsrtlyuapddjyfr); 		 		 		 		 		if(_quxgcgklmgnjrfqkriehgfnrdrrvianizvyqchrmamkjzhongqujuyeuwkojniy == "Insatspolis") then { 			if(!(0 in life_customperms)) exitWith {CONST(life_insatsActive, 0); ["TagIncorrect",false,true] call BIS_fnc_endMission;}; 			CONST(life_insatsActive, 1); 			life_sideInt = 3; 			player setVariable ["insatsPolis",true,true]; 		} else { 			CONST(life_insatsActive, 0); 			if(!(_quxgcgklmgnjrfqkriehgfnrdrrvianizvyqchrmamkjzhongqujuyeuwkojniy == "Polis") && ((call life_adminlevel) < 5)) exitWith {["TagIncorrect",false,true] call BIS_fnc_endMission;}; 			life_sideInt = 2; 		}; 	}; 	 	case civilian: { 		life_is_arrested = parseNumber (SEL(_data,(['arrested'] call _mphqhdgydhrunqrijgpmyfmnhqtyigybtocuhpytspfgqzemplopxdvsrtlyuapddjyfr))); 		life_receivedCash = parseNumber (SEL(_data,(['TS_cash'] call _mphqhdgydhrunqrijgpmyfmnhqtyigybtocuhpytspfgqzemplopxdvsrtlyuapddjyfr))); 		CONST(life_coplevel, 0); 		CONST(life_medicLevel, 0); 		CONST(life_insatsActive, 0); 		CONST(life_reblevel, (SEL(_data,(['reblevel'] call _mphqhdgydhrunqrijgpmyfmnhqtyigybtocuhpytspfgqzemplopxdvsrtlyuapddjyfr)))); 		life_houses = SEL(_data,((count _data) - 5)); 		{ 			_house = nearestBuilding (call compile format["%1", SEL(_x,0)]); 			life_vehicles pushBack _house; 		} foreach life_houses; 		 		if((_quxgcgklmgnjrfqkriehgfnrdrrvianizvyqchrmamkjzhongqujuyeuwkojniy == "T.R.F") && ((call life_reblevel) == 0)) exitWith {["NotARebel",false,true] call BIS_fnc_endMission;};  		if((_quxgcgklmgnjrfqkriehgfnrdrrvianizvyqchrmamkjzhongqujuyeuwkojniy == "T.R.F") && ((call life_reblevel) > 0)) then { 			CONST(life_rebactive,1); 			life_sideInt = 1; 		} else { 			CONST(life_rebactive,0); 			life_sideInt = 0; 		}; 		 		life_gangData = SEL(_data,((count _data) - 4)); 		 		 		 		if(!(EQUAL(count life_gangData,0))) then { 			_gangPos = (getMarkerPos format["villageSpawn_%1",(life_gangData select 6)]); 			if(SEL(_gangPos,0) == 0) then {life_gangData set [6,"0"];}; 			[] spawn life_fnc_initGang; 		}; 		[] spawn life_fnc_pvcrqfijhplhwpdlavapxfyudsuircqszgrvbxuofrgbzhrehzahabdj; 		 		 	}; 	 	case independent: { 		CONST(life_medicLevel, (SEL(_data,(['mediclevel'] call _mphqhdgydhrunqrijgpmyfmnhqtyigybtocuhpytspfgqzemplopxdvsrtlyuapddjyfr)))); 		CONST(life_coplevel,0); 		CONST(life_rebactive,0); 		CONST(life_reblevel,0); 		CONST(life_insatsActive, 0); 		life_sideInt = 4; 		 		if(!(_quxgcgklmgnjrfqkriehgfnrdrrvianizvyqchrmamkjzhongqujuyeuwkojniy == "Sjukvårdare") && ((call life_adminlevel) < 5)) exitWith {["TagIncorrect",false,true] call BIS_fnc_endMission;}; 	}; };  life_gear = _data select (['civ_gear','reb_gear','cop_gear','insats_gear','med_gear'] call _mphqhdgydhrunqrijgpmyfmnhqtyigybtocuhpytspfgqzemplopxdvsrtlyuapddjyfr);  _handle = [true] spawn life_fnc_ypufifqvwhywsfipllcqkxzffdjzwmpvtocvlcfdwdfqdemvdmllaqjmu; waitUntil {scriptDone _handle};   private ["_openPanelPerm"];  _openPanelPerm = switch (true) do { 	case (1 in life_customperms): {1}; 	case (11 in life_customperms): {1}; 	case (55 in life_customperms): {1}; 	case (FETCH_CONST(life_fractionmanager) >= 1): {1}; 	case (FETCH_CONST(life_adminlevel) >= 1): {1}; 	case (FETCH_CONST(life_medicleveltotal) >= 4): {1}; 	case (FETCH_CONST(life_copleveltotal) >= 7): {1}; 	case (FETCH_CONST(life_reblevel) >= 8): {1}; 	case (FETCH_CONST(life_coplevel) >= 1 && (70 in life_customperms)): {1}; 	case (FETCH_CONST(life_rebactive) >= 1 && (71 in life_customperms)): {1}; 	case (FETCH_CONST(life_mediclevel) >= 1 && (72 in life_customperms)): {1}; 	default {0}; }; CONST(life_openPanelPerm,_openPanelPerm);  logoutPos = SEL(_data,((count _data) - 3));   if(count (SEL(_data,((count _data) - 2))) > 0) then { 	{life_vehicles pushBack _x;} foreach (SEL(_data,((count _data) - 2))); };    adminJailCount = SEL(_data,((count _data) - 1)) select 0; adminJailTotalTime = SEL(_data,((count _data) - 1)) select 1;  requestReceivedTime = diag_tickTime;  life_session_completed = true; 