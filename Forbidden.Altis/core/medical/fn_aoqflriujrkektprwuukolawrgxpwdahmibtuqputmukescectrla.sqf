
#include <macro.h>
 private["_fcgnwkjxdschbkmxhwfjfdutiacqnxqzqeqcbikykvxqbjeqdfllpyxvioskxgizbs","_rjgwtdmeldgjjttgsdznbmtzetmrwcdgmuqzsyzucozbpsygbnvurayihmfofwpusfc","_fcgnwkjxdschbkmxhwfjfdutiacqnxqzqeqcbikykvxqbjeqdfllpyxvioskxgizbsName","_ui","_pbelzamghagiwhfvmujvzdtfphmvaappuedzdkwiynarofulknvczffmrmgxjtffscy","_zuojcsjmpskycqfutiljfblkeozjrgqaeyfzcbfnfwckbwmkghizsjpshvwoupbcpclgy","_ygbjuhwbiwfwbvoyrzsvowayvsmvpwrzzryewrrkaocpiaawkaxuhlogshgxatnpbaww","_hsmdfvbrqrgagvhhrxzpuykyfkhcmkvdgwoizuvyptclebxghzljxdcqizjixfa"]; _fcgnwkjxdschbkmxhwfjfdutiacqnxqzqeqcbikykvxqbjeqdfllpyxvioskxgizbs = [_this,0,ObjNull,[ObjNull]] call BIS_fnc_param; if((player distance (getMarkerPos "IslandMarker_circle")) < 1500) exitWith {hint localize "STR_m_notReviveHere";}; if(isNull _fcgnwkjxdschbkmxhwfjfdutiacqnxqzqeqcbikykvxqbjeqdfllpyxvioskxgizbs) exitWith {};  if(_fcgnwkjxdschbkmxhwfjfdutiacqnxqzqeqcbikykvxqbjeqdfllpyxvioskxgizbs getVariable ["owner_offline",false]) exitWith {hint localize "STR_m_ReviveOwnerOffline";}; if((_fcgnwkjxdschbkmxhwfjfdutiacqnxqzqeqcbikykvxqbjeqdfllpyxvioskxgizbs getVariable["name",""]) == "") exitWith {hint localize "STR_m_ReviveNotPlayer";};    _rjgwtdmeldgjjttgsdznbmtzetmrwcdgmuqzsyzucozbpsygbnvurayihmfofwpusfc = _fcgnwkjxdschbkmxhwfjfdutiacqnxqzqeqcbikykvxqbjeqdfllpyxvioskxgizbs GVAR ["Revive",FALSE]; if(_rjgwtdmeldgjjttgsdznbmtzetmrwcdgmuqzsyzucozbpsygbnvurayihmfofwpusfc) exitWith {}; if(_fcgnwkjxdschbkmxhwfjfdutiacqnxqzqeqcbikykvxqbjeqdfllpyxvioskxgizbs GVAR ["Reviving",ObjNull] == player) exitWith {hint localize "STR_Medic_AlreadyReviving";}; if(player distance _fcgnwkjxdschbkmxhwfjfdutiacqnxqzqeqcbikykvxqbjeqdfllpyxvioskxgizbs > 5) exitWith {};    _fcgnwkjxdschbkmxhwfjfdutiacqnxqzqeqcbikykvxqbjeqdfllpyxvioskxgizbsName = _fcgnwkjxdschbkmxhwfjfdutiacqnxqzqeqcbikykvxqbjeqdfllpyxvioskxgizbs GVAR ["name","Unknown"]; _hsmdfvbrqrgagvhhrxzpuykyfkhcmkvdgwoizuvyptclebxghzljxdcqizjixfa = format[localize "STR_Medic_Progress",_fcgnwkjxdschbkmxhwfjfdutiacqnxqzqeqcbikykvxqbjeqdfllpyxvioskxgizbsName];    life_action_inUse = true;  _fcgnwkjxdschbkmxhwfjfdutiacqnxqzqeqcbikykvxqbjeqdfllpyxvioskxgizbs SVAR ["Reviving",player,TRUE];  disableSerialization; 5 cutRsc ["life_progress","PLAIN"]; _ui = GVAR_UINS ["life_progress",displayNull]; _pbelzamghagiwhfvmujvzdtfphmvaappuedzdkwiynarofulknvczffmrmgxjtffscy = _ui displayCtrl 38201; _zuojcsjmpskycqfutiljfblkeozjrgqaeyfzcbfnfwckbwmkghizsjpshvwoupbcpclgy = _ui displayCtrl 38202; _zuojcsjmpskycqfutiljfblkeozjrgqaeyfzcbfnfwckbwmkghizsjpshvwoupbcpclgy ctrlSetText format["%2 (1%1)...","%",_hsmdfvbrqrgagvhhrxzpuykyfkhcmkvdgwoizuvyptclebxghzljxdcqizjixfa]; _pbelzamghagiwhfvmujvzdtfphmvaappuedzdkwiynarofulknvczffmrmgxjtffscy progressSetPosition 0.01; _ygbjuhwbiwfwbvoyrzsvowayvsmvpwrzzryewrrkaocpiaawkaxuhlogshgxatnpbaww = 0.01;   while {true} do { 	if(animationState player != "AinvPknlMstpSnonWnonDnon_medic_1") then { 		 		player playMoveNow "AinvPknlMstpSnonWnonDnon_medic_1"; 	}; 	 	sleep .15; 	_ygbjuhwbiwfwbvoyrzsvowayvsmvpwrzzryewrrkaocpiaawkaxuhlogshgxatnpbaww = _ygbjuhwbiwfwbvoyrzsvowayvsmvpwrzzryewrrkaocpiaawkaxuhlogshgxatnpbaww + .01; 	_pbelzamghagiwhfvmujvzdtfphmvaappuedzdkwiynarofulknvczffmrmgxjtffscy progressSetPosition _ygbjuhwbiwfwbvoyrzsvowayvsmvpwrzzryewrrkaocpiaawkaxuhlogshgxatnpbaww; 	_zuojcsjmpskycqfutiljfblkeozjrgqaeyfzcbfnfwckbwmkghizsjpshvwoupbcpclgy ctrlSetText format["%3 (%1%2)...",round(_ygbjuhwbiwfwbvoyrzsvowayvsmvpwrzzryewrrkaocpiaawkaxuhlogshgxatnpbaww * 100),"%",_hsmdfvbrqrgagvhhrxzpuykyfkhcmkvdgwoizuvyptclebxghzljxdcqizjixfa]; 	if(_ygbjuhwbiwfwbvoyrzsvowayvsmvpwrzzryewrrkaocpiaawkaxuhlogshgxatnpbaww >= 1 OR !alive player) exitWith {}; 	if(life_istazed) exitWith {};  	if(life_interrupted) exitWith {}; 	if(player GVAR ["restrained",false]) exitWith {}; 	if(player GVAR ["adminRestrained",false]) exitWith {}; 	if(player distance _fcgnwkjxdschbkmxhwfjfdutiacqnxqzqeqcbikykvxqbjeqdfllpyxvioskxgizbs > 4) exitWith {_badDistance = true;}; 	if(_fcgnwkjxdschbkmxhwfjfdutiacqnxqzqeqcbikykvxqbjeqdfllpyxvioskxgizbs GVAR ["Revive",FALSE]) exitWith {}; 	if(_fcgnwkjxdschbkmxhwfjfdutiacqnxqzqeqcbikykvxqbjeqdfllpyxvioskxgizbs GVAR ["Reviving",ObjNull] != player) exitWith {}; };   5 cutText ["","PLAIN"]; player playActionNow "stop"; if(_fcgnwkjxdschbkmxhwfjfdutiacqnxqzqeqcbikykvxqbjeqdfllpyxvioskxgizbs GVAR ["Reviving",ObjNull] != player) exitWith {hint localize "STR_Medic_AlreadyReviving"}; _fcgnwkjxdschbkmxhwfjfdutiacqnxqzqeqcbikykvxqbjeqdfllpyxvioskxgizbs SVAR ["Reviving",NIL,TRUE]; if(!alive player OR life_istazed) exitWith {life_action_inUse = false;}; if(_fcgnwkjxdschbkmxhwfjfdutiacqnxqzqeqcbikykvxqbjeqdfllpyxvioskxgizbs GVAR ["Revive",FALSE]) exitWith {hint localize "STR_Medic_RevivedRespawned"}; if(player GVAR ["restrained",false]) exitWith {life_action_inUse = false;}; if(player GVAR ["adminRestrained",false]) exitWith {life_action_inUse = false;}; if(!isNil "_badDistance") exitWith {titleText[localize "STR_Medic_TooFar","PLAIN"]; life_action_inUse = false;}; if(life_interrupted) exitWith {life_interrupted = false; titleText[localize "STR_NOTF_ActionCancel","PLAIN"]; life_action_inUse = false;};  ADD(BANK,(LIFE_SETTINGS(getNumber,"revive_fee"))); if((_fcgnwkjxdschbkmxhwfjfdutiacqnxqzqeqcbikykvxqbjeqdfllpyxvioskxgizbs getVariable ["side",sideUnknown]) == independent) then { 	systemChat localize "STR_m_RevivedMedicNoXP"; } else { 	[350] spawn life_fnc_earnXP; };  [[1,(getPlayerUID player),(_fcgnwkjxdschbkmxhwfjfdutiacqnxqzqeqcbikykvxqbjeqdfllpyxvioskxgizbs getVariable ["steam64id",""]),"Medic revive","",profileName,(_fcgnwkjxdschbkmxhwfjfdutiacqnxqzqeqcbikykvxqbjeqdfllpyxvioskxgizbs getVariable ["name",""]),str (getPos player)],"TON_fnc_cqbslmzhelexdchvshruhtirwniyhyywbybxhiltsdxdujmnhjuhnal",false,false] spawn life_fnc_MP;  life_action_inUse = false; _fcgnwkjxdschbkmxhwfjfdutiacqnxqzqeqcbikykvxqbjeqdfllpyxvioskxgizbs SVAR ["Revive",TRUE,TRUE]; [[profileName,false,player,(call life_donatorlvl)],"life_fnc_dseyzpqxwpmrkgziushtiebydslhrarrucpsufwmhgayfercaxzapgttm",_fcgnwkjxdschbkmxhwfjfdutiacqnxqzqeqcbikykvxqbjeqdfllpyxvioskxgizbs,FALSE] call life_fnc_MP; titleText[format[localize "STR_Medic_RevivePayReceive",_fcgnwkjxdschbkmxhwfjfdutiacqnxqzqeqcbikykvxqbjeqdfllpyxvioskxgizbsName,LIFE_SETTINGS(getNumber,"revive_fee")],"PLAIN"];  sleep .6; player reveal _fcgnwkjxdschbkmxhwfjfdutiacqnxqzqeqcbikykvxqbjeqdfllpyxvioskxgizbs; 