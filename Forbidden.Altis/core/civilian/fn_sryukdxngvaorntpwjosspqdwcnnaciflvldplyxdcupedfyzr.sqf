
#include <macro.h>
 private["_vmuerjpabxfvbwbwnwiiuvumqmgsnpqwrkvktkkqddispjxvjhmplknubhvs","_fwbgfbwsuufkozpemqdffdggorhnknsknmflwlyqjpkacbvkexioimihxyfselcg","_time","_bail","_esc","_edpdefmmprfgbqurrrjuyhndyerqpnygevbljcejobfroirsqoxzputnwgikytqhew","_vhsfpnirivqrukdogpmrotqwyaganhzedzjddvdnkvgamybidjrxhyzdiznjfcr","_zvbggpkvjztcpksrhziagqkwctqgonfcsogzldcmbaliwjhmypkukqewvdzvwmrcjxthfl","_lcgcgufbzbpzujtybtnzudzwztcdvrcemxcepqcyiazpltsmmyjivefurfpa","_ypenyyoithpqqtqzielsnqbokfdecwhqjztnqmzsqtptlabrhebnmoyrhtim","_pjtdkkeoveopijjceexdodkzpbpctxdbgjkefdxdxcvaacmtwiyyxnyoikfvwtoyqmmh","_dxtliockqzmufwnnlstuivjgmauasfvsqwrhznvqeweeguzkpctgqgexacjtim","_lwbbfpdtqnxgbemfgmhygqnukrggwvhaemmyegklyeptobrbvxgvpdrwxdhnn"]; _vmuerjpabxfvbwbwnwiiuvumqmgsnpqwrkvktkkqddispjxvjhmplknubhvs = [_this,0,[],[[]]] call BIS_fnc_param; _fwbgfbwsuufkozpemqdffdggorhnknsknmflwlyqjpkacbvkexioimihxyfselcg = [_this,1,false,[false]] call BIS_fnc_param; _time = [_this,2,-1,[0]] call BIS_fnc_param; _dxtliockqzmufwnnlstuivjgmauasfvsqwrhznvqeweeguzkpctgqgexacjtim = [_this,3,false,[false]] call BIS_fnc_param;  _esc = false; _bail = false; _lwbbfpdtqnxgbemfgmhygqnukrggwvhaemmyegklyeptobrbvxgvpdrwxdhnn = 0;  player setVariable ["PardonedJail",false,true];    if(isNil "adminJailQuestionDelay") then {adminJailQuestionDelay = 60;};  if(isNil "adminJailTimeToAnswer") then {adminJailTimeToAnswer = 20;}; jail_in_yard = false; jail_in_isolation = false;   if(isNil "adminJail_answerBonusTime") then {adminJail_answerBonusTime = 0;}; if(isNil "life_permAdJail") then {life_permAdJail = false;}; if(_time == -1) then {_time = 1000; life_permAdJail = true;}; _lcgcgufbzbpzujtybtnzudzwztcdvrcemxcepqcyiazpltsmmyjivefurfpa = false; life_pauseJailCountdown = false; AdJailQuestionTime = time + adminJailQuestionDelay + adminJailTimeToAnswer;  if(isNil "releasedFromJail") then {releasedFromJail = false;};  adJailLastPos = (getPos player); adJailLastMove = time; lastLitterPicked = time;  life_canpay_bail = false; _time = _time * 60;  _time = _time + time; life_jailTimeOfOut = _time;   if(life_adminJail == 0) then { 	[] spawn { 		while {life_is_arrested != 0} do { 			for "_i" from 1 to 10 do { 				if(prison getVariable [format["bis_disabled_door_%1",_i],1] == 1) then {prison animate [format["door_%1_rot",_i],0];}; 			}; 			 			for "_i" from 12 to 22 do { 				if(prison getVariable [format["bis_disabled_door_%1",_i],1] == 1) then {prison animate [format["door_%1_rot",_i],0];}; 			}; 			 			if((prison_tower getVariable ["bis_disabled_door_1",1]) == 1) then {prison_tower animate ["door_1_rot",0];}; 			 			sleep 10; 		}; 	}; };  [] spawn { 	sleep 3; 	if(life_adminJail == 0) then { 		[0,0,0,[0,player]] call life_fnc_ulcvtogxtpndsyhonmxxpycgrkphqdtxzkmfmboracnarrtcvxcpztgeof; 	}; };  _zvbggpkvjztcpksrhziagqkwctqgonfcsogzldcmbaliwjhmypkukqewvdzvwmrcjxthfl = false; _ypenyyoithpqqtqzielsnqbokfdecwhqjztnqmzsqtptlabrhebnmoyrhtim = false;  if(_dxtliockqzmufwnnlstuivjgmauasfvsqwrhznvqeweeguzkpctgqgexacjtim) then { 	life_inDaAdminLocal = true; 	player setVariable ["inAdminJail",true,true]; 	adminJailSyncTime = time; 	_lcgcgufbzbpzujtybtnzudzwztcdvrcemxcepqcyiazpltsmmyjivefurfpa = true; 	[8] spawn life_fnc_cffqieiafhbofhqthjbvastsiczvnuzljhbtedyjhqjvdhluzsbbgyiv; 	[] spawn life_fnc_gceyvoxylrjrumjrcszlobqdovnmdcdwhvtuoiwezeimdzlyzyo;  	 	[] spawn { 		while {life_adminJail > 0} do { 			sleep 3; 			if(!life_pauseJailCountdown) then { 				if(time - adminJailSyncTime > 300) then { 					[13] call SOCK_fnc_ddjmbrftntgdwpptfaoymlxkcjyscjwhklmcfylqhrqrxtxznnh; 					adminJailSyncTime = time; 				}; 				life_adminJail = life_adminJail - 0.05; 				if(life_adminJail < 0) then {life_adminJail = 0;}; 			}; 		}; 	}; 	 	[] spawn { 		while {life_inDaAdminLocal} do { 			if((getPos player) distance adJailLastPos > 0.05) then {adJailLastMove = time;}; 			adJailLastPos = getPos player; 			sleep 1; 		}; 	}; 	 	[] spawn { 		while {life_inDaAdminLocal} do { 			if(!(player inArea "adminJailArea") OR player != vehicle player && life_isAlive) then { 				detach player; 				if(player != vehicle player) then {moveOut player;}; 				 				player setPos [14797,16642,0]; 				[2,localize "STR_m_AdJailRedCircle"] call life_fnc_broadCast; 			}; 			 			sleep 1; 		}; 	}; 	 	[] spawn life_fnc_omyqcvfeiibiprjmjblflpmqtetbpjaljlkwsmavaxlelwvviqearfevtwg; 	 	while {true} do { 		if((round(_time - time)) > 0) then { 			_edpdefmmprfgbqurrrjuyhndyerqpnygevbljcejobfroirsqoxzputnwgikytqhew = [(_time - time),"MM:SS.MS"] call BIS_fnc_secondsToString; 			hintSilent parseText format[(localize "STR_Jail_Time")+ "<br/> <t size='2'><t color='#FF0000'>%1</t></t><br/><br/>Anledning: %2<br/><br/>",_edpdefmmprfgbqurrrjuyhndyerqpnygevbljcejobfroirsqoxzputnwgikytqhew,adminJail_reason]; 		}; 		 		 		if(time - lastLitterPicked > 15 && (isNull (findDisplay 1467))) then { 			[2,localize "STR_m_YouDidNotPick"] spawn life_fnc_broadcast; 			life_pauseJailCountdown = true; 			adminJail_movePause = true; 			 			[] spawn { 				private ["_lwbbfpdtqnxgbemfgmhygqnukrggwvhaemmyegklyeptobrbvxgvpdrwxdhnn"]; 				_lwbbfpdtqnxgbemfgmhygqnukrggwvhaemmyegklyeptobrbvxgvpdrwxdhnn = 0; 				while {adminJail_movePause} do { 					hintSilent parseText format[(localize "STR_Jail_TimeStopped")+ "<br/> <t size='2'><t color='#FF0000'>%1</t></t><br/><br/>Anledning: %2<br/><br/>%3<br/><br/>",localize "STR_m_JailMustPick",adminJail_reason,localize "STR_m_JailPickGuide"]; 					_lwbbfpdtqnxgbemfgmhygqnukrggwvhaemmyegklyeptobrbvxgvpdrwxdhnn = _lwbbfpdtqnxgbemfgmhygqnukrggwvhaemmyegklyeptobrbvxgvpdrwxdhnn + 1; 					if(_lwbbfpdtqnxgbemfgmhygqnukrggwvhaemmyegklyeptobrbvxgvpdrwxdhnn % 15 == 0 && (isNull (findDisplay 1467))) then {[2,localize "STR_m_PickCanInstruction"] spawn life_fnc_broadcast;}; 					sleep 1; 				}; 			}; 			_pjtdkkeoveopijjceexdodkzpbpctxdbgjkefdxdxcvaacmtwiyyxnyoikfvwtoyqmmh = time; 			waitUntil {(time - lastLitterPicked < 15) OR releasedFromJail}; 			_time = _time + (time - _pjtdkkeoveopijjceexdodkzpbpctxdbgjkefdxdxcvaacmtwiyyxnyoikfvwtoyqmmh) + adminJail_answerBonusTime; 			adminJail_answerBonusTime = 0; 			if(life_adminJail != -1) then {life_adminJail = ceil ((_time - time)/60);}; 			life_pauseJailCountdown = false; 			adminJail_movePause = false; 			[2,localize "STR_m_YouDidNotPick"] spawn life_fnc_broadcast; 		}; 		 		 		if(AdJailQuestionTime - time < 0 && adminJail_reason != "Brott mot NLR (New Life Rule)") then { 			[2,localize "STR_m_YouHaveNotAnswered"] spawn life_fnc_broadcast; 			life_pauseJailCountdown = true; 			adminJail_questionPause = true; 			 			[] spawn { 				while {adminJail_questionPause} do { 					hintSilent parseText format[(localize "STR_Jail_Time")+ "<br/> <t size='2'><t color='#FF0000'>%1</t></t><br/><br/>Anledning: %2<br/><br/>",localize "STR_m_JailMustAnswer",adminJail_reason]; 					sleep 1; 				}; 			}; 			 			_pjtdkkeoveopijjceexdodkzpbpctxdbgjkefdxdxcvaacmtwiyyxnyoikfvwtoyqmmh = time; 			waitUntil {(AdJailQuestionTime - time > 0) OR releasedFromJail}; 			_time = _time + (time - _pjtdkkeoveopijjceexdodkzpbpctxdbgjkefdxdxcvaacmtwiyyxnyoikfvwtoyqmmh) + adminJail_answerBonusTime; 			adminJail_answerBonusTime = 0; 			if(life_adminJail != -1) then {life_adminJail = ceil ((_time - time)/60);}; 			life_pauseJailCountdown = false; 			adminJail_questionPause = false; 			[2,localize "STR_m_YouHaveNotAnswered"] spawn life_fnc_broadcast; 		}; 		 		if(releasedFromJail) exitWith {_lcgcgufbzbpzujtybtnzudzwztcdvrcemxcepqcyiazpltsmmyjivefurfpa = true; releasedFromJail = false; _ypenyyoithpqqtqzielsnqbokfdecwhqjztnqmzsqtptlabrhebnmoyrhtim = true;}; 		 		 		 		 		if((round(_time - time)) < 1 && life_adminJail != -1) exitWith {hint ""; _lcgcgufbzbpzujtybtnzudzwztcdvrcemxcepqcyiazpltsmmyjivefurfpa = true;}; 		 		sleep 0.1; 	}; 	life_inDaAdminLocal = false; 	player setVariable ["inAdminJail",false,true]; } else { 	while {true} do { 		if((round(_time - time)) > 0) then { 			_edpdefmmprfgbqurrrjuyhndyerqpnygevbljcejobfroirsqoxzputnwgikytqhew = [(_time - time),"MM:SS.MS"] call BIS_fnc_secondsToString; 			hintSilent parseText format[(localize "STR_Jail_Time")+ "<br/> <t size='2'><t color='#FF0000'>%1</t></t><br/><br/>",_edpdefmmprfgbqurrrjuyhndyerqpnygevbljcejobfroirsqoxzputnwgikytqhew]; 		}; 		_lwbbfpdtqnxgbemfgmhygqnukrggwvhaemmyegklyeptobrbvxgvpdrwxdhnn = _lwbbfpdtqnxgbemfgmhygqnukrggwvhaemmyegklyeptobrbvxgvpdrwxdhnn + 1; 		if(_lwbbfpdtqnxgbemfgmhygqnukrggwvhaemmyegklyeptobrbvxgvpdrwxdhnn % 100 == 0) then { 			life_is_arrested = round((_time - time) / 60); 		}; 		 		if(releasedFromJail) exitWith {releasedFromJail = false;}; 		 		 		 		if((player distance prison_cellpos) > 5 && !(player getVariable ["Restrained",false]) && !(player getVariable ["adminRestrained",false]) && !(player getVariable ["stretched",false]) && !((getPos player) inArea "prison_isolation") && !(((getPos player) inArea "prison_yard") && jail_in_yard) && life_isAlive) then { 			if(!prison_cellOpen && !((vehicle player isKindOf "Air") && jail_in_yard)) then { 				if(vehicle player != player) then {moveOut player}; 				waitUntil {player == vehicle player}; 				 				switch (true) do { 					case jail_in_yard: {player setPosATL [13261,14565.4,5.22655]}; 					case jail_in_isolation: {player setPosATL [13276.7,14588.3,4.9834]}; 					default {player setPosATL prison_cellpos}; 				}; 				 			} else { 				if((player distance [8459.74,25131.5,0.0013504]) > 300 && (player distance2d prison) > 70) exitWith { 					_esc = true; 				}; 			}; 		}; 		 		 		_zvbggpkvjztcpksrhziagqkwctqgonfcsogzldcmbaliwjhmypkukqewvdzvwmrcjxthfl = (player getVariable ["PardonedJail",false]); 		if(_esc OR _zvbggpkvjztcpksrhziagqkwctqgonfcsogzldcmbaliwjhmypkukqewvdzvwmrcjxthfl) exitWith {}; 		 		if((round(_time - time)) < 1) exitWith {hint ""}; 		if(!alive player && ((round(_time - time)) > 0)) exitWith {}; 		sleep 0.1; 	}; };  player setVariable ["isInCopJail",false,true];  switch (true) do { 	 	 	case (alive player && _zvbggpkvjztcpksrhziagqkwctqgonfcsogzldcmbaliwjhmypkukqewvdzvwmrcjxthfl): { 		life_inIsolation = false; 		sleep 0.2; 		life_is_arrested = 0; 		hint localize "STR_Jail_Released"; 		player setPos (getMarkerPos "jail_release"); 		prison_cell = -1; 		[5] call SOCK_fnc_ddjmbrftntgdwpptfaoymlxkcjyscjwhklmcfylqhrqrxtxznnh; 		life_gear = prison_savedGear; 		_handle = [] spawn life_fnc_ypufifqvwhywsfipllcqkxzffdjzwmpvtocvlcfdwdfqdemvdmllaqjmu; 		waitUntil {scriptDone _handle}; 		[3] call SOCK_fnc_ddjmbrftntgdwpptfaoymlxkcjyscjwhklmcfylqhrqrxtxznnh; 		player setVariable ["PardonedJail",false,true]; 		player setVariable ["restrained",false,true]; 		player setVariable ["adminRestrained",false,true]; 	}; 	 	case (_esc): { 		life_is_arrested = 0; 		hint localize "STR_Jail_EscapeSelf"; 		[[0,"STR_Jail_EscapeNOTF",true,[profileName]],"life_fnc_broadcast",nil,false] call life_fnc_MP; 		[getPlayerUID player,profileName,"901",player] spawn life_fnc_emtvegxsjbicbxdyyizalaeqhulvbokspdnvrxanbasgedbaphvjbq; 		prison_cell = -1; 		[5] call SOCK_fnc_ddjmbrftntgdwpptfaoymlxkcjyscjwhklmcfylqhrqrxtxznnh; 	}; 	 	case (alive player && !_esc && !_bail && ((player distance [8459.74,25131.5,0.0013504]) > 300)): { 		if(life_isAlive) then { 			if(_lcgcgufbzbpzujtybtnzudzwztcdvrcemxcepqcyiazpltsmmyjivefurfpa) then { 				life_adminJail = 0; 			} else { 				life_is_arrested = 0; 			}; 		}; 		 		life_inIsolation = false; 		sleep 0.2; 		hint localize "STR_Jail_Released"; 		prison_cell = -1; 		 		life_gear = prison_savedGear; 		_handle = [] spawn life_fnc_ypufifqvwhywsfipllcqkxzffdjzwmpvtocvlcfdwdfqdemvdmllaqjmu; 		waitUntil {scriptDone _handle}; 		[3] call SOCK_fnc_ddjmbrftntgdwpptfaoymlxkcjyscjwhklmcfylqhrqrxtxznnh; 		player setVariable ["restrained",false,true]; 		player setVariable ["adminRestrained",false,true]; 		 		if(_lcgcgufbzbpzujtybtnzudzwztcdvrcemxcepqcyiazpltsmmyjivefurfpa) then { 			player setPosATL [8858.03,25369.7,0.00110054]; 			[] spawn life_fnc_ahlahrugiqknetuumakyonsqyothaelchcsczkdkarivhpuegwjdsgr; 			[12] call SOCK_fnc_ddjmbrftntgdwpptfaoymlxkcjyscjwhklmcfylqhrqrxtxznnh; 		} else { 			[5] call SOCK_fnc_ddjmbrftntgdwpptfaoymlxkcjyscjwhklmcfylqhrqrxtxznnh; 			[[getPlayerUID player,player],"life_fnc_zptqmkvjlzazoqzdrnpjvhvkhevbyvrkkhcmyfogyrvdnhvyveuy",false,false] call life_fnc_MP; 			player setPos (getMarkerPos "jail_release"); 		}; 	}; }; deleteMarkerLocal "adminJail_circle"; Jail_inProgress = false; jail_in_yard = false; jail_in_isolation = false; 