
#include <macro.h>
 disableSerialization; private["_hrbpatagjghidbmqqzrcmqpkouyeesqrccxeubdyswvokvovoyrengmueuthlmicc","_item","_pbrwpyeoyeqzvkfzuebnfdeurjberkxsmsbxhfptknesoaspsnmvzeajrpvdqiferuxyfk","_idcotwvhljganuhwwocthbmmnbkpbfgjamwlugcnmdeqxakownchqukelzgq"]; if((lbCurSel 38403) == -1) exitWith {hint localize "STR_Shop_Weapon_NoSelect"}; _hrbpatagjghidbmqqzrcmqpkouyeesqrccxeubdyswvokvovoyrengmueuthlmicc = lbValue[38403,(lbCurSel 38403)]; if(isNil "_hrbpatagjghidbmqqzrcmqpkouyeesqrccxeubdyswvokvovoyrengmueuthlmicc") then {_hrbpatagjghidbmqqzrcmqpkouyeesqrccxeubdyswvokvovoyrengmueuthlmicc = 0;}; _item = lbData[38403,(lbCurSel 38403)]; _pbrwpyeoyeqzvkfzuebnfdeurjberkxsmsbxhfptknesoaspsnmvzeajrpvdqiferuxyfk = [_item] call life_fnc_ssxeemmhetnvsvebxscdwzoubpideoksemqkwcbexdhiozmqizhvq;  _idcotwvhljganuhwwocthbmmnbkpbfgjamwlugcnmdeqxakownchqukelzgq = "";  if((_pbrwpyeoyeqzvkfzuebnfdeurjberkxsmsbxhfptknesoaspsnmvzeajrpvdqiferuxyfk select 6) != "CfgVehicles") then { 	if((_pbrwpyeoyeqzvkfzuebnfdeurjberkxsmsbxhfptknesoaspsnmvzeajrpvdqiferuxyfk select 4) in [4096,131072] OR _item in ["RPG7_F"]) then 	{ 		if(!(player canAdd _item) && (uiNamespace getVariable["Weapon_Shop_Filter",0]) != 1) exitWith {_idcotwvhljganuhwwocthbmmnbkpbfgjamwlugcnmdeqxakownchqukelzgq = (localize "STR_NOTF_NoRoom")}; 	}; };  if(_idcotwvhljganuhwwocthbmmnbkpbfgjamwlugcnmdeqxakownchqukelzgq != "") exitWith {hint _idcotwvhljganuhwwocthbmmnbkpbfgjamwlugcnmdeqxakownchqukelzgq}; if(life_adminjail != 0) exitWith {[2,"Inte i adminjail!"] spawn life_fnc_broadcast};  if((uiNamespace getVariable["Weapon_Shop_Filter",0]) == 1) then { 	CASH = CASH + _hrbpatagjghidbmqqzrcmqpkouyeesqrccxeubdyswvokvovoyrengmueuthlmicc; 	[_item,false] call life_fnc_handleItem; 	hint parseText format[localize "STR_Shop_Weapon_Sold",_pbrwpyeoyeqzvkfzuebnfdeurjberkxsmsbxhfptknesoaspsnmvzeajrpvdqiferuxyfk select 1,[_hrbpatagjghidbmqqzrcmqpkouyeesqrccxeubdyswvokvovoyrengmueuthlmicc] call life_fnc_ccxpkhrsgzfibqpgmuxgqovtqnwczbibnrrxqvyckzrmhckzyugqq]; 	[nil,(uiNamespace getVariable["Weapon_Shop_Filter",0])] call life_fnc_dvsmconfkqhpbhgiveiopabowjftaqsfhhwnccusvtawmnoemntqqxkrf;  } 	else { 	private["_cmpzvmaaqwrkbpthwdaudbgbbfqwuhegishokchcdzahladmccwqzrcsycpcwrnneehhz"]; 	_cmpzvmaaqwrkbpthwdaudbgbbfqwuhegishokchcdzahladmccwqzrcsycpcwrnneehhz = (nearestObjects[getPosATL player,["Land_u_Barracks_V2_F","Land_i_Barracks_V2_F"],25]) select 0; 	if(!isNil "_cmpzvmaaqwrkbpthwdaudbgbbfqwuhegishokchcdzahladmccwqzrcsycpcwrnneehhz" && {!isNil {grpPlayer getVariable "gang_bank"}} && {(grpPlayer getVariable "gang_bank") >= _hrbpatagjghidbmqqzrcmqpkouyeesqrccxeubdyswvokvovoyrengmueuthlmicc} && {(grpPlayer getVariable "gang_owner") == getplayerUID player}) then { 		_action = [ 			format[(localize "STR_Shop_Virt_Gang_FundsMSG")+ "<br/><br/>" +(localize "STR_Shop_Virt_Gang_Funds")+ " <t color='#8cff9b'>$%1</t><br/>" +(localize "STR_Shop_Virt_YourFunds")+ " <t color='#8cff9b'>$%2</t>", 				[(grpPlayer getVariable "gang_bank")] call life_fnc_ccxpkhrsgzfibqpgmuxgqovtqnwczbibnrrxqvyckzrmhckzyugqq, 				[CASH] call life_fnc_ccxpkhrsgzfibqpgmuxgqovtqnwczbibnrrxqvyckzrmhckzyugqq 			], 			localize "STR_Shop_Virt_YourorGang", 			localize "STR_Shop_Virt_UI_GangFunds", 			localize "STR_Shop_Virt_UI_YourCash" 		] call BIS_fnc_guiMessage; 		if(_action) then { 			hint parseText format[localize "STR_Shop_Weapon_BoughtGang",_pbrwpyeoyeqzvkfzuebnfdeurjberkxsmsbxhfptknesoaspsnmvzeajrpvdqiferuxyfk select 1,[_hrbpatagjghidbmqqzrcmqpkouyeesqrccxeubdyswvokvovoyrengmueuthlmicc] call life_fnc_ccxpkhrsgzfibqpgmuxgqovtqnwczbibnrrxqvyckzrmhckzyugqq]; 			_funds = grpPlayer getVariable "gang_bank"; 			_funds = _funds - _hrbpatagjghidbmqqzrcmqpkouyeesqrccxeubdyswvokvovoyrengmueuthlmicc; 			grpPlayer setVariable["gang_bank",_funds,true]; 			[_item,true] spawn life_fnc_handleItem; 			[[1,grpPlayer],"TON_fnc_muszyxpknqmsnmfjvlnsfcssjyonrsqzwlmsuqskphpbdcedpi",false,false] call life_fnc_MP; 		} else { 			if(_hrbpatagjghidbmqqzrcmqpkouyeesqrccxeubdyswvokvovoyrengmueuthlmicc > CASH) exitWith {hint localize "STR_NOTF_NotEnoughMoney"}; 			hint parseText format[localize "STR_Shop_Weapon_BoughtItem",_pbrwpyeoyeqzvkfzuebnfdeurjberkxsmsbxhfptknesoaspsnmvzeajrpvdqiferuxyfk select 1,[_hrbpatagjghidbmqqzrcmqpkouyeesqrccxeubdyswvokvovoyrengmueuthlmicc] call life_fnc_ccxpkhrsgzfibqpgmuxgqovtqnwczbibnrrxqvyckzrmhckzyugqq]; 			SUB(CASH,_hrbpatagjghidbmqqzrcmqpkouyeesqrccxeubdyswvokvovoyrengmueuthlmicc); 			[_item,true] spawn life_fnc_handleItem; 		}; 	} else { 		if(_hrbpatagjghidbmqqzrcmqpkouyeesqrccxeubdyswvokvovoyrengmueuthlmicc > CASH) exitWith {hint localize "STR_NOTF_NotEnoughMoney"}; 		hint parseText format[localize "STR_Shop_Weapon_BoughtItem",_pbrwpyeoyeqzvkfzuebnfdeurjberkxsmsbxhfptknesoaspsnmvzeajrpvdqiferuxyfk select 1,[_hrbpatagjghidbmqqzrcmqpkouyeesqrccxeubdyswvokvovoyrengmueuthlmicc] call life_fnc_ccxpkhrsgzfibqpgmuxgqovtqnwczbibnrrxqvyckzrmhckzyugqq]; 		CASH = CASH - _hrbpatagjghidbmqqzrcmqpkouyeesqrccxeubdyswvokvovoyrengmueuthlmicc; 		[_item,true] spawn life_fnc_handleItem; 		[5,(_pbrwpyeoyeqzvkfzuebnfdeurjberkxsmsbxhfptknesoaspsnmvzeajrpvdqiferuxyfk select 1),getPlayerUID player,true] remoteExec ["TON_fnc_biccwmelxtllyqsrgknditylbnatpufhkgtqkjtdchpuczoxztizsmr",2]; 		 		 		(_pbrwpyeoyeqzvkfzuebnfdeurjberkxsmsbxhfptknesoaspsnmvzeajrpvdqiferuxyfk select 1) spawn { 			if(isNil "boughtItemsArr") then {boughtItemsArr = [];}; 			boughtItemsArr pushBack _this; 			sleep 600; 			boughtItemsArr deleteAt ((count boughtItemsArr) - 1); 		}; 		 		if((uiNamespace getVariable ["Weapon_Shop",""]) == "donator") then { 			(_pbrwpyeoyeqzvkfzuebnfdeurjberkxsmsbxhfptknesoaspsnmvzeajrpvdqiferuxyfk select 1) spawn { 				if(isNil "boughtItemsDonor") then {boughtItemsDonor = []}; 				boughtItemsDonor pushBack [_this,getPos player]; 				sleep 600; 				boughtItemsDonor deleteAt ((count boughtItemsDonor) - 1); 			}; 		}; 	}; }; [] call life_fnc_wrkibhoprwgzzqikpvkmdebpbfywrjtnwqxfwowjwwgksrgsjlgjuyxnvxe; 