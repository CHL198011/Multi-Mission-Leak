
#include <macro.h>
 private["_zkirhvgukfxwajxnhkowcqmsixuheuzjgibixbxajkudjckhhikywpefdbeptr","_briplzftrhpkwbsswurlzuhyidbalwthsgisxmrueaciqnkwiqnvuwlbsbaqgjshrewvve","_gxzzdstrxsdacbjnjaeyuntciufwmtufwtsukzjrunzpweayzeqddfwpmlhzlbik","_irhshnivnuujkpezlnhddnhxnbadqjhrmirksveyppqnawhfkonzgsqqyuprnketklmn"]; _briplzftrhpkwbsswurlzuhyidbalwthsgisxmrueaciqnkwiqnvuwlbsbaqgjshrewvve = [_this,1,-1,[0]] call BIS_fnc_param; _shop = uiNamespace getVariable ["Weapon_Shop",""]; if(_briplzftrhpkwbsswurlzuhyidbalwthsgisxmrueaciqnkwiqnvuwlbsbaqgjshrewvve == -1 OR _shop == "") exitWith {systemChat "Bad Data Filter"; closeDialog 0;};   uiNamespace setVariable["Weapon_Shop_Filter",_briplzftrhpkwbsswurlzuhyidbalwthsgisxmrueaciqnkwiqnvuwlbsbaqgjshrewvve];   _irhshnivnuujkpezlnhddnhxnbadqjhrmirksveyppqnawhfkonzgsqqyuprnketklmn = ((findDisplay 38400) displayCtrl 38404); _irhshnivnuujkpezlnhddnhxnbadqjhrmirksveyppqnawhfkonzgsqqyuprnketklmn ctrlSetStructuredText parseText ""; _zkirhvgukfxwajxnhkowcqmsixuheuzjgibixbxajkudjckhhikywpefdbeptr = ((findDisplay 38400) displayCtrl 38403); lbClear _zkirhvgukfxwajxnhkowcqmsixuheuzjgibixbxajkudjckhhikywpefdbeptr;  switch (_briplzftrhpkwbsswurlzuhyidbalwthsgisxmrueaciqnkwiqnvuwlbsbaqgjshrewvve) do { 	case 0: 	{ 		_gxzzdstrxsdacbjnjaeyuntciufwmtufwtsukzjrunzpweayzeqddfwpmlhzlbik = [_shop] call life_fnc_kuhvuxgrfgkvstsrbwjiiqlhcuovjuwwdpzqwozmqxfhuwbfap; 		{ 				_itemInfo = [_x select 0] call life_fnc_ssxeemmhetnvsvebxscdwzoubpideoksemqkwcbexdhiozmqizhvq; 				_zkirhvgukfxwajxnhkowcqmsixuheuzjgibixbxajkudjckhhikywpefdbeptr lbAdd format["%1",if(isNil {_x select 1}) then {_itemInfo select 1} else {_x select 1}]; 				_zkirhvgukfxwajxnhkowcqmsixuheuzjgibixbxajkudjckhhikywpefdbeptr lbSetData[(lbSize _zkirhvgukfxwajxnhkowcqmsixuheuzjgibixbxajkudjckhhikywpefdbeptr)-1,_itemInfo select 0]; 				_zkirhvgukfxwajxnhkowcqmsixuheuzjgibixbxajkudjckhhikywpefdbeptr lbSetPicture[(lbSize _zkirhvgukfxwajxnhkowcqmsixuheuzjgibixbxajkudjckhhikywpefdbeptr)-1,_itemInfo select 2]; 				_zkirhvgukfxwajxnhkowcqmsixuheuzjgibixbxajkudjckhhikywpefdbeptr lbSetValue[(lbSize _zkirhvgukfxwajxnhkowcqmsixuheuzjgibixbxajkudjckhhikywpefdbeptr)-1,_x select 2]; 		} foreach (_gxzzdstrxsdacbjnjaeyuntciufwmtufwtsukzjrunzpweayzeqddfwpmlhzlbik select 1); 		 		((findDisplay 38400) displayCtrl 38405) ctrlSetText localize "STR_Global_Buy"; 	}; 	 	case 1: 	{ 		private["_oyflfqfzfqpaoddyskzhqhungixbcvixhdgvlrlwptnpwufhzomioznfmkuwtmc"]; 		_gxzzdstrxsdacbjnjaeyuntciufwmtufwtsukzjrunzpweayzeqddfwpmlhzlbik = []; 		_oyflfqfzfqpaoddyskzhqhungixbcvixhdgvlrlwptnpwufhzomioznfmkuwtmc = []; 		 		if(primaryWeapon player != "") then {_gxzzdstrxsdacbjnjaeyuntciufwmtufwtsukzjrunzpweayzeqddfwpmlhzlbik pushBack primaryWeapon player;}; 		if(secondaryWeapon player != "") then {_gxzzdstrxsdacbjnjaeyuntciufwmtufwtsukzjrunzpweayzeqddfwpmlhzlbik pushBack secondaryWeapon player;}; 		if(handgunWeapon player != "") then {_gxzzdstrxsdacbjnjaeyuntciufwmtufwtsukzjrunzpweayzeqddfwpmlhzlbik pushBack handgunWeapon player;}; 		 		 		_gxzzdstrxsdacbjnjaeyuntciufwmtufwtsukzjrunzpweayzeqddfwpmlhzlbik = _gxzzdstrxsdacbjnjaeyuntciufwmtufwtsukzjrunzpweayzeqddfwpmlhzlbik + primaryWeaponItems player; 		_gxzzdstrxsdacbjnjaeyuntciufwmtufwtsukzjrunzpweayzeqddfwpmlhzlbik = _gxzzdstrxsdacbjnjaeyuntciufwmtufwtsukzjrunzpweayzeqddfwpmlhzlbik + (assignedItems player); 		_gxzzdstrxsdacbjnjaeyuntciufwmtufwtsukzjrunzpweayzeqddfwpmlhzlbik = _gxzzdstrxsdacbjnjaeyuntciufwmtufwtsukzjrunzpweayzeqddfwpmlhzlbik + (uniformItems player); 		_gxzzdstrxsdacbjnjaeyuntciufwmtufwtsukzjrunzpweayzeqddfwpmlhzlbik = _gxzzdstrxsdacbjnjaeyuntciufwmtufwtsukzjrunzpweayzeqddfwpmlhzlbik + (vestItems player); 		_gxzzdstrxsdacbjnjaeyuntciufwmtufwtsukzjrunzpweayzeqddfwpmlhzlbik = _gxzzdstrxsdacbjnjaeyuntciufwmtufwtsukzjrunzpweayzeqddfwpmlhzlbik + (backPackItems player); 		 		((findDisplay 38400) displayCtrl 38405) ctrlSetText localize "STR_Global_Sell"; 		{ 			if(!(_x in _oyflfqfzfqpaoddyskzhqhungixbcvixhdgvlrlwptnpwufhzomioznfmkuwtmc) && _x != "") then 			{ 				_itemInfo = [_x] call life_fnc_ssxeemmhetnvsvebxscdwzoubpideoksemqkwcbexdhiozmqizhvq; 				_oyflfqfzfqpaoddyskzhqhungixbcvixhdgvlrlwptnpwufhzomioznfmkuwtmc pushBack _x; 				 				_itemCount = {_x == (_itemInfo select 0)} count _gxzzdstrxsdacbjnjaeyuntciufwmtufwtsukzjrunzpweayzeqddfwpmlhzlbik; 				if(_itemCount > 1) then 				{ 					_zkirhvgukfxwajxnhkowcqmsixuheuzjgibixbxajkudjckhhikywpefdbeptr lbAdd format["[%2] %1",_itemInfo select 1,_itemCount]; 				} 					else 				{ 					_zkirhvgukfxwajxnhkowcqmsixuheuzjgibixbxajkudjckhhikywpefdbeptr lbAdd format["%1",_itemInfo select 1]; 				}; 				_zkirhvgukfxwajxnhkowcqmsixuheuzjgibixbxajkudjckhhikywpefdbeptr lbSetData[(lbSize _zkirhvgukfxwajxnhkowcqmsixuheuzjgibixbxajkudjckhhikywpefdbeptr)-1,_itemInfo select 0]; 				_zkirhvgukfxwajxnhkowcqmsixuheuzjgibixbxajkudjckhhikywpefdbeptr lbSetPicture[(lbSize _zkirhvgukfxwajxnhkowcqmsixuheuzjgibixbxajkudjckhhikywpefdbeptr)-1,_itemInfo select 2]; 			}; 		} foreach _gxzzdstrxsdacbjnjaeyuntciufwmtufwtsukzjrunzpweayzeqddfwpmlhzlbik; 	}; };  if(isNil {_this select 0}) then {_zkirhvgukfxwajxnhkowcqmsixuheuzjgibixbxajkudjckhhikywpefdbeptr lbSetCurSel 0;}; 