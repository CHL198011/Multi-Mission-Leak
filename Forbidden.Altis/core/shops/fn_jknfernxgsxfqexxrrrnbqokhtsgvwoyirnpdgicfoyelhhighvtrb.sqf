
#include <macro.h>
 private["_type","_edwndfgmkhobmukhsuhipnkozmuzepskojlaegpuccldywbbjxxacwmfbszcvawgrsl","_jhguuvzgmaynqshjsgjooaggurzqcnvxjrgdwvzeufbdaawtzsajvgwgirwi","_dbatahrvwgbkxysozmeatnksxqntjxjyfyqxqpgbnimhqfbvwjgbmgmtssftlgqxsnod","_wqidyvbqpspoifgzoimxcvcymyqhsgcliaxdvjplddmrthjrwxwpyxeuezgcibpxohl","_ffjlzrvizkswzunfjpizytkpoqtuckjsloqfzoftsmwtbsimpinphxtmrfgtj","_sqmpqedomeuoxzjrckleteiehfolpuietuabujshhoyrhaspiptusacnmtcxjmrwatikw","_dvtzuqkdffwznwmzyogxyusatnpjupevtjomxrdtxzfipmohkznsonaejxascbirjgsmxz"]; if((lbCurSel 2401) == -1) exitWith {hint localize "STR_Shop_Virt_Nothing"}; _type = lbData[2401,(lbCurSel 2401)]; _edwndfgmkhobmukhsuhipnkozmuzepskojlaegpuccldywbbjxxacwmfbszcvawgrsl = lbValue[2401,(lbCurSel 2401)]; _jhguuvzgmaynqshjsgjooaggurzqcnvxjrgdwvzeufbdaawtzsajvgwgirwi = ctrlText 2404; if(!([_jhguuvzgmaynqshjsgjooaggurzqcnvxjrgdwvzeufbdaawtzsajvgwgirwi] call TON_fnc_isnumber)) exitWith {hint localize "STR_Shop_Virt_NoNum";}; _dbatahrvwgbkxysozmeatnksxqntjxjyfyqxqpgbnimhqfbvwjgbmgmtssftlgqxsnod = [_type,parseNumber(_jhguuvzgmaynqshjsgjooaggurzqcnvxjrgdwvzeufbdaawtzsajvgwgirwi),life_carryWeight,life_maxWeight] call life_fnc_wvdznvaqxsfdfvikfnyhkpoigxucyfqjhqtuchxgawxyvlxhru; _jhguuvzgmaynqshjsgjooaggurzqcnvxjrgdwvzeufbdaawtzsajvgwgirwi = parseNumber(_jhguuvzgmaynqshjsgjooaggurzqcnvxjrgdwvzeufbdaawtzsajvgwgirwi); if(_dbatahrvwgbkxysozmeatnksxqntjxjyfyqxqpgbnimhqfbvwjgbmgmtssftlgqxsnod <= 0) exitWith {hint localize "STR_NOTF_NoSpace"};  if((_type in ["anim_rabbit","anim_hen","anim_cock","anim_sheep","anim_goat","costume_rabbit","costume_hen","costume_cock","costume_sheep","costume_goat"]) && (call life_donatorlvl) < 4) exitWith { 	hint localize "STR_m_AnimalsVIPOnly"; };  _jhguuvzgmaynqshjsgjooaggurzqcnvxjrgdwvzeufbdaawtzsajvgwgirwi = _dbatahrvwgbkxysozmeatnksxqntjxjyfyqxqpgbnimhqfbvwjgbmgmtssftlgqxsnod; _ffjlzrvizkswzunfjpizytkpoqtuckjsloqfzoftsmwtbsimpinphxtmrfgtj = (nearestObjects[getPosATL player,["Land_u_Barracks_V2_F","Land_i_Barracks_V2_F"],25]) select 0; if((_edwndfgmkhobmukhsuhipnkozmuzepskojlaegpuccldywbbjxxacwmfbszcvawgrsl * _jhguuvzgmaynqshjsgjooaggurzqcnvxjrgdwvzeufbdaawtzsajvgwgirwi) > CASH && {!isNil "_ffjlzrvizkswzunfjpizytkpoqtuckjsloqfzoftsmwtbsimpinphxtmrfgtj" && {!isNil {grpPlayer getVariable "gang_bank"}} && {(grpPlayer getVariable "gang_bank") <= _edwndfgmkhobmukhsuhipnkozmuzepskojlaegpuccldywbbjxxacwmfbszcvawgrsl * _jhguuvzgmaynqshjsgjooaggurzqcnvxjrgdwvzeufbdaawtzsajvgwgirwi}}) exitWith {hint localize "STR_NOTF_NotEnoughMoney"};     _wqidyvbqpspoifgzoimxcvcymyqhsgcliaxdvjplddmrthjrwxwpyxeuezgcibpxohl = M_CONFIG(getText,"VirtualItems",_type,"displayName");  if(([true,_type,_jhguuvzgmaynqshjsgjooaggurzqcnvxjrgdwvzeufbdaawtzsajvgwgirwi] call life_fnc_obfjrnynfhghcglhujcjbgakxemxpjvrqczgxoeickhzvgovmtdbvr)) then { 	if(!isNil "_ffjlzrvizkswzunfjpizytkpoqtuckjsloqfzoftsmwtbsimpinphxtmrfgtj" && {!isNil {grpPlayer getVariable "gang_bank"}} && {(grpPlayer getVariable "gang_bank") >= _edwndfgmkhobmukhsuhipnkozmuzepskojlaegpuccldywbbjxxacwmfbszcvawgrsl} && {(grpPlayer getVariable "gang_owner") == getplayerUID player}) then { 		_action = [ 			format[(localize "STR_Shop_Virt_Gang_FundsMSG")+ "<br/><br/>" +(localize "STR_Shop_Virt_Gang_Funds")+ " <t color='#8cff9b'>$%1</t><br/>" +(localize "STR_Shop_Virt_YourFunds")+ " <t color='#8cff9b'>$%2</t>", 				[(grpPlayer getVariable "gang_bank")] call life_fnc_ccxpkhrsgzfibqpgmuxgqovtqnwczbibnrrxqvyckzrmhckzyugqq, 				[CASH] call life_fnc_ccxpkhrsgzfibqpgmuxgqovtqnwczbibnrrxqvyckzrmhckzyugqq 			], 			localize "STR_Shop_Virt_YourorGang", 			localize "STR_Shop_Virt_UI_GangFunds", 			localize "STR_Shop_Virt_UI_YourCash" 		] call BIS_fnc_guiMessage; 		if(_action) then { 			hint format[localize "STR_Shop_Virt_BoughtGang",_jhguuvzgmaynqshjsgjooaggurzqcnvxjrgdwvzeufbdaawtzsajvgwgirwi,(localize _wqidyvbqpspoifgzoimxcvcymyqhsgcliaxdvjplddmrthjrwxwpyxeuezgcibpxohl),[(_edwndfgmkhobmukhsuhipnkozmuzepskojlaegpuccldywbbjxxacwmfbszcvawgrsl * _jhguuvzgmaynqshjsgjooaggurzqcnvxjrgdwvzeufbdaawtzsajvgwgirwi)] call life_fnc_ccxpkhrsgzfibqpgmuxgqovtqnwczbibnrrxqvyckzrmhckzyugqq]; 			_funds = grpPlayer getVariable "gang_bank"; 			_funds = _funds - (_edwndfgmkhobmukhsuhipnkozmuzepskojlaegpuccldywbbjxxacwmfbszcvawgrsl * _jhguuvzgmaynqshjsgjooaggurzqcnvxjrgdwvzeufbdaawtzsajvgwgirwi); 			grpPlayer setVariable["gang_bank",_funds,true]; 			[[1,grpPlayer],"TON_fnc_muszyxpknqmsnmfjvlnsfcssjyonrsqzwlmsuqskphpbdcedpi",false,false] call life_fnc_MP; 		} else { 			if((_edwndfgmkhobmukhsuhipnkozmuzepskojlaegpuccldywbbjxxacwmfbszcvawgrsl * _jhguuvzgmaynqshjsgjooaggurzqcnvxjrgdwvzeufbdaawtzsajvgwgirwi) > CASH) exitWith {[false,_type,_jhguuvzgmaynqshjsgjooaggurzqcnvxjrgdwvzeufbdaawtzsajvgwgirwi] call life_fnc_obfjrnynfhghcglhujcjbgakxemxpjvrqczgxoeickhzvgovmtdbvr; hint localize "STR_NOTF_NotEnoughMoney";}; 			hint format[localize "STR_Shop_Virt_BoughtItem",_jhguuvzgmaynqshjsgjooaggurzqcnvxjrgdwvzeufbdaawtzsajvgwgirwi,(localize _wqidyvbqpspoifgzoimxcvcymyqhsgcliaxdvjplddmrthjrwxwpyxeuezgcibpxohl),[(_edwndfgmkhobmukhsuhipnkozmuzepskojlaegpuccldywbbjxxacwmfbszcvawgrsl * _jhguuvzgmaynqshjsgjooaggurzqcnvxjrgdwvzeufbdaawtzsajvgwgirwi)] call life_fnc_ccxpkhrsgzfibqpgmuxgqovtqnwczbibnrrxqvyckzrmhckzyugqq]; 			SUB(CASH,_edwndfgmkhobmukhsuhipnkozmuzepskojlaegpuccldywbbjxxacwmfbszcvawgrsl * _jhguuvzgmaynqshjsgjooaggurzqcnvxjrgdwvzeufbdaawtzsajvgwgirwi); 			 			if(life_shop_type == "icecream") then { 				_dvtzuqkdffwznwmzyogxyusatnpjupevtjomxrdtxzfipmohkznsonaejxascbirjgsmxz = var_base getVariable ["icecream_owner",""]; 				_sqmpqedomeuoxzjrckleteiehfolpuietuabujshhoyrhaspiptusacnmtcxjmrwatikw = [_dvtzuqkdffwznwmzyogxyusatnpjupevtjomxrdtxzfipmohkznsonaejxascbirjgsmxz] call life_fnc_isOnline; 				if!(isNull _sqmpqedomeuoxzjrckleteiehfolpuietuabujshhoyrhaspiptusacnmtcxjmrwatikw) then { 					[(_jhguuvzgmaynqshjsgjooaggurzqcnvxjrgdwvzeufbdaawtzsajvgwgirwi * _edwndfgmkhobmukhsuhipnkozmuzepskojlaegpuccldywbbjxxacwmfbszcvawgrsl),(localize _wqidyvbqpspoifgzoimxcvcymyqhsgcliaxdvjplddmrthjrwxwpyxeuezgcibpxohl),profileName] remoteExec ["life_fnc_ubpvoxdxahuxnyceiywmhvmbxqbrosehrzhnblfawzlgzabybxvopqbcnuev",_sqmpqedomeuoxzjrckleteiehfolpuietuabujshhoyrhaspiptusacnmtcxjmrwatikw]; 				}; 			}; 		}; 	} else { 		if((_edwndfgmkhobmukhsuhipnkozmuzepskojlaegpuccldywbbjxxacwmfbszcvawgrsl * _jhguuvzgmaynqshjsgjooaggurzqcnvxjrgdwvzeufbdaawtzsajvgwgirwi) > CASH) exitWith {hint localize "STR_NOTF_NotEnoughMoney"; [false,_type,_jhguuvzgmaynqshjsgjooaggurzqcnvxjrgdwvzeufbdaawtzsajvgwgirwi] call life_fnc_obfjrnynfhghcglhujcjbgakxemxpjvrqczgxoeickhzvgovmtdbvr;}; 		hint format[localize "STR_Shop_Virt_BoughtItem",_jhguuvzgmaynqshjsgjooaggurzqcnvxjrgdwvzeufbdaawtzsajvgwgirwi,(localize _wqidyvbqpspoifgzoimxcvcymyqhsgcliaxdvjplddmrthjrwxwpyxeuezgcibpxohl),[(_edwndfgmkhobmukhsuhipnkozmuzepskojlaegpuccldywbbjxxacwmfbszcvawgrsl * _jhguuvzgmaynqshjsgjooaggurzqcnvxjrgdwvzeufbdaawtzsajvgwgirwi)] call life_fnc_ccxpkhrsgzfibqpgmuxgqovtqnwczbibnrrxqvyckzrmhckzyugqq]; 		SUB(CASH,(_edwndfgmkhobmukhsuhipnkozmuzepskojlaegpuccldywbbjxxacwmfbszcvawgrsl * _jhguuvzgmaynqshjsgjooaggurzqcnvxjrgdwvzeufbdaawtzsajvgwgirwi)); 		 		if(life_shop_type == "icecream") then { 			_dvtzuqkdffwznwmzyogxyusatnpjupevtjomxrdtxzfipmohkznsonaejxascbirjgsmxz = var_base getVariable ["icecream_owner",""]; 			_sqmpqedomeuoxzjrckleteiehfolpuietuabujshhoyrhaspiptusacnmtcxjmrwatikw = [_dvtzuqkdffwznwmzyogxyusatnpjupevtjomxrdtxzfipmohkznsonaejxascbirjgsmxz] call life_fnc_isOnline; 			if!(isNull _sqmpqedomeuoxzjrckleteiehfolpuietuabujshhoyrhaspiptusacnmtcxjmrwatikw) then { 				[(_jhguuvzgmaynqshjsgjooaggurzqcnvxjrgdwvzeufbdaawtzsajvgwgirwi * _edwndfgmkhobmukhsuhipnkozmuzepskojlaegpuccldywbbjxxacwmfbszcvawgrsl),(localize _wqidyvbqpspoifgzoimxcvcymyqhsgcliaxdvjplddmrthjrwxwpyxeuezgcibpxohl),profileName] remoteExec ["life_fnc_ubpvoxdxahuxnyceiywmhvmbxqbrosehrzhnblfawzlgzabybxvopqbcnuev",_sqmpqedomeuoxzjrckleteiehfolpuietuabujshhoyrhaspiptusacnmtcxjmrwatikw]; 			}; 		}; 	}; 	[] call life_fnc_gkwnkgzsbctffywgfgpbmajtsysegtxuzzmismumlztegoeubohrgnimskcx; };  [0] call SOCK_fnc_ddjmbrftntgdwpptfaoymlxkcjyscjwhklmcfylqhrqrxtxznnh; [3] call SOCK_fnc_ddjmbrftntgdwpptfaoymlxkcjyscjwhklmcfylqhrqrxtxznnh; 