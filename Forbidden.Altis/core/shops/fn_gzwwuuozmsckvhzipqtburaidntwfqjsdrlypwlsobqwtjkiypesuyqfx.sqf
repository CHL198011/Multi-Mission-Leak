
#include <macro.h>
 private["_shop","_gtspzcrurnpknfkmqfddzxmibtmzxxrcxsmurfccrscmdbtuhpheoluebxpjcwagjcmzcd","_exmuznzciuvrdopywidgxciesymtduaimfqvcdkvfomjthgfoiabxuyqcyjoj","_qbwtrkhvlbyrgqwbnppwkfamfewmzjfzhnccjolecpnecfysiomhpbracdtsuyprjuwi","_eqdlbwdoouwpekrauyzteotnulbxaknavzsfctpnmvxfnlmatjvkruotrlfyhhqdds"]; _shop = [(_this select 3),0,"",[""]] call BIS_fnc_param; _gtspzcrurnpknfkmqfddzxmibtmzxxrcxsmurfccrscmdbtuhpheoluebxpjcwagjcmzcd = [(_this select 3),1,sideUnknown,[civilian]] call BIS_fnc_param; _exmuznzciuvrdopywidgxciesymtduaimfqvcdkvfomjthgfoiabxuyqcyjoj = [(_this select 3),2,"",["",[]]] call BIS_fnc_param; _qbwtrkhvlbyrgqwbnppwkfamfewmzjfzhnccjolecpnecfysiomhpbracdtsuyprjuwi = [(_this select 3),3,"",[""]] call BIS_fnc_param; _eqdlbwdoouwpekrauyzteotnulbxaknavzsfctpnmvxfnlmatjvkruotrlfyhhqdds = [(_this select 3),5,false,[true]] call BIS_fnc_param;  disableSerialization;  if(dialog) exitWith {}; if(_shop == "") exitWith {}; if(_gtspzcrurnpknfkmqfddzxmibtmzxxrcxsmurfccrscmdbtuhpheoluebxpjcwagjcmzcd != sideUnknown && {playerSide != _gtspzcrurnpknfkmqfddzxmibtmzxxrcxsmurfccrscmdbtuhpheoluebxpjcwagjcmzcd} && _shop != "kart_shop" && !(_shop == "civ_ship" && playerSide == independent)) exitWith {hint localize "STR_Shop_Veh_NotAllowed"}; if(_shop == "donator_car" && FETCH_CONST(life_donatorlvl) == 0) exitWith {hint "You are not a donator!";}; if(_shop == "reb_car" && FETCH_CONST(life_rebactive) == 0) exitWith {hint "You are not a rebel!";}; if(_shop == "reb_air" && FETCH_CONST(life_rebactive) == 0) exitWith {hint "You are not a rebel!";}; if(!createDialog "Life_Vehicle_Shop_v2") exitWith {};  life_veh_shop = [_shop,_exmuznzciuvrdopywidgxciesymtduaimfqvcdkvfomjthgfoiabxuyqcyjoj,_qbwtrkhvlbyrgqwbnppwkfamfewmzjfzhnccjolecpnecfysiomhpbracdtsuyprjuwi,_eqdlbwdoouwpekrauyzteotnulbxaknavzsfctpnmvxfnlmatjvkruotrlfyhhqdds];     if(_eqdlbwdoouwpekrauyzteotnulbxaknavzsfctpnmvxfnlmatjvkruotrlfyhhqdds) then { 	 	ctrlEnable [2309,false]; };   _cfg = M_CONFIG(getArray,"CarShops",_shop,"vehicles");  _control = CONTROL(2300,2302); lbClear _control;  ctrlShow [2330,false]; ctrlShow [2304,false];  ctrlSetText [2301,((_this select 3) select 4)]; if(leveling_xp > 15 && _shop in leveling_shopVar) then { 	_cfg = _cfg + leveling_vehicles; };  if(perk_31 == 1 && _shop in ["donator_car","cop_air"]) then { 	_cfg pushBack ["B_Heli_Transport_01_F", if(_shop == "donator_car") then {2000000} else {500000},"",[ "life_donatorlvl",1]]; };  if(perk_32 == 1 && _shop == "donator_car") then { 	_cfg pushBack ["B_MRAP_01_F", 1000000,"",[ "life_donatorlvl",1]]; };   { 	_className = SEL(_x,0); 	_basePrice = SEL(_x,1); 	_levelData = SEL(_x,3); 	_passOver = false; 	 	if(!isNil "_levelData" && {_var = GVAR_MNS (SEL(_levelData,0)); !(FETCH_CONST(_var) >= (SEL(_levelData,1)))}) then {_passOver = true;}; 	 	if(!_passOver) then { 		_vehicleInfo = [_className] call life_fnc_kpkljxhenyregyuwhjogwhhpduhoduwglcykakcycubjmxeooru; 		_control lbAdd (_vehicleInfo select 3); 		_control lbSetPicture [(lbSize _control)-1,(_vehicleInfo select 2)]; 		_control lbSetData [(lbSize _control)-1,str[_className,_basePrice,SEL(_x,2)]]; 		_control lbSetValue [(lbSize _control)-1,_ForEachIndex]; 	}; } foreach _cfg; 