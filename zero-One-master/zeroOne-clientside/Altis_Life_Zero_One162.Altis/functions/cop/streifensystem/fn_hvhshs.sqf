private['_qZe','_ElF','_JXV','_nMll','_euzm','_mlS','_KxLl','_VJc'];disableSerialization;_qZe = findDisplay 3400;if (isNull _qZe) exitWith {};_ElF = _qZe displayCtrl 3404;_JXV = _qZe displayCtrl 3405;_mlS = _qZe displayCtrl 3407;_nMll = lbData[3404,lbCurSel(3404)];lbClear _JXV;_KxLl = [];{ if(isPlayer _x && alive _x && (_x getVariable["ZbrguZt",""] isEqualTo _nMll)) then { _euzm = switch ((_x getVariable ["rank",0])) do { case 2: {"[Wachtmeister]"}; case 3: {"[Oberwachtmeister]"}; case 4: {"[Kommissar]"}; case 5: {"[Oberkommissar]"}; case 6: {"[Hauptkommissar]"}; case 7: {"[Polizeivorstand]"}; default {"[Rekrut]"}; }; _JXV lbAdd format ["%2 %1", _x getVariable["aOsyc",name _x],_euzm]; _JXV lbSetData[(lbSize _JXV)-1,str(_x)]; _KxLl = getPos _x; };} forEach units(group player);if(lbSize _JXV > 0) then { lbSort _JXV; [_mlS,0,0.03,_KxLl] call zero_fnc_YJp; _VJc = createMarkerLocal [_nMll, _KxLl]; _VJc setMarkerColorLocal "ColorBlue"; _VJc setMarkerTypeLocal "mil_box"; _VJc setMarkerTextLocal _nMll; _nMll spawn { waitUntil {_this != lbData[3404,lbCurSel(3404)] || isNull (findDisplay 3400)}; deleteMarkerLocal _this; };};