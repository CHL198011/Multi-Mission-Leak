private['_slk','_ppT','_UTzS','_LZiJ','_xswr','_LaY','_DvD','_TGO','_pxYw','_jCwI','_nRg','_wJFi'];_slk = param[0,ObjNull,[ObjNull]];if(!isNil "trunk_in_use") exitWith {};if(isNull _slk) exitWith {};if(!((_slk isKindOf "Air") || (_slk isKindOf "Ship") || (_slk isKindOf "LandVehicle"))) exitWith {};if(!isNil{_slk getVariable "searched"}) exitWith {hint "Das Fahrzeug wurde erst vor kurzem durchsucht. Warte 5 Minuten."};trunk_in_use = true;sendtrunk = [0,_slk,player,[],clientOwner];HC1_owner publicVariableClient "sendtrunk";sendtrunk = nil;hint "Durchsuche...";waitUntil {!isNil "sendtrunkre"};pfydWWfV = sendtrunkre;sendtrunkre =nil;_ppT = pfydWWfV;if(_ppT isEqualTo []) exitWith {hint localize "STR_Cop_VehEmpty"};if((typeName _ppT) isEqualTo (typeName "")) exitWith {hint localize "STR_MISC_VehInvUse";};_DvD = (_ppT select 0);_TGO = ["search"] call zero_fnc_KTrFY;_UTzS = 0;_pxYw = 0;_jCwI = 0;_nRg = 0;_wJFi = getArray(missionConfigFile >> "zero_CfgItems" >> "illegalItems");{ _LZiJ = _x select 0; _xswr = _x select 1; _LaY = [_LZiJ,_wJFi] call zero_fnc_oKzQhZKu; if(_LaY != -1) then { _random = random(100); if(_random > _TGO) then { _pxYw = round(_xswr * 0.5); _DvD set[_forEachIndex,[_LZiJ,_xswr-_pxYw]]; _nRg = (getNumber(missionConfigFile >> "zero_CfgItems" >> _LZiJ >> "weight")) * (_xswr-_pxYw); }else{ _pxYw = _xswr; _DvD set[_forEachIndex,[-1]]; _nRg = 0; }; _UTzS = _UTzS + (_pxYw * ((_wJFi select _LaY) select 1)); }else{ _nRg = (getNumber(missionConfigFile >> "zero_CfgItems" >> _LZiJ >> "weight")) * _xswr; }; _jCwI = _jCwI + _nRg; uiSleep 0.1;} forEach _DvD;_DvD = _DvD - [[-1]];_ppT set[0,_DvD];_ppT set[1,_jCwI];if(_UTzS > 0) then { [0,format[localize "STR_NOTF_VehContraband",[_UTzS] call zero_fnc_nAnP]] remoteExecCall ["zero_fnc_cpbpJzzAd",(allPlayers - entities "HeadlessClient_F")]; [0, ([2, 0] call zero_fnc_JNHrfnI) + _UTzS] call zero_fnc_JNHrfnI; hint format[localize "STR_NOTF_VehContraband",[_UTzS] call zero_fnc_nAnP];}else{ hint localize "STR_Cop_NoIllegalVeh";};sendtrunk = [1,_slk,player,_ppT,clientOwner];HC1_owner publicVariableClient "sendtrunk";sendtrunk = nil;trunk_in_use = nil;["search"] call zero_fnc_aCCCro;[_slk] spawn { (_this select 0) setVariable["searched",true,true]; uiSleep (5*60); (_this select 0) setVariable["searched",nil,true];};