private['_qhY','_PdK','_Wwzx','_lpEH','_IId','_HUG','_myk','_aQh','_Acx','_hzhD','_RYwY','_MGB'];disableSerialization;_qhY = koffer_last_change select 0;_lpEH = ctrlText ((findDisplay 3100) displayCtrl 3106);_Wwzx = koffer_last_change select 1;if(isNull Trunkcar OR !alive Trunkcar) exitWith {hint localize "STR_MISC_VehDoesntExist"};if(!alive player) exitwith {closeDialog 0;};if(!([_lpEH] call zero_fnc_uunyW)) exitWith {hint localize "STR_MISC_WrongNumFormat";};_lpEH = parseNumber(_lpEH);if(_lpEH < 1) exitWith {hint localize "STR_MISC_Under1";};if (_qhY isequalto ((findDisplay 3100) displayCtrl 3103)) then {  _aQh = lbData [3103,_Wwzx]; _hzhD = [(getNumber(missionConfigFile >> "zero_CfgVehicles" >> (typeOf Trunkcar) >> "trunk")),(pfydWWfV select 1)]; _myk = (getNumber(missionConfigFile >> "zero_CfgItems" >> _aQh >> "weight")) * _lpEH; _RYwY = pfydWWfV; _MGB = _RYwY select 0; if(((_hzhD select 1) + _myk) > (_hzhD select 0)) then { _lpEH = (_hzhD select 0) - (_hzhD select 1); _myk = (getNumber(missionConfigFile >> "zero_CfgItems" >> _aQh >> "weight")) * _lpEH; }; if(_lpEH isEqualTo 0) exitWith {hint localize "STR_MISC_NotEnoughSpace"}; if(!([false,_aQh,_lpEH] call zero_fnc_VJhZQOJ)) exitWith {hint localize "STR_MISC_TrunkError";}; _Acx = [_aQh,_MGB] call zero_fnc_oKzQhZKu; if(_Acx isEqualTo -1) then { _MGB pushBack [_aQh,_lpEH]; } else { _val = _MGB select _Acx select 1; _MGB set[_Acx,[_aQh,_val + _lpEH]]; }; pfydWWfV =[_MGB,(_RYwY select 1) + _myk]; [Trunkcar] call zero_fnc_oXydF;} else {  _aQh = lbData [3102,_Wwzx]; _Acx = [_aQh,(pfydWWfV select 0)] call zero_fnc_oKzQhZKu; _PdK = pfydWWfV select 0; _old = pfydWWfV; if(_Acx == -1) exitWith {}; _IId = (_PdK select _Acx) select 1; if(_lpEH > _IId) then {_lpEH = _lpEH - (_lpEH - _IId);}; if(_lpEH > _IId) exitWith {hint localize "STR_MISC_NotEnough"}; _lpEH = [_aQh,_lpEH,KtV,dZldvdq] call zero_fnc_Prk; if(_lpEH <= 0) exitWith {hint localize "STR_NOTF_InvFull"}; _HUG = ((getNumber(missionConfigFile >> "zero_CfgItems" >> _aQh >> "weight")) * _lpEH); if([true,_aQh,_lpEH] call zero_fnc_VJhZQOJ) then { _Acx = [_aQh,_PdK] call zero_fnc_oKzQhZKu; if(_lpEH == _IId) then {   _PdK deleteAt _Acx; } else { _PdK set[_Acx,[_aQh,(_IId - _lpEH)]]; }; pfydWWfV = [_PdK,(_old select 1) - _HUG]; [Trunkcar] call zero_fnc_oXydF; } else { hint localize "STR_NOTF_InvFull"; };};((findDisplay 3100) displayCtrl 3103) lbsetcursel -1;((findDisplay 3100) displayCtrl 3102) lbsetcursel -1;