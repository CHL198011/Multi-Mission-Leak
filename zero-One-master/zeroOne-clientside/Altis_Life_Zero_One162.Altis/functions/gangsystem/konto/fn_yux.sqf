private['_GlE','_Pgg','_spRL','_qZe','_ESMx','_kTg','_bUJ','_ogkW','_lUA','_nALz','_uLS','_Zuy','_fjL','_xtb','_qUNP','_lmDB'];disableserialization;if(((group player) getVariable["KBO",objNull]) != player) exitWith {hint "Jemand anderes greift auf das Gangkonto zu!"};if(!QOSphn) exitWith {hint localize "STR_NOTF_Transfer_Money";};if(QOSphn) then { QOSphn = false; [] spawn { uisleep 5; QOSphn = true; };};_GlE = (group player);_Pgg = _GlE getVariable ["HNCqyH",[]];if(_Pgg isEqualTo []) exitWith {hint "Du bist in keiner Gang"};if(count _Pgg < 7) exitWith {hint "Es ist ein Fehler aufgetreten"};_spRL = _Pgg select 5;_ogkW = lbData[3302,(lbCurSel 3302)];if(_ogkW isEqualTo "") exitWith {hint "Niemanden ausgewählt"};_ogkW = call compile _ogkW;if (isNull _ogkW) exitwith {hint "Niemanden ausgewählt"};createdialog "MDdjNKKV";_qZe = findDisplay 3200;if (isNull _qZe) exitwith {};_ESMx = _qZe displayCtrl 3202;_qUNP = _qZe displayCtrl 3201;_lmDB = _qZe displayCtrl 3204;_lUA = _qZe displayCtrl 3203;_lUA ctrlsettext "Überweisen";_lUA buttonSetAction "jDAY = true;";_ESMx ctrlSetStructuredText parseText format["<t align='center' size='1'>Bitte gib den gewünschten Betrag ein,<br/>den du an %1 überweisen möchten.</t>",_ogkW getVariable["aOsyc",name _ogkW]];_lmDB ctrlSetStructuredText parseText format["<t align='center' size='1'>Sie dürfen maximal 999.999€ überweisen!</t>"];while {true} do { _nALz = nil; _qUNP ctrlSetText ""; _uLS = ""; jDAY = false; waituntil {jDAY or isNull (findDisplay 3200)}; jDAY = nil; if (isNull (findDisplay 3200)) exitwith {}; _uLS = ctrlText _qUNP; if (_uLS isequalto "") then { _nALz = true; _lmDB ctrlSetStructuredText parseText format["<t align='center' size='1' color='#DC143C'>Das Eingabefeld ist leer.</t>"]; }else { if ((count _uLS) > 6) then { _nALz = true; _lmDB ctrlSetStructuredText parseText format["<t align='center' size='1' color='#DC143C'>Sie dürfen maximal 999.999€ überweisen.</t>"]; }else{ _fjL = toArray (_uLS); _xtb = toArray("0123456789"); { if !(_x in _xtb) exitwith { _nALz = true; _lmDB ctrlSetStructuredText parseText format["<t align='center' size='1' color='#DC143C'>Das Zeichen %1 ist nicht erlaubt!</t>",tostring [_x]]; } }foreach _fjL; _Zuy = parseNumber(_uLS); iF(_spRL < _Zuy) then { _nALz = true; _lmDB ctrlSetStructuredText parseText format["<t align='center' size='1' color='#DC143C'>So viel Geld hat deine Gang nicht! Es fehlen %1€</t>",[_Zuy - _spRL] call zero_fnc_nAnP]; }; }; }; if (isnil "_nALz") then { _Zuy = parseNumber(_uLS); _lmDB ctrlSetStructuredText parseText format["<t align='center' size='1' color='#EDF5F5'>Der Betrag %1€ wird überprüft!</t>",[_Zuy] call zero_fnc_nAnP]; _Pgg set[5,_spRL - _Zuy]; _GlE setVariable["HNCqyH",_Pgg,true]; hc_updateGang = [clientOwner,1,[_Pgg select 0,_Pgg select 5]]; HC1_owner publicVariableClient "hc_updateGang"; hc_updateGang = nil; _qZe = findDisplay 3300; _ESMx = _qZe displayCtrl 3301; _ESMx ctrlSetStructuredText parseText format["<t align='left' size='1.3'>Aktuell aktive Mitglieder:</t><t align='right' size='1.3'>%1€</t>",[_spRL - _Zuy] call zero_fnc_nAnP]; closeDialog 0; uiSleep 0.5; [_Zuy,format["Die Gang %1",_Pgg select 1],getPlayerUID player] remoteExecCall ["zero_fnc_sOGUHNZbt",_ogkW]; uiSleep 0.5; hint format["Der Betrag %1 wurde an %2 überwiesen!",[_Zuy] call zero_fnc_nAnP, _ogkW getVariable["aOsyc", name _ogkW]]; [format ["GANG TRANSFER: %1 (%3) hat %2 vom Gangkonto der Gang %4 erhalten. Gangkonto vorher %5, nachher %6", player getVariable["aOsyc", name player],[_Zuy] call zero_fnc_nAnP, playerSide,_Pgg select 1,[_spRL] call zero_fnc_nAnP,[_spRL - _Zuy] call zero_fnc_nAnP],"zo_log",false,false] call zero_fnc_fdEkiHoij; };};[] spawn zero_fnc_tdzoG;