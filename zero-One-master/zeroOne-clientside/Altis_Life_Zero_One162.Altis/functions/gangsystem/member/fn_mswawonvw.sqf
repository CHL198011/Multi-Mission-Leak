private['_eOPe','_CqX','_GlE','_Pgg','_qZe','_neu','_qUNP','_Kuaz','_DeFx','_FGh','_ddP','_DeiJ','_nALz','_fjL','_KzW','_MJi'];disableSerialization;_qZe = findDisplay 3400;if (isNull _qZe) exitwith {};_eOPe = _qZe displayCtrl 3405;if(lbCurSel _eOPe == -1) exitWith {hint "Du hast niemand ausgewählt!";};_CqX = _eOPe lbData (lbCurSel _eOPe);if(_CqX isEqualTo "") exitWith {hint "Es ist ein Fehler aufgetreten"};_GlE = (group player);_Pgg = _GlE getVariable ["HNCqyH",[]];if(count _Pgg < 7) exitWith {hint "Es ist ein Fehler aufgetreten"};_CqX = call compile _CqX;if (isNull _CqX) exitwith {hint "Niemanden ausgewählt"};if(getPlayerUID _CqX == (_Pgg select 2)) exitWith {hint "Den Owner kannst du nicht bearbeiten!"};_DeiJ = [getPlayerUID player, _Pgg select 3] call zero_fnc_oKzQhZKu;_MJi = (((_Pgg select 3) select _DeiJ) select 1);createdialog "MDdjNKKV";_qZe = findDisplay 3200;if (isNull _qZe) exitwith {};_neu = _qZe displayCtrl 3202;_qUNP = _qZe displayCtrl 3201;_Kuaz = _qZe displayCtrl 3204;_DeFx = _qZe displayCtrl 3203;_DeFx ctrlsettext "Bestätigen";_DeFx buttonSetAction "jDAY = true;";_neu ctrlSetStructuredText parseText format["<t align='center' size='1'>Bitte gib den gewünschten Rang für %1 ein.</t>",_CqX getVariable["aOsyc",name _CqX]];_Kuaz ctrlSetStructuredText parseText format["<t align='center' size='0.95'>Rang 0 nichts, Rang 1 Konto benutzen, Rang 2 Mitgliederverwaltung<br/>Rang 3 Kontoverwaltung, Rang 4 Hauptquatierverwaltung<br/>Rang 5 Name ändern, Rang 6 Gang auflösen</t>"];_FGh = "";while {true} do { _nALz = nil; _qUNP ctrlSetText ""; _FGh = ""; jDAY = false; waituntil {jDAY or isNull (findDisplay 3200)}; jDAY = nil; if (isNull (findDisplay 3200)) exitwith {}; _FGh = ctrlText _qUNP; if (_FGh isequalto "") then { _nALz = true; _Kuaz ctrlSetStructuredText parseText format["<t align='center' size='1' color='#DC143C'>Das Eingabefeld ist leer.</t>"]; }else { if ((parseNumber _FGh) > 6) then { _nALz = true; _Kuaz ctrlSetStructuredText parseText format["<t align='center' size='1' color='#DC143C'>Der Rang darf höchstens 6 sein.</t>"]; }else{ if((parseNumber _FGh) isEqualTo 6 && (getPlayerUID player != (_Pgg select 2))) then { _nALz = true; _Kuaz ctrlSetStructuredText parseText format["<t align='center' size='1' color='#DC143C'>Rang 6 darf nur der Owner der Gang vergeben!</t>"]; }else{ if(parseNumber _FGh > _MJi) then { _nALz = true; _Kuaz ctrlSetStructuredText parseText format["<t align='center' size='1' color='#DC143C'>Der Rang darf nicht höher als dein eigener sein!</t>"]; }else{ _fjL = toArray (_FGh); _KzW = toArray("0123456"); { if !(_x in _KzW) exitwith { _nALz = true; _Kuaz ctrlSetStructuredText parseText format["<t align='center' size='1' color='#DC143C'>Das Zeichen %1 ist im Rang nicht erlaubt!</t>",tostring [_x]]; } }foreach _fjL; }; }; }; }; if (isnil "_nALz") exitwith{}; };if (isNull (findDisplay 3200)) exitwith {};_FGh = parseNumber(_FGh);_ddP = _Pgg select 3;_DeiJ = [str(_CqX),yWrwsOCTN] call zero_fnc_oKzQhZKu;if(_DeiJ != -1) then { yWrwsOCTN set[_DeiJ, [str(_CqX),_FGh]];}else{ yWrwsOCTN pushBack [str(_CqX),_FGh];};_eOPe lbDelete (lbCurSel _eOPe);_eOPe lbAdd format ["%1 [%2]", _CqX getVariable["aOsyc",name _CqX],_FGh];_eOPe lbSetData [(lbSize _eOPe)-1,str(_CqX)];_eOPe lbSetColor [(lbSize _eOPe)-1, [0, 1, 0, 1]];lbSort _eOPe;closeDialog 0;