private['_GlE','_Pgg','_cuP','_SyJq','_qgjM','_qjfJ','_NjP','_gFie','_TFKD','_GGwj','_htk','_GLD','_yZIM','_cyOU','_qsvi'];disableSerialization;_GlE = (group player);_Pgg = _GlE getVariable ["HNCqyH",[]];if(_Pgg isEqualTo []) exitWith {hint "Du bist in keiner Gang"};if(count _Pgg < 7) exitWith {hint "Es ist ein Fehler aufgetreten"};_GLD = _Pgg select 5;_cuP = _Pgg select 6;_SyJq = _cuP select 0;if(_SyJq isEqualTo []) exitWith {hint "Es ist kein Hauptquatier eingetragen";};_yZIM = nearestBuilding _SyJq;_cyOU = round(player distance _yZIM);if(_cyOU > 30) exitWith {hint "Du bist zu weit vom Hauptquatier entfernt!"};(group player) setVariable["UpCFgjjI",player,true];_qgjM = param[0,50000000,[0]];_htk = param[1,false,[false]];uiSleep 0.5;hint parseText "<t size='1.2'>Du erhälst nun die Möglichkeit den Spawnpunkt für die Fahrzeuge der Garage festzulegen!<br/> Dabei gilt, dass dieser höchstens <t color='#FF0000'>20m</t> vom Haus entfernt sein darf!<br/> Der Pfeil gibt die Fahrtrichtung des Fahrzeugs an.<br/> Enter-Taste speichert die Positionierung<br/> ESC bricht die Aktion ab</t>";(group player) setVariable["UpCFgjjI",player,true];TllvcFX = "Sign_Arrow_Direction_F" createVehicleLocal (getPos player);TllvcFX enableSimulation false;TllvcFX attachTo [player,[0.1,1.1,0.3]];jLVS = [getPos TllvcFX, getDir TllvcFX];JytayQQQ = (findDisplay 46) displayAddEventHandler ["KeyDown", { if((_this select 1) == 28) then {mpQD = true;}; if((_this select 1) == 1) then {mpQD = false;}; }];_qjfJ = "Entfernung";5 cutRsc ["QLM","PLAIN"];_NjP = uiNamespace getVariable "QLM";_gFie = _NjP displayCtrl 38201;_TFKD = _NjP displayCtrl 38202;_TFKD ctrlSetText format["%1 %2m",_qjfJ,_cyOU];_gFie progressSetPosition (_cyOU/20);while {true} do { if(!alive player || _cyOU > 30) exitWith {_GGwj = true;}; if(!isNil "mpQD") exitWith {}; if(_cyOU <= 20) then {_TFKD ctrlSetTextColor [0,1,0,1]}; if(_cyOU > 20) then {_TFKD ctrlSetTextColor [1,0,0,1]}; _cyOU = round(player distance _yZIM); _gFie progressSetPosition (_cyOU/20); _TFKD ctrlSetText format["%1 %2m",_qjfJ,_cyOU]; jLVS = [getPos TllvcFX, getDir TllvcFX]; uiSleep 0.2;};5 cutText ["","PLAIN"];(group player) setVariable["UpCFgjjI",nil,true];deleteVehicle TllvcFX;(findDisplay 46) displayRemoveEventHandler ["KeyDown",JytayQQQ];if(!isNil "mpQD" && {!mpQD}) exitWith {mpQD = nil; hint "Du hast die Positionierung abgebrochen!";};mpQD = nil;if(_GlE != (group player) || !isNil "_GGwj" || _cyOU > 20) exitWith {hint "Du warst zu weit entfernt!";};_Pgg = (group player) getVariable ["HNCqyH",[]];_cuP = _Pgg select 6;if(_htk) then { _cuP set[2,jLVS]; hint "Der Spawnpunkt wurde erfolgreich verschoben!";}else{ _GLD = _Pgg select 5; if(_GLD < _qgjM) exitWith { _GGwj = true; hint format ["Deine Gang hat nicht genug Geld auf dem Konto. Es fehlen %1€", [_qgjM - _GLD] call zero_fnc_nAnP]; }; _GLD = _GLD - _qgjM; _Pgg set[5,_GLD]; _cuP pushBack jLVS; _qsvi = _cuP select 1; _qsvi pushBack "Garage"; _cuP set[1,_qsvi]; hint "Das Hauptquatier wurde erfolgreich um eine Garage erweitert";};jLVS = nil;if(!isNil "_GGwj") exitWith {};_Pgg set[6,_cuP];_GlE setVariable["HNCqyH",_Pgg,true];hc_updateGang = [clientOwner,5,[_Pgg select 0,_cuP,_Pgg select 5]];HC1_owner publicVariableClient "hc_updateGang";hc_updateGang = nil;[] spawn zero_fnc_tdzoG;