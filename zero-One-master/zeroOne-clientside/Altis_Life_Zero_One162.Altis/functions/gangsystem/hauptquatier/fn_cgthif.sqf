private['_yZIM','_GlE','_Pgg','_AgF','_poi','_mYmj','_iATT','_qZe','_VZg','_kTg','_hpY','_uQAh','_MTa'];_yZIM = param [0,"",[""]];disableSerialization;_GlE = (group player);_Pgg = _GlE getVariable ["HNCqyH",[]];if(_Pgg isEqualTo []) exitWith {hint "Du bist in keiner Gang"};if(count _Pgg < 7) exitWith {hint "Es ist ein Fehler aufgetreten"};if(typeName (_Pgg select(count _Pgg -1)) == "BOOL") exitWith {hint "Nicht für temporäre Gangs verfügbar!";};uiSleep random(0.75);if(!isNull (_GlE getVariable["UpCFgjjI",objNull])) exitWith {hint "Auf das Hausmenü wird bereits zugegriffen!"};_GlE setVariable["UpCFgjjI",player,true];_AgF = _Pgg select 6;_AgF = _AgF select 0;if(_AgF isEqualTo []) then { if(_yZIM isEqualTo "") then { createdialog "TWXCflNw"; _qZe = findDisplay 3300; if (isNull _qZe) exitwith {}; _VZg = _qZe displayCtrl 3301; _kTg = _qZe displayCtrl 3302; _hpY = _qZe displayCtrl 3303; _MTa = _qZe displayCtrl 3304; _VZg ctrlSetStructuredText parseText "<t align='left' size='1.3'>Bitte wähle ein Hauptquatier:</t>"; _hpY ctrlsettext "Auswählen"; _hpY buttonSetAction 'if(lbCurSel 3302 isEqualTo -1) exitWith {hint "Du hast nichts ausgewählt!"}; [lbData[3302,(lbCurSel 3302)]] spawn zero_fnc_CgTHif;(group player) setVariable["UpCFgjjI",nil,true];'; _MTa ctrlShow false; lbClear _kTg; { _uQAh = nearestBuilding (call compile format["%1", _x select 0]); if(!((typeOf _uQAh) in ["Land_i_Garage_V1_F","Land_i_Garage_V2_F"])) then { _poi = getText(configFile >> "CfgVehicles" >> (typeOf _uQAh) >> "displayName"); _kTg lbAdd format ["%1 - %2", _poi, mapGridPosition _uQAh]; _kTg lbSetData[(lbSize _kTg)-1, str(_x select 0)]; }; } forEach nLivuo; }else{ _yZIM = call compile format["%1",_yZIM]; _yZIM = nearestBuilding (call compile format["%1", _yZIM]); _poi = getText(configFile >> "CfgVehicles" >> (typeOf _yZIM) >> "displayName"); _mYmj = [ format["Möchtest du %1 - %2 als das Hauptquatier der Gang auswählen?",_poi, mapGridPosition _yZIM], "Hauptquatier auswählen", localize "STR_Global_Yes", localize "STR_Global_No" ] call BIS_fnc_guiMessage; if(!_mYmj) exitWith {}; _Pgg set[6,[getPosASLW _yZIM,[]]]; _yZIM setVariable["gangID",_Pgg select 0,true]; _GlE setVariable["HNCqyH",_Pgg,true]; hc_updateGang = [clientOwner,5,[_Pgg select 0,_Pgg select 6, _Pgg select 5]]; HC1_owner publicVariableClient "hc_updateGang"; hc_updateGang = nil; [str(getPosASLW _yZIM)] remoteExec ["zero_fnc_JpgVPuGa",units _GlE]; hint "Das Hauptquatier wurde aktualisiert!"; closeDialog 0; };}else{ [] spawn zero_fnc_SAEs;};[] spawn zero_fnc_tdzoG;[] spawn { uiSleep 0.5; waitUntil {isNull (findDisplay 3300)}; (group player) setVariable["UpCFgjjI",nil,true];};