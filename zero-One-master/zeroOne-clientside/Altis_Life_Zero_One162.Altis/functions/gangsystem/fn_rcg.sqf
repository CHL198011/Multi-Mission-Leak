private['_htk','_ijA','_qZe','_sZe','_qUNP','_JeOE','_Tqiz','_dcc','_cgU','_wsUe','_nALz','_iATT','_GGwj','_mYmj','_JeA','_bGME','_Pgg','_pLuu','_btP','_LhF','_fjL','_AGbK'];_Pgg = (group player) getVariable ["HNCqyH",[]];if(!(_Pgg isEqualTo [])) exitWith {hint "Du bist bereits in einer Gang"};_htk = param [0,0,[0]];disableSerialization;createDialog "MDdjNKKV";_qZe = findDisplay 3200;if (isNull _qZe) exitWith {};_qUNP = _qZe displayCtrl 3201;_sZe = _qZe displayCtrl 3202;_cgU = _qZe displayCtrl 3203;_cgU ctrlSetText "Überprüfen";_cgU buttonSetAction "jDAY = true;";_JeOE = _qZe displayCtrl 3204;_LhF = _qZe displayCtrl 3205;_sZe ctrlSetStructuredText parseText format["<t align='center' size='1'>Bitte gib deinen gewünschten <t color='#DC143C'> Gangnamen </t>ein.</t>"];_JeOE ctrlSetStructuredText parseText format["<t align='center' size='1'>Es sind nur <br/> Buchstaben, Zahlen, Leerzeichen und beschränkte Sonderzeichen erlaubt!</t>"];while {true} do { _nALz = nil; jDAY = false; _qUNP ctrlSetText ""; _Tqiz = ""; waitUntil {jDAY || isNull (findDisplay 3200)}; jDAY = nil; if (isNull (findDisplay 3200)) exitWith {_GGwj = true;}; _Tqiz = ctrlText _qUNP; if (_Tqiz isEqualTo "") then { _nALz = true; _JeOE ctrlSetStructuredText parseText format["<t align='center' size='1' color='#DC143C'>Das Eingabefeld ist leer.</t>"]; }else { if ((count _Tqiz) > 24) then { _nALz = true; _JeOE ctrlSetStructuredText parseText format["<t align='center' size='1' color='#DC143C'>Der Gangname ist länger als 24 Zeichen</t>"]; }else{ _fjL = toArray (_Tqiz); _AGbK = toArray("!#$%&()*+,-./0123456789<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_abcdefghijklmnopqrstuvwxyz{|}~ "); { if (!(_x in _AGbK)) exitWith { _nALz = true; _JeOE ctrlSetStructuredText parseText format["<t align='center' size='1' color='#DC143C'>Das Zeichen %1 ist im Gangnamen nicht erlaubt!</t>",toString [_x]]; }; }forEach _fjL; }; }; if (isNil "_nALz") then { _JeOE ctrlSetStructuredText parseText format["<t align='center' size='1' color='#EDF5F5'>Der Gangname %1 wird überprüft!</t>",_Tqiz]; hc_checkGangname = [clientOwner,0,_Tqiz]; HC1_owner publicVariableClient "hc_checkGangname"; hc_checkGangname = nil; waitUntil {!isNil "IGC"}; if (!(IGC isEqualTo [])) then { _nALz = true; _JeOE ctrlSetStructuredText parseText format["<t align='center' size='1' color='#DC143C'>Der Gangname %1 ist bereits belegt!</t>",_Tqiz]; IGC = nil; }; IGC = nil; }; if (isNil "_nALz") exitWith{}; };if (!isNil "_GGwj") exitWith {};_pLuu = if(_htk isEqualTo 0) then {25000}else{200000};_mYmj = [ parseText format["Möchtest du %1€ für das Erstellen der Gang <t color='#0BDA51'>%2</t> bezahlen?",[_pLuu] call zero_fnc_nAnP,_Tqiz], "Gang erstellen", localize "STR_Global_Yes", localize "STR_Global_No"] call BIS_fnc_guiMessage;if(!_mYmj) exitWith {closeDialog 0};if([2, 0] call zero_fnc_JNHrfnI < _pLuu) exitWith {hint format["Du hast nicht genug Geld auf der Bank. Es fehlen dir %1",[_pLuu - ([2, 0] call zero_fnc_JNHrfnI)] call zero_fnc_nAnP]; closeDialog 0};[0, ([2, 0] call zero_fnc_JNHrfnI) - _pLuu] call zero_fnc_JNHrfnI;_JeA = getPlayerUID player;_iATT = format ["%1%2",round random 9999,round random 9999];if(_htk isEqualTo 1) then {  _JeOE ctrlSetStructuredText parseText format["<t align='center' size='1' color='#EDF5F5'>Die Gang %1 wird erstellt!</t>",_Tqiz]; _cgU ctrlEnable false; _LhF ctrlEnable false; hc_newDeleteGang= [clientOwner,0,[_iATT,_Tqiz,_JeA,[[_JeA,6]],""]]; HC1_owner publicVariableClient "hc_newDeleteGang"; hc_newDeleteGang = nil; waitUntil {!isNil "IGC"}; IGC = nil; hint format ["Die permanente Gang %1 wurde erfolgreich erstellt. Der Owner ist %2",_Tqiz,player getVariable["aOsyc", name player]]; hc_updateGang = [clientOwner,8,[_iATT, getPlayerUID player, playerSide]]; HC1_owner publicVariableClient "hc_updateGang"; hc_updateGang = nil;}else{ hint format ["Die temporäre Gang %1 wurde erfolgreich erstellt. Der Owner ist %2",_Tqiz,player getVariable["aOsyc", name player]];};if(!isNil "_GGwj") exitWith {while {dialog} do {closeDialog 0;}; [0, ([2, 0] call zero_fnc_JNHrfnI) + _pLuu] call zero_fnc_JNHrfnI;};closeDialog 0;[player] joinSilent grpNull;player setRank "COLONEL";_bGME = [_iATT, _Tqiz,_JeA,[[_JeA,6,_JeA getVariable["aOsyc",name player]]],8,0,[[],[]],""];if(_htk isEqualTo 0) then {  _bGME pushBack true;};(group player) setVariable ["HNCqyH",_bGME,true];while {dialog} do {closeDialog 0;};