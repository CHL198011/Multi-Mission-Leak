params["_maximal","_genutzt","_display","_texto","_auswahl","_geld","_ok","_esc","_ende","_p","_befehlok","_befehlesc","_befehlmoney","_anzahl","_money"];if(typeName _maximal == "BOOL") exitWith { titleRsc ["RGB","PLAIN"]; (((uiNamespace getVariable "aWaQ") displayCtrl 5501) ctrlSetText "Die Ausspielung hat schon stattgefunden! Bitte versuche es morgen wieder.");};if (_maximal <= _genutzt) exitwith { titleRsc ["RGB","PLAIN"]; (((uiNamespace getVariable "aWaQ") displayCtrl 5501) ctrlSetText "Du hast schon die maximale Anzahl an Losen.");};createDialog "wKIkk";waituntil {!isNull findDisplay 2400};disableSerialization;_display = findDisplay 2400;_texto = _display displayCtrl 1100;_auswahl = _display displayCtrl 2100;_geld = _display displayCtrl 1101;_ok = _display displayCtrl 2400;_esc = _display displayCtrl 2401;_ende = true;_texto ctrlSetStructuredText parsetext format ["<t font='PuristaBold' size='1' color='#EDF5F5'>Du darfst maximal %1 Lose erwerben.<br/>Du hast f√ºr diese Spielrunde bereits %2 %3 erworben.</t>",_maximal,_genutzt,if(_genutzt isequalto 1)then {"Los"}else{"Lose"}];_p = 0;for "" from (_genutzt +1) to _maximal do { switch (true) do { case (GJZHuPDR *(_p +1) <= ([3, 0] call zero_fnc_JNHrfnI)) : { _p = _p+1; _auswahl lbadd format["%1 %2",_p,if(_p isequalto 1)then {"Los"}else{"Lose"}]; _auswahl lbSetValue [(_p-1),(_p*GJZHuPDR)]; }; default {}; };};if (_p isequalto 0) exitwith {(((uiNamespace getVariable "aWaQ") displayCtrl 5501) ctrlSetText "Wo ist nur das Geld hin!");};_auswahl lbSetCurSel 0;_befehlok =" _box =((findDisplay 2400) displayCtrl 2100); _anzahl = (lbCurSel _box)+1; _money = _box lbValue (lbCurSel _box); ravkQ = [_anzahl,_money]; closedialog 0;";_befehlesc =" ravkQ = [-1,-1]; closedialog 0;";_geld ctrlSetStructuredText parsetext format ["<t font='PuristaBold' size='1' color='#EDF5F5' shadow='1.5'>Ein Los kostet</t><t font='PuristaBold' size='1' color='#0BDA51' shadow='1.5'> %1 </t>",[GJZHuPDR] call zero_fnc_nAnP];_befehlmoney = " _box =((findDisplay 2400) displayCtrl 2100); _geld = ((findDisplay 2400) displayCtrl 1101); _money = _box lbValue (lbCurSel _box); _geld ctrlSetStructuredText parsetext format [ ""<t font='PuristaBold' size='1' color='#EDF5F5' shadow='1.5'>Die Lose kosten</t> <t font='PuristaBold' size='1' color='#0BDA51' shadow='1.5'> %1 </t>"",[_money] call zero_fnc_nAnP];";_ok ctrlAddEventHandler ["ButtonClick",_befehlok];_ok ctrlAddEventHandler ["LBSelChanged",_befehlmoney];_esc ctrlAddEventHandler ["ButtonClick",_befehlesc];waituntil {isNull findDisplay 2400};if (isnil "ravkQ") then {ravkQ=[-1,-1]};_anzahl = ravkQ param [0,-1,[0]];_money = ravkQ param [1,-1,[0]];if ((_anzahl isequalto -1) or (_money isequalto -1)) exitwith {};switch (true) do { case (_money <= ([3, 0] call zero_fnc_JNHrfnI)) : {[1, ([3, 0] call zero_fnc_JNHrfnI) - _money] call zero_fnc_JNHrfnI;[1] call zero_fnc_zAYQJ;}; default {_ende = false; titleRsc ["RGB","PLAIN"];(((uiNamespace getVariable "aWaQ") displayCtrl 5501) ctrlSetText "Wo ist nur das Geld hin!");};};ravkQ = nil;if (!_ende) exitwith {};hcsend = [5,getplayeruid player,_anzahl,clientowner,profilename];HC1_owner publicvariableclient "hcsend";hcsend = nil;