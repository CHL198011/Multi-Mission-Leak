private['_LPoU','_Mos','_ZTAZ','_oXPs','_LkJ'];_LPoU = param[0,"",[""]];_Mos = param[1,0,[0]];if(_LPoU == "" || _Mos == 0) exitWith {0};_oXPs = 0;_LkJ = [primaryWeapon player, secondaryWeapon player, handgunWeapon player];{ if(_oXPs != 0) exitWith {};  if(_x != "") then { _weapon = _x; _cfgInfo = [_weapon,"CfgWeapons"] call zero_fnc_NKBUBCzsG; _legacyItems = ((_cfgInfo select 10) + (_cfgInfo select 11) + (_cfgInfo select 12) + (_cfgInfo select 17)); _newItems = _cfgInfo select 14;  if(count _legacyItems > 0) then { for "_i" from 0 to (count _legacyItems)-1 do{ _legacyItems set[_i,toLower(_legacyItems select _i)]; }; if((toLower _LPoU) in _legacyItems) exitWith { _oXPs = switch(_weapon) do { case (primaryWeapon player): {1}; case (secondaryWeapon player): {2}; case (handgunWeapon player): {3}; default {0}; }; }; };  if(count _newItems > 0) then {  { if(_oXPs != 0) exitWith {}; _cfg = getNumber(configFile >> "CfgWeapons" >> _weapon >> "WeaponSlotsInfo" >> _x >> "compatibleItems" >> _LPoU); if(isNil "_cfg") then {_cfg = 0;}; if(_cfg == 1) exitWith { _oXPs = switch(_weapon) do { case (primaryWeapon player): {1}; case (secondaryWeapon player): {2}; case (handgunWeapon player): {3}; default {0}; }; }; } foreach _newItems; if(_oXPs != 0) exitWith {};  }; };} foreach _LkJ;_oXPs;