private['_nPMZ','_BQwR','_pQYM','_efef','_aFu','_QZqC','_bIwk','_GGwj','_UJpn','_zAnZ','_aUJR'];_nPMZ = cursorObject;iqEbELlj = false;if(isNull _nPMZ) exitwith {};_GGwj = { if(!(call(crvpV) > 0)) then { player addItem "ToolKit"; };};if(((_nPMZ isKindOf "Car") || (_nPMZ isKindOf "Ship") || (_nPMZ isKindOf "Air")) && ("ToolKit" in (items player))) then { _UJpn = (["repair"] call zero_fnc_KTrFY) select 0; player removeItem "ToolKit"; if(call(crvpV) > 0) then {player addItem "ToolKit";}; RuqfuBIBK = true; _bIwk = getText(configFile >> "CfgVehicles" >> (typeOf _nPMZ) >> "displayName"); _BQwR = format["Repariere %1",_bIwk]; disableSerialization; 5 cutRsc ["QLM","PLAIN"]; _pQYM = uiNameSpace getVariable "QLM"; _efef = _pQYM displayCtrl 38201; _aFu = _pQYM displayCtrl 38202; _aFu ctrlSetText format["%2 (1%1)...","%",_BQwR]; _efef progressSetPosition 0.01; _QZqC = 0; _aUJR = 0.01; if(playerSide isEqualTo independent) then { _aUJR = 0.05; } else { if(playerSide isEqualTo west) then { _aUJR = 0.02; }; }; for "_i" from 0 to 100 step 1 do { if(animationState player != "AinvPknlMstpsnonWnonDnon_medic_1" ) then { player action ["SwitchWeapon", player, player, 100]; player playMove "AinvPknlMstpsnonWnonDnon_medic_1"; player playActionNow "stop"; player playMove "AinvPknlMstpsnonWnonDnon_medic_1"; player playActionNow "stop"; player playMove "AinvPknlMstpsnonWnonDnon_medic_1"; }; uiSleep _UJpn; _QZqC = _QZqC + _aUJR; _efef progressSetPosition _QZqC; _aFu ctrlSetText format["%3 (%1%2)...",round(_QZqC * 100),"%",_BQwR]; if(_QZqC >= 1) exitWith {}; if(player != vehicle player || iqEbELlj || LpefeFfmA || !alive player) exitWith {}; }; 5 cutText ["","PLAIN"]; RuqfuBIBK = false; player playActionNow "stop"; if(iqEbELlj) exitWith { iqEbELlj = false; titleText[localize "STR_NOTF_ActionCancel","PLAIN"]; call _GGwj; }; if(player != vehicle player) exitWith { titleText[localize "STR_NOTF_VehicleGetOut","PLAIN"]; call _GGwj; }; _nPMZ setDamage 0; titleText[localize "STR_NOTF_VehicleRepaired","PLAIN"]; ["repair"] call zero_fnc_aCCCro; if(playerSide isEqualTo independent) then { [0, ([2, 0] call zero_fnc_JNHrfnI) + 2500] call zero_fnc_JNHrfnI; if(call(crvpV) > 4) exitWith {}; _zAnZ = (["repair"] call zero_fnc_KTrFY) select 1; if(random(100) > _zAnZ) then { if(!isNil "ayNN") exitWith { ayNN = nil; }; _nPMZ setDamage 0.3; hint "Ohje, da ist etwas am Auto kaputt gegangen..."; ayNN = 1; }; };}else{ hint "Du hast kein ToolKit dabei!";};