private['_GlE','_MJzA','_mYmj','_bSD','_NjF','_enNt','_gAa','_Nlr','_pjV','_Tqiz'];if((group player) getVariable["HNCqyH",[]] isEqualTo []) exitWith {titleText[localize "STR_GNOTF_CreateGang","PLAIN"];};_MJzA = (nearestObjects[getPosATL player,["Land_u_Barracks_V2_F","Land_i_Barracks_V2_F"],25]) select 0;_GlE = _MJzA getVariable ["gangOwner",grpNull];if(_GlE == (group player)) exitWith {titleText[localize "STR_GNOTF_Controlled","PLAIN"]};if((_MJzA getVariable ["inCapture",false])) exitWith {hint localize "STR_GNOTF_Captured";};if(!isNull _GlE) then { _Tqiz = (_GlE getVariable "HNCqyH") select 1; _mYmj = [ format[localize "STR_GNOTF_AlreadyControlled",_Tqiz], localize "STR_GNOTF_CurrentCapture", localize "STR_Global_Yes", localize "STR_Global_No" ] call BIS_fnc_guiMessage; _bSD = 0.0045;} else { _bSD = 0.0075;};if(!isNil "_mYmj" && {!_mYmj}) exitWith {titleText[localize "STR_GNOTF_CaptureCancel","PLAIN"];};RuqfuBIBK = true;disableSerialization;_gAa = localize "STR_GNOTF_Capturing";5 cutRsc ["QLM","PLAIN"];_pjV = uiNamespace getVariable "QLM";_enNt = _pjV displayCtrl 38201;_Nlr = _pjV displayCtrl 38202;_Nlr ctrlSetText format["%2 (1%1)...","%",_gAa];_enNt progressSetPosition 0.01;_NjF = 0.01;while {true} do { if(animationState player != "AinvPknlMstpSnonWnonDnon_medic_1") then { player playActionNow "stop"; player action ["SwitchWeapon", player, player, 100]; player playMove "AinvPknlMstpSnonWnonDnon_medic_1"; }; if(isNull _pjV) then { 5 cutRsc ["QLM","PLAIN"]; _pjV = uiNamespace getVariable "QLM"; _enNt = _pjV displayCtrl 38201; _Nlr = _pjV displayCtrl 38202; }; _NjF = _NjF + _bSD; _enNt progressSetPosition _NjF; _Nlr ctrlSetText format["%3 (%1%2)...",round(_NjF * 100),"%",_gAa]; _MJzA setVariable["inCapture",true,true]; if(_NjF >= 1 || !alive player || iqEbELlj || LpefeFfmA) exitWith {_MJzA setVariable["inCapture",false,true];}; uiSleep 0.55;};RuqfuBIBK = false;5 cutText ["","PLAIN"];player playActionNow "stop";if(!alive player || LpefeFfmA || (player getVariable["GHdlZHW",false])) exitWith {_MJzA setVariable["inCapture",false,true];};if(iqEbELlj) exitWith { iqEbELlj = false; titleText[localize "STR_GNOTF_CaptureCancel","PLAIN"]; _MJzA setVariable["inCapture",false,true];};titleText["Hideout wurde eingenommen.","PLAIN"];[[0,1],format[localize "STR_GNOTF_CaptureSuccess",player getVariable["aOsyc",name player],((group player) getVariable "HNCqyH") select 1]] remoteExecCall ["zero_fnc_cpbpJzzAd",(allPlayers - entities "HeadlessClient_F")];_MJzA setVariable["inCapture",false,true];_MJzA setVariable["gangOwner",(group player),true];