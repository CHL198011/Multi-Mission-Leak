private ['_timU','_pPMV','_PdK','_zTPg','_GTg','_nspL','_Fxuw','_tLLv','_nqyb'];disableSerialization;_timU = param[0,controlNull,[controlNull]];_pPMV = param[3,0,[0]];_PdK = param[4,[],[[]]];_PdK = _PdK select 0;_zTPg = toLower(_PdK select 2);if(_zTPg isEqualTo "") exitWith {};_GTg = toLower(_timU lbData 0);if(ctrlIDC _timU isEqualTo _pPMV) exitWith {};if(ctrlIDC _timU == 1613 && (((getNumber(configfile >> "CfgWeapons" >> _zTPg >> "ItemInfo" >> "type")) in [101,201,301,302]) || (isClass(configfile >> "CfgMagazines" >> _zTPg)))) exitWith {hint "Das passt hier nicht"};if(ctrlIDC _timU == 1612 && (!(_pPMV in [1613,1614,1615,1616,1617]))) exitWith {hint "Das passt hier nicht"};_nspL = (findDisplay 1000) displayCtrl 16014;_Fxuw = (findDisplay 1000) displayCtrl 16015;_tLLv = (findDisplay 1000) displayCtrl 1616;_nqyb = (findDisplay 1000) displayCtrl 1617;if(_pPMV isEqualTo 1612) then {  lbClear _timU; _timU lbAdd format [" %1",getText (configFile >> "CfgWeapons" >> _zTPg >> "displayName")]; _timU lbSetTooltip [lbSize(_timU) - 1, getText (configFile >> "CfgWeapons" >> _zTPg >> "displayName")]; _timU lbSetPicture [lbSize(_timU) - 1, getText (configFile >> "CfgWeapons" >> _zTPg >> "picture")]; _timU lbSetValue [lbSize(_timU) - 1, 1]; _timU lbSetData [lbSize(_timU) - 1, _zTPg]; [toLower(_zTPg),-1] call zero_fnc_ludDvGtx; if(!(_GTg isEqualTo "")) then { [toLower(_GTg),1] call zero_fnc_ludDvGtx; }; if((handgunWeapon player) != _zTPg) then { player addWeapon _zTPg; }; removeAllHandgunItems player; if((_nspL lbData 0) != "") then {player addHandgunItem (_nspL lbData 0)}; if((_Fxuw lbData 0) != "") then {player addHandgunItem (_Fxuw lbData 0)}; if((_tLLv lbData 0) != "") then {player addHandgunItem (_tLLv lbData 0)}; if((_nqyb lbData 0) != "") then {player addHandgunItem (_nqyb lbData 0)};}else{ _pPMV = ((findDisplay 1000) displayCtrl _pPMV); lbClear _pPMV; if((getNumber(configfile >> "CfgWeapons" >> _zTPg >> "ItemInfo" >> "type")) in [101,201,301,302]) then { _defaultPic = switch (getNumber(configfile >> "CfgWeapons" >> _zTPg >> "ItemInfo" >> "type")) do { case 101:{"\A3\Ui_f\data\GUI\Rsc\RscDisplayGear\ui_gear_muzzle_gs.paa"}; case 201:{"\A3\Ui_f\data\GUI\Rsc\RscDisplayGear\ui_gear_top_gs.paa"}; case 301:{"\A3\Ui_f\data\GUI\Rsc\RscDisplayGear\ui_gear_side_gs.paa"}; case 302:{"\A3\Ui_f\data\GUI\Rsc\RscDisplayGear\ui_gear_bipod_gs.paa"}; default{""}; }; _pPMV lbAdd ""; _pPMV lbSetPicture [lbSize(_pPMV) - 1,_defaultPic]; [toLower(_zTPg), 1] call zero_fnc_ludDvGtx; player removeHandgunItem _zTPg; }else{ if((_nspL lbData 0) != "") then { [toLower((_nspL lbData 0)),1] call zero_fnc_ludDvGtx; lbClear _nspL; _nspL lbAdd ""; _nspL lbSetPicture [lbSize(_nspL) - 1,"\A3\Ui_f\data\GUI\Rsc\RscDisplayGear\ui_gear_muzzle_gs.paa"]; }; if((_Fxuw lbData 0) != "") then { [toLower((_Fxuw lbData 0)),1] call zero_fnc_ludDvGtx; lbClear _Fxuw; _Fxuw lbAdd ""; _Fxuw lbSetPicture [lbSize(_Fxuw) - 1,"\A3\Ui_f\data\GUI\Rsc\RscDisplayGear\ui_gear_side_gs.paa"]; }; if((_tLLv lbData 0) != "") then { [toLower((_tLLv lbData 0)),1] call zero_fnc_ludDvGtx; lbClear _tLLv; _tLLv lbAdd ""; _tLLv lbSetPicture [lbSize(_tLLv) - 1,"\A3\Ui_f\data\GUI\Rsc\RscDisplayGear\ui_gear_top_gs.paa"]; }; if((_nqyb lbData 0) != "") then { [toLower((_nqyb lbData 0)),1] call zero_fnc_ludDvGtx; lbClear _nqyb; _nqyb lbAdd ""; _nqyb lbSetPicture [lbSize(_nqyb) - 1,"\A3\Ui_f\data\GUI\Rsc\RscDisplayGear\ui_gear_bipod_gs.paa"]; }; _pPMV lbAdd ""; _pPMV lbSetPicture [lbSize(_pPMV) - 1, "\A3\Ui_f\data\GUI\Rsc\RscDisplayGear\ui_gear_hgun_gs.paa"]; [toLower(_zTPg), 1] call zero_fnc_ludDvGtx; if(!((handgunMagazine player) isEqualTo [])) then {[toLower(((handgunMagazine player) select 0)), 1] call zero_fnc_ludDvGtx;}; player removeWeapon _zTPg; };};[] call zero_fnc_mHYaO;_timU lbSetCurSel -1;