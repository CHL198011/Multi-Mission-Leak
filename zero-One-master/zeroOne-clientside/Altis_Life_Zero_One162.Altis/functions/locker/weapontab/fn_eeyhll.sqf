private ['_bPp','_kOyB','_PdK','_Rnt','_GskZ','_nspL','_Fxuw','_tLLv','_nqyb'];disableSerialization;_bPp = param[0,controlNull,[controlNull]];_kOyB = param[3,0,[0]];_PdK = param[4,[],[[]]];_PdK = _PdK select 0;_Rnt = toLower(_PdK select 2);if(_Rnt isEqualTo "") exitWith {};_GskZ = toLower(_bPp lbData 0);if(ctrlIDC _bPp isEqualTo _kOyB) exitWith {};if(ctrlIDC _bPp == 1607 && (((getNumber(configfile >> "CfgWeapons" >> _Rnt >> "ItemInfo" >> "type")) in [101,201,301,302]) || (isClass(configfile >> "CfgMagazines" >> _Rnt)))) exitWith {hint "Das passt hier nicht"};if(ctrlIDC _bPp == 1606 && (!(_kOyB in [1607,1608,1609,1610,1611]))) exitWith {hint "Das passt hier nicht"};_nspL = (findDisplay 1000) displayCtrl 1608;_Fxuw = (findDisplay 1000) displayCtrl 1609;_tLLv = (findDisplay 1000) displayCtrl 1610;_nqyb = (findDisplay 1000) displayCtrl 1611;if(_kOyB isEqualTo 1606) then {  lbClear _bPp; _bPp lbAdd format [" %1",getText (configFile >> "CfgWeapons" >> _Rnt >> "displayName")]; _bPp lbSetTooltip [lbSize(_bPp) - 1, getText (configFile >> "CfgWeapons" >> _Rnt >> "displayName")]; _bPp lbSetPicture [lbSize(_bPp) - 1, getText (configFile >> "CfgWeapons" >> _Rnt >> "picture")]; _bPp lbSetValue [lbSize(_bPp) - 1, 1]; _bPp lbSetData [lbSize(_bPp) - 1, _Rnt]; [toLower(_Rnt),-1] call zero_fnc_ludDvGtx; if(!(_GskZ isEqualTo "")) then { [toLower(_GskZ),1] call zero_fnc_ludDvGtx; }; if((secondaryWeapon player) != _Rnt) then { player addWeapon _Rnt; }; if((_nspL lbData 0) != "") then {player addSecondaryWeaponItem (_nspL lbData 0)}else{player removeSecondaryWeaponItem ((secondaryWeaponItems player) select 0)}; if((_Fxuw lbData 0) != "") then {player addSecondaryWeaponItem (_Fxuw lbData 0)}else{player removeSecondaryWeaponItem ((secondaryWeaponItems player) select 1)}; if((_tLLv lbData 0) != "") then {player addSecondaryWeaponItem (_tLLv lbData 0)}else{player removeSecondaryWeaponItem ((secondaryWeaponItems player) select 2)}; if((_nqyb lbData 0) != "") then {player addSecondaryWeaponItem (_nqyb lbData 0)}else{player removeSecondaryWeaponItem ((secondaryWeaponItems player) select 3)};}else{ _kOyB = ((findDisplay 1000) displayCtrl _kOyB); lbClear _kOyB; if((getNumber(configfile >> "CfgWeapons" >> _Rnt >> "ItemInfo" >> "type")) in [101,201,301,302]) then { _defaultPic = switch (getNumber(configfile >> "CfgWeapons" >> _Rnt >> "ItemInfo" >> "type")) do { case 101:{"\A3\Ui_f\data\GUI\Rsc\RscDisplayGear\ui_gear_muzzle_gs.paa"}; case 201:{"\A3\Ui_f\data\GUI\Rsc\RscDisplayGear\ui_gear_top_gs.paa"}; case 301:{"\A3\Ui_f\data\GUI\Rsc\RscDisplayGear\ui_gear_side_gs.paa"}; case 302:{"\A3\Ui_f\data\GUI\Rsc\RscDisplayGear\ui_gear_bipod_gs.paa"}; default{""}; }; _kOyB lbAdd ""; _kOyB lbSetPicture [lbSize(_kOyB) - 1,_defaultPic]; [toLower(_Rnt), 1] call zero_fnc_ludDvGtx; player removeSecondaryWeaponItem _Rnt; }else{ if((_nspL lbData 0) != "") then { [toLower((_nspL lbData 0)), 1] call zero_fnc_ludDvGtx; lbClear _nspL; _nspL lbAdd ""; _nspL lbSetPicture [lbSize(_nspL) - 1,"\A3\Ui_f\data\GUI\Rsc\RscDisplayGear\ui_gear_muzzle_gs.paa"]; }; if((_Fxuw lbData 0) != "") then { [toLower((_Fxuw lbData 0)), 1] call zero_fnc_ludDvGtx; lbClear _Fxuw; _Fxuw lbAdd ""; _Fxuw lbSetPicture [lbSize(_Fxuw) - 1,"\A3\Ui_f\data\GUI\Rsc\RscDisplayGear\ui_gear_side_gs.paa"]; }; if((_tLLv lbData 0) != "") then { [toLower((_tLLv lbData 0)), 1] call zero_fnc_ludDvGtx; lbClear _tLLv; _tLLv lbAdd ""; _tLLv lbSetPicture [lbSize(_tLLv) - 1,"\A3\Ui_f\data\GUI\Rsc\RscDisplayGear\ui_gear_top_gs.paa"]; }; if((_nqyb lbData 0) != "") then { [toLower((_nqyb lbData 0)), 1] call zero_fnc_ludDvGtx; lbClear _nqyb; _nqyb lbAdd ""; _nqyb lbSetPicture [lbSize(_nqyb) - 1,"\A3\Ui_f\data\GUI\Rsc\RscDisplayGear\ui_gear_bipod_gs.paa"]; }; _kOyB lbAdd ""; _kOyB lbSetPicture [lbSize(_kOyB) - 1,"\A3\Ui_f\data\GUI\Rsc\RscDisplayGear\ui_gear_secondary_gs.paa"]; [toLower(_Rnt),1] call zero_fnc_ludDvGtx; if(!((secondaryWeaponMagazine player) isEqualTo [])) then {[toLower(((secondaryWeaponMagazine player) select 0)), 1] call zero_fnc_ludDvGtx;}; player removeWeapon _Rnt; };};[] call zero_fnc_mHYaO;_bPp lbSetCurSel -1;