private ['_IBY','_Mos','_Qkc','_DCKK','_PdK','_eyE','_glw','_SsK','_lSM','_eZfk','_cAX','_UBWM','_SJDd','_LZlM'];disableSerialization;_IBY = param[0,[],[[]]];_Mos = param[1,"",[""]];_Qkc = (_IBY param[0,controlNull,[controlNull]]);_DCKK = (_IBY param[3,0,[0]]);_PdK = (_IBY param[4,[],[[]]]);_PdK = _PdK select 0;_eyE = toLower(_PdK select 2);if(_eyE isEqualTo "") exitWith {};_glw = toLower(_Qkc lbData 0);_SsK = switch (_Mos) do { case "silencer": {101}; case "optic": {201}; case "pointer": {301}; case "bipod": {302}; default {-1};};if(ctrlIDC _Qkc isEqualTo _DCKK) exitWith {};if((getNumber(configfile >> "CfgWeapons" >> _eyE >> "ItemInfo" >> "type")) != _SsK || _DCKK != 1606) exitWith {hint "Das passt hier nicht"};if(_DCKK isEqualTo 1606) then {  _lSM = toLower(((findDisplay 1000) displayCtrl 1607) lbData 0); _lSM = configName(inheritsFrom (configfile >> "CfgWeapons" >> _lSM)); if(isClass (configFile >> "CfgWeapons" >> _lSM >> "WeaponSlotsInfo")) then { _eZfk = getArray(configFile >> "CfgWeapons" >> _lSM >> "WeaponSlotsInfo" >> "PointerSlot" >> "compatibleItems"); _cAX = getArray(configFile >> "CfgWeapons" >> _lSM >> "WeaponSlotsInfo" >> "CowsSlot" >> "compatibleItems"); _UBWM = getArray(configFile >> "CfgWeapons" >> _lSM >> "WeaponSlotsInfo" >> "MuzzleSlot" >> "compatibleItems"); _SJDd = getArray(configFile >> "CfgWeapons" >> _lSM >> "WeaponSlotsInfo" >> "UnderBarrelSlot" >> "compatibleItems"); _LZlM = []; {_LZlM set [_forEachIndex, toLower(_x)];} forEach (_eZfk + _cAX + _UBWM + _SJDd); if(!(_eyE in (_LZlM))) exitWith {hint "Das kannst du nicht an die Waffen anbringen"}; lbClear _Qkc; _Qkc lbAdd format [" %1",getText (configFile >> "CfgWeapons" >> _eyE >> "displayName")]; _Qkc lbSetTooltip [lbSize(_Qkc) - 1, getText (configFile >> "CfgWeapons" >> _eyE >> "displayName")]; _Qkc lbSetPicture [lbSize(_Qkc) - 1, getText (configFile >> "CfgWeapons" >> _eyE >> "picture")]; _Qkc lbSetValue [lbSize(_Qkc) - 1, 1]; _Qkc lbSetData [lbSize(_Qkc) - 1, _eyE]; [toLower(_eyE),-1] call zero_fnc_ludDvGtx; if(!(_glw isEqualTo "")) then { [toLower(_glw),1] call zero_fnc_ludDvGtx; }; player addSecondaryWeaponItem _eyE; };}else{ _DCKK = ((findDisplay 1000) displayCtrl _DCKK); lbClear _DCKK; _defaultPic = switch (getNumber(configfile >> "CfgWeapons" >> _eyE >> "ItemInfo" >> "type")) do { case 101:{"\A3\Ui_f\data\GUI\Rsc\RscDisplayGear\ui_gear_muzzle_gs.paa"}; case 201:{"\A3\Ui_f\data\GUI\Rsc\RscDisplayGear\ui_gear_top_gs.paa"}; case 301:{"\A3\Ui_f\data\GUI\Rsc\RscDisplayGear\ui_gear_side_gs.paa"}; case 302:{"\A3\Ui_f\data\GUI\Rsc\RscDisplayGear\ui_gear_bipod_gs.paa"}; default{""}; }; _DCKK lbAdd ""; _DCKK lbSetPicture [lbSize(_DCKK) - 1,_defaultPic]; [toLower(_eyE),1] call zero_fnc_ludDvGtx; player removeSecondaryWeaponItem _eyE;};[] call zero_fnc_mHYaO;_Qkc lbSetCurSel -1;