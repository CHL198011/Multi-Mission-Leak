private ['_nhkh','_xvn','_PdK','_cPAX','_xNfD','_nspL','_Fxuw','_tLLv','_nqyb'];disableSerialization;_nhkh = param[0,controlNull,[controlNull]];_xvn = param[3,0,[0]];_PdK = param[4,[],[[]]];_PdK = _PdK select 0;_cPAX = toLower(_PdK select 2);if(_cPAX isEqualTo "") exitWith {};_xNfD = toLower(_nhkh lbData 0);if(ctrlIDC _nhkh isEqualTo _xvn) exitWith {};if(ctrlIDC _nhkh == 1601 && (((getNumber(configfile >> "CfgWeapons" >> _cPAX >> "ItemInfo" >> "type")) in [101,201,301,302]) || (isClass(configfile >> "CfgMagazines" >> _cPAX)))) exitWith {hint "Das passt hier nicht"};if(ctrlIDC _nhkh == 1600 && (!(_xvn in [1601,1602,1603,1604,1605]))) exitWith {hint "Das passt hier nicht"};_nspL = (findDisplay 1000) displayCtrl 1602;_Fxuw = (findDisplay 1000) displayCtrl 1603;_tLLv = (findDisplay 1000) displayCtrl 1604;_nqyb = (findDisplay 1000) displayCtrl 1605;if(_xvn isEqualTo 1600) then {  lbClear _nhkh; _nhkh lbAdd format [" %1",getText (configFile >> "CfgWeapons" >> _cPAX >> "displayName")]; _nhkh lbSetTooltip [lbSize(_nhkh) - 1, getText (configFile >> "CfgWeapons" >> _cPAX >> "displayName")]; _nhkh lbSetPicture [lbSize(_nhkh) - 1, getText (configFile >> "CfgWeapons" >> _cPAX >> "picture")]; _nhkh lbSetValue [lbSize(_nhkh) - 1, 1]; _nhkh lbSetData [lbSize(_nhkh) - 1, _cPAX]; [toLower(_cPAX),-1] call zero_fnc_ludDvGtx; if(!(_xNfD isEqualTo "")) then { [toLower(_xNfD),1] call zero_fnc_ludDvGtx; }; if((primaryWeapon player) != _cPAX) then { player addWeapon _cPAX; }; removeAllPrimaryWeaponItems player; if((_nspL lbData 0) != "") then {player addPrimaryWeaponItem (_nspL lbData 0)}; if((_Fxuw lbData 0) != "") then {player addPrimaryWeaponItem (_Fxuw lbData 0)}; if((_tLLv lbData 0) != "") then {player addPrimaryWeaponItem (_tLLv lbData 0)}; if((_nqyb lbData 0) != "") then {player addPrimaryWeaponItem (_nqyb lbData 0)};}else{ _xvn = ((findDisplay 1000) displayCtrl _xvn); lbClear _xvn; if((getNumber(configfile >> "CfgWeapons" >> _cPAX >> "ItemInfo" >> "type")) in [101,201,301,302]) then { _defaultPic = switch (getNumber(configfile >> "CfgWeapons" >> _cPAX >> "ItemInfo" >> "type")) do { case 101:{"\A3\Ui_f\data\GUI\Rsc\RscDisplayGear\ui_gear_muzzle_gs.paa"}; case 201:{"\A3\Ui_f\data\GUI\Rsc\RscDisplayGear\ui_gear_top_gs.paa"}; case 301:{"\A3\Ui_f\data\GUI\Rsc\RscDisplayGear\ui_gear_side_gs.paa"}; case 302:{"\A3\Ui_f\data\GUI\Rsc\RscDisplayGear\ui_gear_bipod_gs.paa"}; default{""}; }; _xvn lbAdd ""; _xvn lbSetPicture [lbSize(_xvn) - 1,_defaultPic]; [toLower(_cPAX), 1] call zero_fnc_ludDvGtx; player removePrimaryWeaponItem _cPAX; }else{ if((_nspL lbData 0) != "") then { [toLower((_nspL lbData 0)),1] call zero_fnc_ludDvGtx; lbClear _nspL; _nspL lbAdd ""; _nspL lbSetPicture [lbSize(_nspL) - 1,"\A3\Ui_f\data\GUI\Rsc\RscDisplayGear\ui_gear_muzzle_gs.paa"]; }; if((_Fxuw lbData 0) != "") then { [toLower((_Fxuw lbData 0)),1] call zero_fnc_ludDvGtx; lbClear _Fxuw; _Fxuw lbAdd ""; _Fxuw lbSetPicture [lbSize(_Fxuw) - 1,"\A3\Ui_f\data\GUI\Rsc\RscDisplayGear\ui_gear_side_gs.paa"]; }; if((_tLLv lbData 0) != "") then { [toLower((_tLLv lbData 0)),1] call zero_fnc_ludDvGtx; lbClear _tLLv; _tLLv lbAdd ""; _tLLv lbSetPicture [lbSize(_tLLv) - 1,"\A3\Ui_f\data\GUI\Rsc\RscDisplayGear\ui_gear_top_gs.paa"]; }; if((_nqyb lbData 0) != "") then { [toLower((_nqyb lbData 0)),1] call zero_fnc_ludDvGtx; lbClear _nqyb; _nqyb lbAdd ""; _nqyb lbSetPicture [lbSize(_nqyb) - 1,"\A3\Ui_f\data\GUI\Rsc\RscDisplayGear\ui_gear_bipod_gs.paa"]; }; _xvn lbAdd ""; _xvn lbSetPicture [lbSize(_xvn) - 1, "\A3\Ui_f\data\GUI\Rsc\RscDisplayGear\ui_gear_primary_gs.paa"]; [toLower(_cPAX),1] call zero_fnc_ludDvGtx; if(!((primaryWeaponMagazine player) isEqualTo [])) then {[toLower(((primaryWeaponMagazine player) select 0)), 1] call zero_fnc_ludDvGtx;}; player removeWeapon _cPAX; };};[] call zero_fnc_mHYaO;_nhkh lbSetCurSel -1;