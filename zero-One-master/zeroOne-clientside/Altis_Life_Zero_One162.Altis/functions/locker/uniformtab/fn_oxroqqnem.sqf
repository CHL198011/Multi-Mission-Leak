private ['_UiC','_xmnw','_PdK','_TEH','_sxdy','_jHm','_FmDy'];disableSerialization;_UiC = param[0,controlNull,[controlNull]];_xmnw = param[3,0,[0]];_PdK = param[4,[],[[]]];_PdK = _PdK select 0;_TEH = toLower(_PdK select 2);_sxdy = toLower(_UiC lbData 0);if(_TEH isEqualTo "") exitWith {};if(ctrlIDC _UiC == 1504 && _xmnw != 1505 || ctrlIDC _UiC == 1505 && _xmnw != 1504) exitWith {hint "Das passt hier nicht"};_jHm = uniformItems player;if(_xmnw isEqualTo 1504) then {  lbClear _UiC; _UiC lbAdd format [" %1",getText (configFile >> "CfgWeapons" >> _TEH >> "displayName")]; _UiC lbSetTooltip [lbSize(_UiC) - 1, getText (configFile >> "CfgWeapons" >> _TEH >> "displayName")]; _UiC lbSetPicture [lbSize(_UiC) - 1, getText (configFile >> "CfgWeapons" >> _TEH >> "picture")]; _UiC lbSetValue [lbSize(_UiC) - 1, 1]; _UiC lbSetData [lbSize(_UiC) - 1, _TEH]; [toLower(_TEH),-1] call zero_fnc_ludDvGtx; if(!(_sxdy isEqualTo "")) then { [toLower(_sxdy),1] call zero_fnc_ludDvGtx; }; if(_TEH != (uniform player)) then { player forceAddUniform _TEH; if(!(_jHm isEqualTo [])) then { { _FmDy = if(typeName _x == "ARRAY") then {toLower(_x select 0)}else{toLower(_x)}; if(_FmDy != "") then { if(player canAddItemToUniform _FmDy) then { player addItemToUniform _FmDy; }else{ [toLower(_FmDy),1] call zero_fnc_ludDvGtx; }; }; } forEach _jHm; }; };}else{ _xmnw = ((findDisplay 1000) displayCtrl _xmnw); lbClear _xmnw; _xmnw lbAdd ""; _xmnw lbSetPicture [lbSize(_xmnw) - 1, "\A3\Ui_f\data\GUI\Rsc\RscDisplayGear\ui_gear_uniform_gs.paa"]; [toLower(_TEH),1] call zero_fnc_ludDvGtx; removeUniform player; if(!(_jHm isEqualTo [])) then { { _FmDy = if(typeName _x == "ARRAY") then {toLower(_x select 0)}else{toLower(_x)}; if(_FmDy != "") then { [toLower(_FmDy),1] call zero_fnc_ludDvGtx; }; } forEach _jHm; };};[] call zero_fnc_gWt;_UiC lbSetCurSel -1;