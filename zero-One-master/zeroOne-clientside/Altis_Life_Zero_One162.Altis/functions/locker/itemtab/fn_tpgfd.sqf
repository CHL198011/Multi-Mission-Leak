private ['_kTg','_CrWS','_ldd','_sgZ','_TjhN','_LPoU','_kxGn','_ZNO','_jOW','_FmDy'];disableSerialization;_kTg = param[0,controlNull,[controlNull]];_CrWS = lbCurSel _kTg;_ldd = _kTg lbData _CrWS;if(_ldd isEqualTo "") exitWith {};if(isClass (configFile >> "CfgVehicles" >> _ldd)) exitWith {hint "Rucks채cke kannst du nicht hinzuf체gen"};_sgZ = (findDisplay 1000) getVariable "nfwCPuCZC";if((ctrlIDC _kTg) isEqualTo 1700) then {  if(!(player canAdd _ldd)) exitWith {hint "So viele Items kannst du nicht tragen";}; _TjhN = false; { _CrWS = [toLower(_ldd),_x] call zero_fnc_oKzQhZKu; if(!(_CrWS isEqualTo -1)) exitWith { _LPoU = _x select _CrWS; if((_LPoU select 1) < 1) exitWith {hint "So viele Items hast du nicht";}; if((_LPoU select 1) isEqualTo 1) then { _x deleteAt _CrWS; }else{ _x set[_CrWS,[toLower(_LPoU select 0), (_LPoU select 1) - 1]]; }; _TjhN = true; }; } forEach CtjFPq; if(!_TjhN) exitWith {}; _CrWS = [toLower(_ldd),_sgZ] call zero_fnc_oKzQhZKu; if(_CrWS isEqualTo -1) then { _sgZ pushBack [toLower(_ldd),1]; }else{ _LPoU = _sgZ select _CrWS; _sgZ set[_CrWS,[toLower(_LPoU select 0), (_LPoU select 1) + 1]]; }; player addItem _ldd;}else{ _CrWS = [toLower(_ldd),_sgZ] call zero_fnc_oKzQhZKu; if(_CrWS isEqualTo -1) exitWith {}; _LPoU = _sgZ select _CrWS; if((_LPoU select 1) < 1) exitWith {hint "So viele Item hast du nicht";}; if((_LPoU select 1) isEqualTo 1) then { _sgZ deleteAt _CrWS; }else{ _sgZ set[_CrWS,[toLower(_LPoU select 0), (_LPoU select 1) - 1]]; }; if([_ldd] call zero_fnc_ludDvGtx) then { _kxGn = []; { _kxGn pushBack toLower(_x); } forEach (assignedItems player); if(_ldd in _kxGn) then {player unassignItem _ldd;}; player removeItem _ldd; };};(findDisplay 1000) setVariable["nfwCPuCZC",_sgZ];_ZNO = (findDisplay 1000) displayCtrl 1700;_jOW = (findDisplay 1000) displayCtrl 1701;lbClear _ZNO;lbClear _jOW;{ { _FmDy = toLower(_x select 0); if (_FmDy != "") then { _count = (_x select 1); _cfg = switch (true) do { case (isClass (configFile >> "CfgWeapons" >> _FmDy)):{"CfgWeapons"}; case (isClass (configFile >> "CfgVehicles" >> _FmDy)):{"CfgVehicles"}; case (isClass (configFile >> "CfgGlasses" >> _FmDy)):{"CfgGlasses"}; case (isClass (configFile >> "CfgMagazines" >> _FmDy)):{"CfgMagazines"}; }; _ZNO lbAdd format ["%2 (%1)", _count, getText (configFile >> _cfg >> _FmDy >> "displayName")]; _ZNO lbSetTooltip [lbSize(_ZNO) - 1, format ["%2 (%1)", _count, getText (configFile >> _cfg >> _FmDy >> "displayName")]]; _ZNO lbSetPicture [lbSize(_ZNO) - 1, getText (configFile >> _cfg >> _FmDy >> "picture")]; _ZNO lbSetValue [lbSize(_ZNO) - 1, _count]; _ZNO lbSetData [lbSize(_ZNO) - 1, _FmDy]; }; } forEach _x;} forEach CtjFPq;{ _FmDy = toLower(_x select 0); if (_FmDy != "") then { _count = (_x select 1); _cfg = switch (true) do { case (isClass (configFile >> "CfgWeapons" >> _FmDy)):{"CfgWeapons"}; case (isClass (configFile >> "CfgVehicles" >> _FmDy)):{"CfgVehicles"}; case (isClass (configFile >> "CfgGlasses" >> _FmDy)):{"CfgGlasses"}; case (isClass (configFile >> "CfgMagazines" >> _FmDy)):{"CfgMagazines"}; }; _jOW lbAdd format ["%2 (%1)", _count, getText (configFile >> _cfg >> _FmDy >> "displayName")]; _jOW lbSetTooltip [lbSize(_jOW) - 1, format ["%2 (%1)", _count, getText (configFile >> _cfg >> _FmDy >> "displayName")]]; _jOW lbSetPicture [lbSize(_jOW) - 1, getText (configFile >> _cfg >> _FmDy >> "picture")]; _jOW lbSetValue [lbSize(_jOW) - 1, _count]; _jOW lbSetData [lbSize(_jOW) - 1, _FmDy]; };} forEach _sgZ;lbSort _ZNO;lbSort _jOW;if((lbSize(_ZNO) - 1) isEqualTo -1) then {_ZNO lbAdd "Keine Items verf체gbar";};if((lbSize(_jOW) - 1) isEqualTo -1) then {_jOW lbAdd "Keine Items verf체gbar";};_ZNO lbSetCurSel -1;_jOW lbSetCurSel -1;