private ['_HdEP','_PPgu','_PdK','_ldd','_wnc','_uuBd','_LPoU','_FJvJ','_kYO','_YSm','_FTa','_FmDy'];disableSerialization;_HdEP = param[0,controlNull,[controlNull]];_PPgu = param[3,0,[0]];_PdK = param[4,[],[[]]];_PdK = _PdK select 0;_ldd = toLower(_PdK select 2);if(_ldd isEqualTo "") exitWith {};if(ctrlIDC _HdEP == 1700 && (_PPgu != 1701)) exitWith {hint "Das passt hier nicht"};if(isClass (configFile >> "CfgVehicles" >> _ldd)) exitWith {hint "Rucks채cke kannst du nicht hinzuf체gen"};_wnc = (findDisplay 1000) getVariable "nfwCPuCZC";if(_PPgu isEqualTo 1700) then {  if(!(player canAdd _ldd)) exitWith {hint "So viele Items kannst du nicht tragen";}; _FJvJ = false; { _uuBd = [toLower(_ldd),_x] call zero_fnc_oKzQhZKu; if(!(_uuBd isEqualTo -1)) exitWith { _LPoU = _x select _uuBd; if((_LPoU select 1) < 1) exitWith {hint "So viele Items hast du nicht";}; if((_LPoU select 1) isEqualTo 1) then { _x deleteAt _uuBd; }else{ _x set[_uuBd,[toLower(_LPoU select 0), (_LPoU select 1) - 1]]; }; _FJvJ = true; }; } forEach CtjFPq; if(!_FJvJ) exitWith {}; _uuBd = [toLower(_ldd),_wnc] call zero_fnc_oKzQhZKu; if(_uuBd isEqualTo -1) then { _wnc pushBack [toLower(_ldd),1]; }else{ _LPoU = _wnc select _uuBd; _wnc set[_uuBd,[toLower(_LPoU select 0), (_LPoU select 1) + 1]]; }; player addItem _ldd;}else{ _uuBd = [toLower(_ldd),_wnc] call zero_fnc_oKzQhZKu; if(_uuBd isEqualTo -1) exitWith {}; _LPoU = _wnc select _uuBd; if((_LPoU select 1) < 1) exitWith {hint "So viele Item hast du nicht";}; if((_LPoU select 1) isEqualTo 1) then { _wnc deleteAt _uuBd; }else{ _wnc set[_uuBd,[toLower(_LPoU select 0), (_LPoU select 1) - 1]]; }; if([_ldd] call zero_fnc_ludDvGtx) then { _FTa = []; { _FTa pushBack toLower(_x); } forEach (assignedItems player); if(_ldd in _FTa) then {player unassignItem _ldd;}; player removeItem _ldd; };};(findDisplay 1000) setVariable["nfwCPuCZC",_wnc];_kYO = (findDisplay 1000) displayCtrl 1700;_YSm = (findDisplay 1000) displayCtrl 1701;lbClear _kYO;lbClear _YSm;{ { _FmDy = toLower(_x select 0); if (_FmDy != "") then { _count = (_x select 1); _cfg = switch (true) do { case (isClass (configFile >> "CfgWeapons" >> _FmDy)):{"CfgWeapons"}; case (isClass (configFile >> "CfgVehicles" >> _FmDy)):{"CfgVehicles"}; case (isClass (configFile >> "CfgGlasses" >> _FmDy)):{"CfgGlasses"}; case (isClass (configFile >> "CfgMagazines" >> _FmDy)):{"CfgMagazines"}; }; _kYO lbAdd format ["%2 (%1)", _count, getText (configFile >> _cfg >> _FmDy >> "displayName")]; _kYO lbSetTooltip [lbSize(_kYO) - 1, format ["%2 (%1)", _count, getText (configFile >> _cfg >> _FmDy >> "displayName")]]; _kYO lbSetPicture [lbSize(_kYO) - 1, getText (configFile >> _cfg >> _FmDy >> "picture")]; _kYO lbSetValue [lbSize(_kYO) - 1, _count]; _kYO lbSetData [lbSize(_kYO) - 1, _FmDy]; }; } forEach _x;} forEach CtjFPq;{ _FmDy = toLower(_x select 0); if (_FmDy != "") then { _count = (_x select 1); _cfg = switch (true) do { case (isClass (configFile >> "CfgWeapons" >> _FmDy)):{"CfgWeapons"}; case (isClass (configFile >> "CfgVehicles" >> _FmDy)):{"CfgVehicles"}; case (isClass (configFile >> "CfgGlasses" >> _FmDy)):{"CfgGlasses"}; case (isClass (configFile >> "CfgMagazines" >> _FmDy)):{"CfgMagazines"}; }; _YSm lbAdd format ["%2 (%1)", _count, getText (configFile >> _cfg >> _FmDy >> "displayName")]; _YSm lbSetTooltip [lbSize(_YSm) - 1, format ["%2 (%1)", _count, getText (configFile >> _cfg >> _FmDy >> "displayName")]]; _YSm lbSetPicture [lbSize(_YSm) - 1, getText (configFile >> _cfg >> _FmDy >> "picture")]; _YSm lbSetValue [lbSize(_YSm) - 1, _count]; _YSm lbSetData [lbSize(_YSm) - 1, _FmDy]; };} forEach _wnc;lbSort _kYO;lbSort _YSm;if((lbSize(_kYO) - 1) isEqualTo -1) then {_kYO lbAdd "Keine Items verf체gbar";};if((lbSize(_YSm) - 1) isEqualTo -1) then {_YSm lbAdd "Keine Items verf체gbar";};_kYO lbSetCurSel -1;_YSm lbSetCurSel -1;