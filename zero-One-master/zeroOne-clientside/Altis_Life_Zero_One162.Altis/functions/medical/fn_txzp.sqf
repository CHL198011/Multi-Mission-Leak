private['_VNGM','_qUNP','_LzJH','_WUUW','_tjR','_QUGw','_iLYO','_YFM','_VJc','_kMp'];_VNGM = [];_qUNP = "";_tjR = [];_LzJH = "";_WUUW = "";_iLYO = "";_YFM = "";uisleep 0.3;if(visibleMap) then { { if(!(_x getVariable["GHdlZHW",false]) && (alive _x) && !(_x in _tjR)) then { _WUUW = switch ((_x getVariable ["rank",0])) do { case 2: {"[Feuerwehrmann]"}; case 3: {"[Oberfeuerwehrmann]"}; case 4: {"[Unterbrandmeister]"}; case 5: {"[Brandmeister]"}; case 6: {"[Oberbrandmeister]"}; case 7: {"[Wehrführer]"}; default {"[Feuerwehrmann-Anw]"}; }; _vehicle = vehicle _x; if(_vehicle != _x && {!(_vehicle isKindOf "ParachuteBase")}) then { _QUGw = count(crew _vehicle); { if(alive _x && _x != (driver _vehicle) && _x in units(group player) && !(_x in _tjR)) then { _iLYO = switch ((_x getVariable ["rank",0])) do { case 2: {"[Feuerwehrmann]"}; case 3: {"[Oberfeuerwehrmann]"}; case 4: {"[Unterbrandmeister]"}; case 5: {"[Brandmeister]"}; case 6: {"[Oberbrandmeister]"}; case 7: {"[Wehrführer]"}; default {"[Feuerwehrmann-Anw]"}; }; _LzJH = _LzJH + format ["%1%2%3",_iLYO, _x getVariable["aOsyc",name _x], if(_forEachIndex == _QUGw-1) then {""} else {", "}]; _tjR pushBack _x; _iLYO = ""; }; } forEach (crew _vehicle); _qUNP = format["[%1]%2 %3",getText(configFile>>"CfgVehicles">>typeOf _vehicle>>"DisplayName"), if(!isNull (driver _vehicle) && {((driver _vehicle) in units(group player))} && {!((driver _vehicle) in _tjR)} ) then { _tjR pushBack (driver _vehicle); _YFM = switch (((driver _vehicle) getVariable ["rank",0])) do { case 2: {"[Feuerwehrmann]"}; case 3: {"[Oberfeuerwehrmann]"}; case 4: {"[Unterbrandmeister]"}; case 5: {"[Brandmeister]"}; case 6: {"[Oberbrandmeister]"}; case 7: {"[Wehrführer]"}; default {"[Feuerwehrmann-Anw]"}; }; if(_QUGw == 1) then { format["%1%2",_YFM,(driver _vehicle) getVariable["aOsyc",name _x]] }else{ format["%1%2%3",_YFM,(driver _vehicle) getVariable["aOsyc",name _x], ","] }; }else{""}, _LzJH]; _YFM = ""; _LzJH = ""; }else{ _qUNP = format["%1%2",_WUUW,_x getVariable["aOsyc",name _x]]; }; _VJc = createMarkerLocal [format["%1_marker",_x],visiblePosition _x]; _VJc setMarkerColorLocal "ColorBlue"; _VJc setMarkerTypeLocal "Mil_dot"; _VJc setMarkerTextLocal format["%1", _qUNP]; _VNGM pushBack [_VJc,_x]; _qUNP = ""; _WUUW = ""; }; } foreach units(group player); while {visibleMap} do { { _VJc = _x select 0; _kMp = _x select 1; if(!isNil "_kMp") then { if(!isNull _kMp) then { _VJc setMarkerPosLocal (visiblePosition _kMp); }; }; } foreach _VNGM; if(!visibleMap) exitWith {}; uisleep 0.02; }; {deleteMarkerLocal (_x select 0);} foreach _VNGM; _VNGM = []; _tjR = [];};