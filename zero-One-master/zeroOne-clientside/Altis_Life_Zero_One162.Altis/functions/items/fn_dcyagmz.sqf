private['_KxLl','_rIF','_rQUr','_lPwi','_zud','_ftJ','_Upt','_aziy'];_KxLl = param[0,[],[[]]];if(_KxLl isEqualTo [] || {player distance _KxLl > 25}) exitWith {};_KxLl set[2,(_KxLl select 2)+0.2];if(lineIntersects [eyePos player, ATLtoASL _KxLl,player]) exitWith {};qbqKYXz = true;_rIF = eyeDirection player;_rQUr = getPosATL player;_lPwi = [(_KxLl select 0)-(_rQUr select 0),(_KxLl select 1)-(_rQUr select 1),(_KxLl select 2)-(_rQUr select 2)];_zud = sqrt((_lPwi select 0)^2+(_lPwi select 1)^2+(_lPwi select 2)^2);_ftJ = aCos ((_rIF select 0)*((_lPwi select 0) / _zud)+((_lPwi select 1) / _zud)*(_rIF select 1)+((_lPwi select 2) / _zud)*(_rIF select 2));playSound "flashbang";_Upt = ppEffectCreate ["DynamicBlur",500];_Upt ppEffectForceInNVG true;_Upt ppEffectEnable true;if(_ftJ < 90) then { _aziy = ppEffectCreate ["ColorCorrections",2500]; _aziy ppEffectAdjust [1, 1, -0.01, [1, 1, 1, 1], [1, 1, 1, 1], [1, 1, 1, 1]]; _aziy ppEffectCommit 0.1; _aziy ppEffectEnable true; _aziy ppEffectForceInNVG true; _Upt ppEffectAdjust [3]; _Upt ppEffectCommit 0.2; 23 fadeSound 0.1; uisleep 13; _aziy ppEffectAdjust [1, 1, -0.02, [4.5, 3.5, 1.6, -0.02],[1.8, 1.6, 1.6, 1],[-1.5,0,-0.2,1]]; _aziy ppEffectCommit 10; uisleep 5; 15 fadeSound 1; uisleep 5; _aziy ppEffectEnable false; ppEffectDestroy _aziy; _Upt ppEffectAdjust [0]; _Upt ppEffectCommit 3; uisleep 3; _Upt ppEffectEnable false; ppEffectDestroy _Upt;} else { _Upt ppEffectAdjust [2.1]; _Upt ppEffectCommit 0.1; 15 fadeSound 0.25; uisleep 15; _Upt ppEffectAdjust [0]; _Upt ppEffectCommit 10; uisleep 5; 15 fadeSound 1; uisleep 5; _Upt ppEffectEnable false; ppEffectDestroy _Upt;};qbqKYXz = false;