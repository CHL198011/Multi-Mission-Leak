private['_slk','_KxNJ','_yBi','_EcU','_mYmj','_Fwv','_uFk'];disableSerialization;if(!CpatBBO) exitWith {hint "Du kannst ein Fahrzeug nur alle 20 Sekunden verkaufen"; closeDialog 0;};if(CpatBBO) then { CpatBBO = false; [] spawn { uisleep 20; CpatBBO = true; };};_mYmj = [ format["Möchtest du das Fahrzeug wirklich verkaufen?"], format["Fahrzeug verkaufen"], localize "STR_Global_Yes", localize "STR_Global_No"] call BIS_fnc_guiMessage;if(!_mYmj) exitWith {};if(lbCurSel 2802 isEqualTo -1) exitWith {hint localize "STR_Global_NoSelection"};_slk = lbData[2802,(lbCurSel 2802)];_slk = (call compile format["%1",_slk]) select 0;_KxNJ = lbValue[2802,(lbCurSel 2802)];if(isNil "_slk") exitWith {hint localize "STR_Garage_Selection_Error"};_yBi = getNumber(missionConfigFile >> "zero_CfgVehicles" >> _slk >> "garage_sell");if(playerSide isEqualTo independent || playerSide isEqualTo west) then { _shop = format["%1_%2",if(playerSide isEqualTo west) then {"cop"}else{"feuerwehr"},toLower(Aeclcw)]; _Fwv = (getArray(missionConfigFile >> "zero_VehicleShops" >> _shop >> "vehicles")); _uFk = [_slk,_Fwv] call zero_fnc_oKzQhZKu; if(_uFk != -1) then { _yBi = round(((_Fwv select _uFk) select 1)/2); }else{ _yBi = 1000; };};[format ["GARAGE SELL: %1 (%4) hat %2 für %3 verkauft.", player getVariable["aOsyc", name player], _slk, _yBi, playerSide],"zo_log",false,false] call zero_fnc_fdEkiHoij;[_KxNJ,getPlayerUID player,_yBi,player,Aeclcw] remoteExec ["zero_fnc_vehicleDelete",2];_EcU = [];if (Aeclcw == "Car") then { { if (_x select 0 != _KxNJ) then { _EcU pushBack _x; }; } forEach UpyUo; UpyUo = _EcU; [UpyUo] spawn zero_fnc_hCByM;};if (Aeclcw == "Air") then { { if (_x select 0 != _KxNJ) then { _EcU pushBack _x; }; } forEach hhm; hhm = _EcU; [hhm] spawn zero_fnc_hCByM;};if (Aeclcw == "Ship") then { { if (_x select 0 != _KxNJ) then { _EcU pushBack _x; }; } forEach slgsTyx; slgsTyx = _EcU; [slgsTyx] spawn zero_fnc_hCByM;};closeDialog 0;