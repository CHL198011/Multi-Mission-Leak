private['_yZIM','_UyDG','_mYmj','_Wkk','_VJc','_yPL','_Xau'];_yZIM = param[0,ObjNull,[ObjNull]];_UyDG = getPlayerUID player;if(isNull _yZIM || !(_yZIM isKindOf "House_F")) exitWith {};if((_yZIM getVariable["house_owned",false])) exitWith {hint "Das Haus ist bereits verkauft!"};if(!isNil {(_yZIM getVariable "house_sold")}) exitWith {hint localize "STR_House_Sell_Process"};if(!qSyQAq) exitWith {hint localize "STR_House_License"};if(count nLivuo >= 2) exitWith {hint format[localize "STR_House_Max_House",2]};if((player distance (getMarkerPos "Gang_Eroberung_1")) < 1500) exitWith {hint "Aufgrund der Nähe zur Gangeroberung ist dieses Haus, aus Sicherheitsgründen, nicht kaufbar"};closeDialog 0;_Wkk = [(typeOf _yZIM)] call zero_fnc_abxv;if(_Wkk isEqualTo []) exitWith {};if(([2, 0] call zero_fnc_JNHrfnI) < (_Wkk select 0)) exitWith {hint format [localize "STR_House_NotEnough", (_Wkk select 0) call zero_fnc_nAnP]};_mYmj = [ format[localize "STR_House_BuyMSG", [(_Wkk select 0)] call zero_fnc_nAnP, (_Wkk select 1)],localize "STR_House_Purchase",localize "STR_Global_Buy",localize "STR_Global_Cancel"] call BIS_fnc_guiMessage;if(_mYmj) then { [_UyDG,_yZIM] remoteExec ["zero_fnc_addHouse",2]; _yZIM setVariable["onUxX",[_UyDG,profileName],true]; _yZIM setVariable["locked",true,true]; _yZIM setVariable["uid",round(random 99999),true]; [0, ([2, 0] call zero_fnc_JNHrfnI) - (_Wkk select 0)] call zero_fnc_JNHrfnI; YPCst pushBack _yZIM; nLivuo pushBack [str(getPosATL _yZIM),[]]; _VJc = createMarkerLocal [format["house_%1",(_yZIM getVariable "uid")],getPosATL _yZIM]; _yPL = getText(configFile >> "CfgVehicles" >> (typeOf _yZIM) >> "displayName"); _VJc setMarkerTextLocal _yPL; _VJc setMarkerColorLocal "ColorBlue"; _VJc setMarkerTypeLocal "loc_Lighthouse"; _Xau = getNumber(configFile >> "CfgVehicles" >> (typeOf _yZIM) >> "numberOfDoors"); for "_i" from 1 to _Xau do { _yZIM setVariable[format["bis_disabled_Door_%1",_i],1,true]; }; [] call zero_fnc_nbxA; [format ["HOUSE BUY: %1 (%4) hat ein Haus fuer %2 gekauft. Position %3", player getVariable["aOsyc",name player], [(_Wkk select 0)] call zero_fnc_nAnP, getPosATL _yZIM, playerSide],"zo_log",false,false] call zero_fnc_fdEkiHoij;};