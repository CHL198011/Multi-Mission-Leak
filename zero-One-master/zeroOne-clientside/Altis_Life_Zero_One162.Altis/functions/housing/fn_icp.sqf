private['_yZIM','_mYmj','_FCgC','_OYf','_KxLl','_wgJm','_GGwj'];_yZIM = param[0,ObjNull,[ObjNull]];if(isNull _yZIM || !(_yZIM isKindOf "House_F")) exitWith {};if(!isNil {(_yZIM getVariable "house_sold")}) exitWith {hint localize "STR_House_Sell_Process"};if(!isNil "aAbyZPF") then { _KxLl = call compile format["%1",aAbyZPF]; _wgJm = nearestBuilding _KxLl; if(_yZIM == _wgJm) exitWith {_GGwj = true; hint "Du kannst das Ganghauptquatier nicht verkaufen!";};};if(!isNil "_GGwj") exitWith {systemChat format ["ex %1", _GGwj]};closeDialog 0;_FCgC = [(typeOf _yZIM)] call zero_fnc_abxv;if(_FCgC isEqualTo []) exitWith {};_mYmj = [ format[localize "STR_House_SellHouseMSG", (round((_FCgC select 0)/2)) call zero_fnc_nAnP, (_FCgC select 1)],localize "STR_pInAct_SellHouse",localize "STR_Global_Sell",localize "STR_Global_Cancel"] call BIS_fnc_guiMessage;if(_mYmj) then { if(!isNil "_GGwj") exitWith {hint "Du kannst das Ganghauptquatier nicht verkaufen!"}; _yZIM setVariable["house_sold",true,true]; [_yZIM] remoteExec ["zero_fnc_sellHouseDB",2]; _yZIM setVariable["locked",false,true]; deleteMarkerLocal format["house_%1",_yZIM getVariable "uid"]; _yZIM setVariable["uid",nil,true]; [0, ([2, 0] call zero_fnc_JNHrfnI) + (round((_FCgC select 0)/2))] call zero_fnc_JNHrfnI; [format ["HOUSE SELL: %1 (%4) hat ein Haus fuer %2 verkauft. Position %3", player getVariable["aOsyc",name player], [(round((_FCgC select 0)/2))] call zero_fnc_nAnP,getPosATL _yZIM, playerSide],"zo_log",false,false] call zero_fnc_fdEkiHoij; _OYf = YPCst find _yZIM; if(_OYf != -1) then { YPCst deleteAt _OYf; }; _OYf = [str(getPosATL _yZIM),nLivuo] call zero_fnc_oKzQhZKu; if(_OYf != -1) then { nLivuo deleteAt _OYf; }; _numOfDoors = getNumber(configFile >> "CfgVehicles" >> (typeOf _yZIM) >> "numberOfDoors"); for "_i" from 1 to _numOfDoors do { _yZIM setVariable[format["bis_disabled_Door_%1",_i],0,true]; };};