private['_slk','_DEnE','_vMPi','_cjTt','_LPoU','_ijxb','_zXXn','_kNi','_qZe','_ouPQ','_Dkp','_MQr','_ivt','_qVo','_FJr'];_slk = param[0,ObjNull,[ObjNull]];if(isNull _slk) exitWith {};if(!isNil {_slk getVariable "mining"}) exitWith {hint localize "STR_NOTF_DeviceIsMining";};if(fuel _slk isEqualTo 0) exitWith {titleText[localize "STR_NOTF_OutOfFuel","PLAIN"];};if(!isNil "KSUwnV") exitWith {titleText["Dein Skill läst es nicht zu mehr als ein Gerät zu Steuern.","PLAIN"];};if(!isNil "obstUisP") exitWith {titleText["Dein Skill läst es nicht zu mehr als ein Gerät zu Steuern.","PLAIN"];};closeDialog 0;_DEnE = ["briefos_1","briefos_2","briefos_3","briefos_4","briefos_5","briefos_6","postos_1","postos_2","postos_3","postos_4","apple_1","apple_2","apple_3","apple_4","apple_5","apple_6","apple_7","peaches_1","peaches_2","peaches_3","peaches_4","peaches_5","peaches_6","peaches_7","heroin_1","cocaine_1","weed_1","schwarz_1","weiss_1","grape_1","baumwolle_1","bananen_1","bananen_2","bananen_3","bananen_4","bananen_5","bananen_6","bananen_7","lead_1","lead_2","iron_1","iron_2","salt_1","sand_1","diamond_1","diamond_2","oil_1","oil_2","rock_1"];_vMPi = "";{ if(player distance (getMarkerPos _x) < 150) exitWith {_vMPi = _x;};} forEach _DEnE;if(_vMPi isEqualTo "") exitWith {hint localize "STR_NOTF_notNearResource";};sendtrunk = [2,_slk,player,[],clientOwner];HC1_owner publicVariableClient "sendtrunk";sendtrunk = nil;waitUntil {!isNil "sendtrunkre"};pfydWWfV = sendtrunkre;sendtrunkre =nil;if ((typeName pfydWWfV) isEqualTo (typeName "")) exitWith {hint localize "STR_MISC_VehInvUse";};obstUisP = pfydWWfV;_cjTt = [(getNumber(missionConfigFile >> "zero_CfgVehicles" >> (typeOf _slk) >> "trunk")),(obstUisP select 1)];if((_cjTt select 1) >= (_cjTt select 0)) exitWith {hint localize "STR_NOTF_DeviceFull";};_LPoU = switch(true) do { case (_vMPi in ["apple_1","apple_2","apple_3","apple_4","apple_4","apple_5","apple_6","apple_7"]): {"apple"}; case (_vMPi in ["peaches_1","peaches_2","peaches_3","peaches_4","peaches_5","peaches_6","peaches_7"]): {"peach"}; case (_vMPi in ["bananen_1","bananen_2","bananen_3","bananen_4","bananen_5","bananen_6","bananen_7"]): {"bananen"}; case (_vMPi in ["baumwolle_1"]): {"baumwolle"}; case (_vMPi in ["grape_1"]): {"grapes"}; case (_vMPi in ["heroin_1"]): {"heroinu"}; case (_vMPi in ["schwarz_1"]): {"dunklematerie"}; case (_vMPi in ["weiss_1"]): {"helium3"}; case (_vMPi in ["cocaine_1"]): {"cocaine"}; case (_vMPi in ["weed_1"]): {"cannabis"}; case (_vMPi in ["lead_1","lead_2"]): {"copperore"}; case (_vMPi in ["iron_1","iron_2"]): {"ironore"}; case (_vMPi in ["salt_1"]): {"salt"}; case (_vMPi in ["sand_1"]): {"sand"}; case (_vMPi in ["diamond_1","diamond_2"]): {"diamond"}; case (_vMPi in ["oil_1","oil_2"]): {"oilu"}; case (_vMPi in ["rock_1"]): {"rock"}; case (_vMPi in ["briefos_1","briefos_2","briefos_3","briefos_4","briefos_5","briefos_6"]): {"brief"}; case (_vMPi in ["postos_1","postos_2","postos_3","postos_4"]): {"paket"}; default {""};};if(_LPoU isEqualTo "") exitWith {hint "Bad Resource?";};_slk setVariable ["mining",true,true];_FJr = [];{if (_x distance player < 350) then {_FJr pushBack _x};}forEach (allPlayers - entities "HeadlessClient_F");[_slk] remoteExec ["zero_fnc_FNSF",_FJr]; titleRsc ["RGB","PLAIN"];_qZe = (((uiNamespace getVariable "aWaQ") displayCtrl 5501) ctrlSetText "Solange das Gerät Läuft ist der Kofferraum Geschlossen!");while {true} do { KSUwnV = true; if(!alive _slk || isNull _slk) exitWith {}; if(isEngineOn _slk) exitWith {titleText[localize "STR_NOTF_MiningStopped","PLAIN"];}; titleText[localize "STR_NOTF_DeviceMining","PLAIN"]; _kNi = time + 27; waitUntil { if(isEngineOn _slk) exitWith {titleText[localize "STR_NOTF_MiningStopped","PLAIN"]; true}; if(round(_kNi - time) < 1) exitWith {true}; if(!alive Player) exitWith {true}; uiSleep 0.2; false }; if(isEngineOn _slk) exitWith {titleText[localize "STR_NOTF_MiningStopped","PLAIN"];}; _ijxb = obstUisP; _ouPQ = _ijxb select 0; _Dkp = _ijxb select 1; _zXXn = [_LPoU,_ouPQ] call zero_fnc_oKzQhZKu; _cjTt = [(getNumber(missionConfigFile >> "zero_CfgVehicles" >> (typeOf _slk) >> "trunk")),(obstUisP select 1)]; _MQr = [_LPoU,15,_cjTt select 1,_cjTt select 0] call zero_fnc_Prk; if(_MQr < 2) exitWith {titleText[localize "STR_NOTF_DeviceFull","PLAIN"];}; if(typeName _MQr != typeName 2) exitWith {titleText[localize "STR_NOTF_DeviceFull","PLAIN"];}; _ivt = (getNumber(missionConfigFile >> "zero_CfgItems" >> _LPoU >> "weight")) * _MQr; if(_zXXn isEqualTo -1) then { _ouPQ pushBack [_LPoU,_MQr]; } else { _qVo = _ouPQ select _zXXn select 1; _ouPQ set[_zXXn,[_LPoU,_qVo + _MQr]]; }; if(fuel _slk <= 0) exitWith {titleText[localize "STR_NOTF_OutOfFuel","PLAIN"];}; if(local _slk) then { _slk setFuel (fuel _slk)-0.045; } else { [_slk,(fuel _slk)-0.04] remoteExecCall ["zero_fnc_GKLTJk",_slk]; }; if(fuel _slk <= 0) exitWith {titleText[localize "STR_NOTF_OutOfFuel","PLAIN"];}; titleText[format[localize "STR_NOTF_DeviceMined",_MQr],"PLAIN"]; obstUisP = [_ouPQ,_Dkp + _ivt]; _cjTt = [(getNumber(missionConfigFile >> "zero_CfgVehicles" >> (typeOf _slk) >> "trunk")),(obstUisP select 1)]; _MQr = [_LPoU,15,_cjTt select 1,_cjTt select 0] call zero_fnc_Prk; if(_MQr < 2) exitWith {titleText[localize "STR_NOTF_DeviceFull","PLAIN"];}; if(typeName _MQr != typeName 2) exitWith {titleText[localize "STR_NOTF_DeviceFull","PLAIN"];}; if (!alive Player) exitWith {}; uiSleep 2;};_slk setVariable["mining",nil,true];sendtrunk = [3,_slk,player,obstUisP,clientOwner];HC1_owner publicVariableClient "sendtrunk";sendtrunk = nil;KSUwnV = nil;obstUisP = nil;