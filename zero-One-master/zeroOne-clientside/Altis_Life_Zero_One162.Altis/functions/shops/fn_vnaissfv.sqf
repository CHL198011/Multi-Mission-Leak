private['_Mos','_WWE','_qQSJ','_aYxJ','_czr','_hbT','_Pgg','_GGwj','_kNi'];if((lbCurSel 2401) isEqualTo -1) exitWith {hint localize "STR_Shop_Virt_Nothing"};_hbT = param[0,false,[false]];_Mos = lbData[2401,(lbCurSel 2401)];_WWE = lbValue[2401,(lbCurSel 2401)];if((playerSide isEqualTo west || playerSide isEqualTo independent) && (_Mos in ["redgull","lockpick","fuelF"])) then {_WWE = 2000;};_qQSJ = ctrlText 2404;if(!([_qQSJ] call zero_fnc_uunyW)) exitWith {hint localize "STR_Shop_Virt_NoNum";};_qQSJ = parseNumber(_qQSJ);_aYxJ = [_Mos,_qQSJ,KtV,dZldvdq] call zero_fnc_Prk;if(_aYxJ <= 0) exitWith {hint localize "STR_NOTF_NoSpace"};_qQSJ = _aYxJ;_WWE = (_WWE * _qQSJ);_GGwj = false;_Pgg = (group player) getVariable["HNCqyH",[]];if(_hbT) then { if(_Pgg isEqualTo []) exitWith {hint "Du bist in keiner Gang!";_GGwj = true;}; if((_Pgg select 5) < _WWE) then {hint format["Deine Gang hat nicht genug Geld um das Item zu kaufen.\n\nEs fehlen: €%1",[_WWE - (_Pgg select 5)] call zero_fnc_nAnP];_GGwj = true;};}else{ if(_WWE > ([3, 0] call zero_fnc_JNHrfnI)) then {hint localize "STR_NOTF_NotEnoughMoney"; _GGwj = true;};};if(_GGwj) exitWith {};_czr = getText(missionConfigFile >> "zero_CfgItems" >> _Mos >> "name");if(([true,_Mos,_qQSJ] call zero_fnc_VJhZQOJ)) then { if(_hbT) then { if((_Pgg select 5) < _WWE) then { hint format["Deine Gang hat nicht genug Geld um das Item zu kaufen.\n\nEs fehlen: €%1",[_WWE - (_Pgg select 5)] call zero_fnc_nAnP]; [false,_Mos,_qQSJ] call zero_fnc_VJhZQOJ; _GGwj = true; }else{ [format ["GANG BUY: %1 (%5) hat %2 %3 fuer %4 Euro gekauft.", player getVariable["aOsyc",name player], _qQSJ, _czr, [_WWE] call zero_fnc_nAnP, _Pgg select 1],"zo_log",false,false] call zero_fnc_fdEkiHoij; _Pgg set[5,(_Pgg select 5) - _WWE]; ((group player) setVariable["HNCqyH",_Pgg,true]); if(isNil "rAKL") then { rAKL = true; [] spawn { _kNi = serverTime + 10; waitUntil {isNull (findDisplay 2400) || (servertime >= _kNi)}; _Pgg = (group player) getVariable ["HNCqyH",[]]; hc_updateGang = [clientOwner,1,[_Pgg select 0,_Pgg select 5]]; HC1_owner publicVariableClient "hc_updateGang"; hc_updateGang = nil; rAKL = nil; }; }; }; }else{ if(_WWE > ([3, 0] call zero_fnc_JNHrfnI)) then { hint localize "STR_NOTF_NotEnoughMoney"; [false,_Mos,_qQSJ] call zero_fnc_VJhZQOJ; _GGwj = true; }else{ [1, ([3, 0] call zero_fnc_JNHrfnI) - _WWE] call zero_fnc_JNHrfnI; }; }; if(_GGwj) exitWith {}; hint format[localize "STR_Shop_Virt_BoughtItem",_qQSJ,_czr,[_WWE] call zero_fnc_nAnP]; [] call zero_fnc_OwiDOgli;};