private ['_HSh','_tSbR','_qeu','_tts','_lpEH','_GGwj','_MEbx'];_HSh = (findDisplay 3100) displayCtrl 3108;_tSbR = (findDisplay 3100) displayCtrl 3104;_qeu = (findDisplay 3100) displayCtrl 3109;_tts = _this;_qeu ctrlSetText (_tts select 2);lbClear _HSh;_HSh lbAdd "0";_HSh lbAdd "1";_HSh ctrlEnable false;_tSbR ctrlEnable true;if((_tts select 6) == "CfgMagazines") then { _GGwj = false; _lpEH = 0; lbClear _HSh; _HSh ctrlEnable true; _HSh lbAdd "0"; while {(!_GGwj)} do { if (player canAdd [(_tts select 0),(_lpEH+1)]) then { _lpEH = _lpEH + 1; } else { _GGwj = true; if (_lpEH == 0) then { _tSbR ctrlEnable false; } else { for "_i" from 1 to _lpEH do { _HSh lbAdd format ["%1",_i]; }; }; }; };}else{ if(_tts select 6 == "CfgVehicles") then { if((_tts select 0) isKindOf "Man") then { _MEbx = [(_tts select 16)] call zero_fnc_NKBUBCzsG; _qeu ctrlSetText (_MEbx select 2); }; };};_HSh lbSetCurSel 1;