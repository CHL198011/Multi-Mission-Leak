private['_Mos','_QSu','_hENJ','_fvhg','_whl','_ecE','_klt','_htk','_vby'];_htk = param[0,0,[0]];if((lbCurSel 2402) isEqualTo -1) exitWith {};_Mos = lbData[2402,(lbCurSel 2402)];_QSu = -1;if(isNil "NVrTmQ") then { _QSu = getNumber(missionConfigFile >> "zero_CfgItems" >> _Mos >> "sellPrice");}else{ _QSu = [_Mos,NVrTmQ] call zero_fnc_oKzQhZKu;};if(_QSu isEqualTo -1) exitWith {hint "Es wurde kein Preis gefunden."};_hENJ = -1;if(isNil "NVrTmQ") then { _hENJ = _QSu;}else{ _hENJ = (NVrTmQ select _QSu) select 1;};if(_hENJ isEqualTo -1) exitWith {};_whl = -1;if(_htk isEqualTo 0) then { _whl = ctrlText 2405; if(!([_whl] call zero_fnc_uunyW)) exitWith {hint localize "STR_Shop_Virt_NoNum";}; _whl = parseNumber (_whl);}else{ _QSu = [_Mos, VfT] call zero_fnc_oKzQhZKu; if(_QSu isEqualTo -1) exitWith {_whl = 99999}; _whl = (VfT select _QSu) select 1;};_QSu = [_Mos, VfT] call zero_fnc_oKzQhZKu;if(_QSu isEqualTo -1) exitWith {hint localize "STR_Shop_Virt_NotEnough"};_vby = (VfT select _QSu) select 1;if(_whl > _vby) exitWith {hint localize "STR_Shop_Virt_NotEnough"};_hENJ = (_hENJ * _whl);_ecE = getText(missionConfigFile >> "zero_CfgItems" >> _Mos >> "name");if(([false,_Mos,_whl] call zero_fnc_VJhZQOJ)) then { hint format[localize "STR_Shop_Virt_SellItem",_whl,_ecE,[_hENJ] call zero_fnc_nAnP]; [1, ([3, 0] call zero_fnc_JNHrfnI) + _hENJ] call zero_fnc_JNHrfnI; [] call zero_fnc_OwiDOgli; [format ["ITEM SELL: %1 (%5) hat %2 %3 fuer %4 Euro verkauft.", player getVariable["aOsyc",name player], _whl, _ecE, [_hENJ] call zero_fnc_nAnP, playerSide],"zo_log",false,false] call zero_fnc_fdEkiHoij; if(_Mos in ["apple","bananen","brief","catshark","cement","clothing","cocainep","copper_r","diamondc","dunklematerie","glass","heroinp","helium3","iron_r","mackerel","marijuana","moonshine","mullet","oilp","ornate","paket","peach","petroleum","salema","salt_r","tuna","turtle","wine"] && (playerSide isEqualTo civilian || playerSide isEqualTo opfor)) then { if(isNil "zero_marketChange") then { [] spawn { uiSleep 180 + random(5); hc_marketChange = zero_marketChange; HC1_owner publicVariableClient "hc_marketChange"; hc_marketChange = nil; zero_marketChange = nil; }; zero_marketChange = [[_Mos, _whl]]; }else{ _QSu = [_Mos,zero_marketChange] call zero_fnc_oKzQhZKu; if(_QSu != -1) then { _klt = (zero_marketChange select _QSu) select 1; zero_marketChange set[_QSu,[_Mos, _whl + _klt]]; }else{ zero_marketChange pushBack [_Mos, _whl]; }; }; };};