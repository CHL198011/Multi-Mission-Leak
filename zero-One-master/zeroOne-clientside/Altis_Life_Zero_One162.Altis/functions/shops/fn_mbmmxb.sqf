disableSerialization;private ['_fvY','_qmqL','_kTg','_Gze','_GGwj','_tjm','_ruaZ','_Lrrg','_bEU','_yiE','_NLH'];_GGwj = false;_fvY = _this select 0;_qmqL = _this select 1;_qmqL = (_fvY lbText _qmqL);if(isNull (findDisplay 3100)) exitWith {};_kTg = (findDisplay 3100) displayCtrl 3102;_bEU = (findDisplay 3100) displayCtrl 3106;_yiE = (findDisplay 3100) displayCtrl 3109;lbClear _kTg;_bEU ctrlSetModel "\A3\Weapons_F\DummyItem.p3d";_bEU ctrlSetModelDirAndUp [[0,1,0],[0,0,1]]; _bEU ctrlSetModelScale 0.25;_bEU ctrlSetPosition [0.16, 0.6, -0.1] ;_yiE ctrlSetText "";_tjm = getText(missionConfigFile >> "zero_ItemShops" >> hcCmEo >> "license");if((_tjm) != "") then { _GGwj = switch (typename (call compile _tjm)) do { case "BOOL" : {!(call compile _tjm)}; case "CODE" : {(call(call compile _tjm)) == 0}; default {true}; };};if (_GGwj) exitWith { hint localize "STR_Shop_Veh_NotAllowed"; waitUntil {!isNull (findDisplay 3100)}; closeDialog 0;};_NLH = switch (_qmqL) do {  case localize "STR_Shop_UI_Clothing": { (getArray(missionConfigFile >> "zero_ItemShops" >> hcCmEo >> "uniform")); };  case localize "STR_Shop_UI_Hats": { (getArray(missionConfigFile >> "zero_ItemShops" >> hcCmEo >> "Kopfbedeckungen")); };  case localize "STR_Shop_UI_Glasses": { (getArray(missionConfigFile >> "zero_ItemShops" >> hcCmEo >> "Sonnenbrillen")); };  case localize "STR_Shop_UI_Vests": { (getArray(missionConfigFile >> "zero_ItemShops" >> hcCmEo >> "Vesten")); };  case localize "STR_Shop_UI_Backpack": { (getArray(missionConfigFile >> "zero_ItemShops" >> hcCmEo >> "Ruck")); }; case localize "STR_Shop_Weapon": { (getArray(missionConfigFile >> "zero_ItemShops" >> hcCmEo >> "Waffen")); }; case localize "STR_Shop_item": { (getArray(missionConfigFile >> "zero_ItemShops" >> hcCmEo >> "ITems")); }; case localize "STR_Shop_Dive": { (getArray(missionConfigFile >> "zero_ItemShops" >> hcCmEo >> "Tauchershop")); }; case localize "STR_Shop_kart": { (getArray(missionConfigFile >> "zero_ItemShops" >> hcCmEo >> "Kartshop")); }; case localize "STR_Shop_god": { (getArray(missionConfigFile >> "zero_ItemShops" >> hcCmEo >> "GodShop")); };};if(_NLH isEqualTo []) exitWith {};{ if(!((_x select 3) isEqualTo [])) then { _ruaZ = ((_x select 3) select 1); _tjm = (call compile ((_x select 3) select 0)); _Lrrg = switch (typename _ruaZ) do { case "SCALAR" : {call _tjm >= _ruaZ}; case "ARRAY" : {call _tjm in _ruaZ}; default {true}; }; } else { _Lrrg = true; }; if (_Lrrg) then { _details = [_x select 0] call zero_fnc_NKBUBCzsG; if ((_x select 0) iskindof "man") then { _uniform = [(_details select 16)] call zero_fnc_NKBUBCzsG; if((_x select 1) isequalto "nil") then { _kTg lbAdd format["%1",(_uniform select 1)]; } else { if (typename (_x select 1) isequalto "ARRAY") then { _kTg lbAdd format["%1",(_x select 1) select (_ruaZ find (call _tjm))]; } else { if (((_x select 1) find "STR_") != -1) then { _kTg lbAdd format["%1",localize (_x select 1)]; }else { _kTg lbAdd format["%1",(_x select 1)]; }; }; }; _kTg lbSetValue [(lbSize _kTg)-1,_x select 2]; _pic = _uniform select 2; _kTg lbSetData [(lbSize _kTg)-1,_x select 0]; _kTg lbSetPicture [(lbSize _kTg)-1,_pic]; } else { if((_x select 1) isequalto "nil") then { _kTg lbAdd format["%1",(getText(configFile >> (_details select 6) >> (_x select 0) >> "DisplayName"))]; } else { if (typename (_x select 1) isequalto "ARRAY") then { _kTg lbAdd format["%1",(_x select 1) select (_ruaZ find _tjm)]; } else { if (((_x select 1) find "STR_") != -1) then { _kTg lbAdd format["%1",localize (_x select 1)]; }else { _kTg lbAdd format["%1",(_x select 1)]; }; }; }; _pic = _details select 2; _kTg lbSetData [(lbSize _kTg)-1,_x select 0]; _kTg lbSetValue [(lbSize _kTg)-1,_x select 2]; _kTg lbSetPicture [(lbSize _kTg)-1,_pic]; }; };} foreach _NLH;[] call zero_fnc_QZL;